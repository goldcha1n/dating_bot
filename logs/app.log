2025-12-30 14:03:17,161 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 14:03:17,161 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 14:03:17,162 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\bot.db
2025-12-30 14:03:17,162 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 14:03:17,185 [INFO] __main__: api started
2025-12-30 14:03:17,210 [INFO] db: DB initialized (create_all done)
2025-12-30 14:03:17,386 [INFO] app.bot: bot started
2025-12-30 14:03:17,386 [INFO] aiogram.dispatcher: Start polling
2025-12-30 14:03:17,386 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 64602.6s
2025-12-30 14:03:17,542 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:05:50,134 [INFO] aiogram.event: Update id=99609455 is handled. Duration 264 ms by bot id=8308846710
2025-12-30 14:05:52,848 [INFO] aiogram.event: Update id=99609456 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 14:06:05,459 [INFO] aiogram.event: Update id=99609457 is handled. Duration 63 ms by bot id=8308846710
2025-12-30 14:06:10,038 [INFO] aiogram.event: Update id=99609458 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:06:13,018 [INFO] aiogram.event: Update id=99609459 is handled. Duration 61 ms by bot id=8308846710
2025-12-30 14:06:17,459 [INFO] aiogram.event: Update id=99609460 is handled. Duration 125 ms by bot id=8308846710
2025-12-30 14:06:22,939 [INFO] aiogram.event: Update id=99609461 is handled. Duration 108 ms by bot id=8308846710
2025-12-30 14:06:28,772 [INFO] aiogram.event: Update id=99609462 is handled. Duration 110 ms by bot id=8308846710
2025-12-30 14:06:30,524 [INFO] aiogram.event: Update id=99609463 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:06:38,072 [INFO] aiogram.event: Update id=99609464 is handled. Duration 171 ms by bot id=8308846710
2025-12-30 14:06:41,242 [INFO] aiogram.event: Update id=99609465 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 14:06:42,561 [INFO] aiogram.event: Update id=99609466 is handled. Duration 140 ms by bot id=8308846710
2025-12-30 14:07:07,328 [INFO] aiogram.event: Update id=99609467 is handled. Duration 141 ms by bot id=8308846710
2025-12-30 14:07:13,164 [INFO] aiogram.event: Update id=99609468 is handled. Duration 312 ms by bot id=8308846710
2025-12-30 14:07:14,749 [INFO] aiogram.event: Update id=99609469 is handled. Duration 281 ms by bot id=8308846710
2025-12-30 14:08:03,533 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 14:08:03,534 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 14:08:03,534 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-30 14:08:03,535 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-30 14:08:03,535 [INFO] __main__: Shutdown complete
2025-12-30 14:08:03,536 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:09:22,565 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 14:09:22,566 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 14:09:22,566 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\bot.db
2025-12-30 14:09:22,566 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 14:09:22,588 [INFO] __main__: api started
2025-12-30 14:09:22,615 [INFO] db: DB initialized (create_all done)
2025-12-30 14:09:22,800 [INFO] app.bot: bot started
2025-12-30 14:09:22,801 [INFO] aiogram.dispatcher: Start polling
2025-12-30 14:09:22,802 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 64237.2s
2025-12-30 14:09:22,967 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:10:20,980 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 14:10:20,981 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:10:20,981 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 14:10:20,987 [INFO] __main__: Shutdown complete
2025-12-30 14:10:28,743 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 14:10:28,743 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 14:10:28,743 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\bot.db
2025-12-30 14:10:28,743 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 14:10:28,764 [INFO] __main__: api started
2025-12-30 14:10:28,792 [INFO] db: DB initialized (create_all done)
2025-12-30 14:10:28,978 [INFO] app.bot: bot started
2025-12-30 14:10:28,978 [INFO] aiogram.dispatcher: Start polling
2025-12-30 14:10:28,979 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 64171.0s
2025-12-30 14:10:29,124 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:11:21,236 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 14:11:21,237 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 14:11:21,237 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-30 14:11:21,237 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-30 14:11:21,238 [INFO] __main__: Shutdown complete
2025-12-30 14:11:21,238 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:14:02,424 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 14:14:02,425 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 14:14:02,425 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 14:14:02,425 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 14:14:02,446 [INFO] __main__: api started
2025-12-30 14:14:02,536 [INFO] db: DB initialized (create_all done)
2025-12-30 14:14:02,720 [INFO] app.bot: bot started
2025-12-30 14:14:02,721 [INFO] aiogram.dispatcher: Start polling
2025-12-30 14:14:02,722 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 63957.3s
2025-12-30 14:14:02,885 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:14:31,581 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 14:14:31,581 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:14:31,587 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 14:14:31,588 [INFO] __main__: Shutdown complete
2025-12-30 14:14:35,003 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 14:14:35,003 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 14:14:35,004 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 14:14:35,004 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 14:14:35,026 [INFO] __main__: api started
2025-12-30 14:14:35,052 [INFO] db: DB initialized (create_all done)
2025-12-30 14:14:35,240 [INFO] app.bot: bot started
2025-12-30 14:14:35,241 [INFO] aiogram.dispatcher: Start polling
2025-12-30 14:14:35,241 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 63924.8s
2025-12-30 14:14:35,389 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:14:50,723 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 14:14:50,723 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:14:50,724 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 14:14:50,730 [INFO] __main__: Shutdown complete
2025-12-30 14:29:57,255 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 14:29:57,256 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 14:29:57,257 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 14:29:57,257 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 14:29:57,279 [INFO] __main__: api started
2025-12-30 14:29:57,308 [INFO] db: DB initialized (create_all done)
2025-12-30 14:29:57,309 [INFO] db: DB initialized (create_all done)
2025-12-30 14:29:57,494 [INFO] app.bot: bot started
2025-12-30 14:29:57,494 [INFO] aiogram.dispatcher: Start polling
2025-12-30 14:29:57,495 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 63002.5s
2025-12-30 14:29:57,656 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 14:31:59,566 [INFO] aiogram.event: Update id=99609470 is handled. Duration 171 ms by bot id=8308846710
2025-12-30 14:32:00,774 [INFO] aiogram.event: Update id=99609471 is handled. Duration 125 ms by bot id=8308846710
2025-12-30 14:32:04,998 [INFO] aiogram.event: Update id=99609472 is handled. Duration 63 ms by bot id=8308846710
2025-12-30 14:32:07,710 [INFO] aiogram.event: Update id=99609473 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 14:32:09,152 [INFO] aiogram.event: Update id=99609474 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:32:10,901 [INFO] aiogram.event: Update id=99609475 is handled. Duration 172 ms by bot id=8308846710
2025-12-30 14:32:13,500 [INFO] aiogram.event: Update id=99609476 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:32:16,583 [INFO] aiogram.event: Update id=99609477 is handled. Duration 188 ms by bot id=8308846710
2025-12-30 14:32:20,454 [INFO] aiogram.event: Update id=99609478 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:32:25,795 [INFO] aiogram.event: Update id=99609479 is handled. Duration 156 ms by bot id=8308846710
2025-12-30 14:32:27,982 [INFO] aiogram.event: Update id=99609480 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 14:32:44,448 [INFO] aiogram.event: Update id=99609481 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:32:46,563 [INFO] aiogram.event: Update id=99609482 is handled. Duration 140 ms by bot id=8308846710
2025-12-30 14:32:49,495 [INFO] aiogram.event: Update id=99609483 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 14:32:51,351 [INFO] aiogram.event: Update id=99609484 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 15:01:11,930 [INFO] aiogram.event: Update id=99609485 is handled. Duration 186 ms by bot id=8308846710
2025-12-30 15:02:18,707 [INFO] aiogram.event: Update id=99609486 is handled. Duration 94 ms by bot id=8308846710
2025-12-30 15:02:20,207 [INFO] aiogram.event: Update id=99609487 is handled. Duration 110 ms by bot id=8308846710
2025-12-30 15:02:27,980 [INFO] aiogram.event: Update id=99609488 is handled. Duration 108 ms by bot id=8308846710
2025-12-30 15:02:32,929 [INFO] aiogram.event: Update id=99609489 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 15:02:38,018 [INFO] aiogram.event: Update id=99609490 is handled. Duration 61 ms by bot id=8308846710
2025-12-30 15:02:40,789 [INFO] aiogram.event: Update id=99609491 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 15:02:44,020 [INFO] aiogram.event: Update id=99609492 is handled. Duration 61 ms by bot id=8308846710
2025-12-30 15:02:47,374 [INFO] aiogram.event: Update id=99609493 is handled. Duration 63 ms by bot id=8308846710
2025-12-30 15:02:51,745 [INFO] aiogram.event: Update id=99609494 is handled. Duration 141 ms by bot id=8308846710
2025-12-30 15:02:54,864 [INFO] aiogram.event: Update id=99609495 is handled. Duration 202 ms by bot id=8308846710
2025-12-30 15:03:05,985 [INFO] aiogram.event: Update id=99609496 is handled. Duration 155 ms by bot id=8308846710
2025-12-30 15:03:15,102 [INFO] aiogram.event: Update id=99609497 is handled. Duration 108 ms by bot id=8308846710
2025-12-30 15:03:17,079 [INFO] aiogram.event: Update id=99609498 is handled. Duration 296 ms by bot id=8308846710
2025-12-30 15:03:19,462 [INFO] aiogram.event: Update id=99609499 is handled. Duration 139 ms by bot id=8308846710
2025-12-30 15:03:21,096 [INFO] aiogram.event: Update id=99609500 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 15:03:56,650 [INFO] aiogram.event: Update id=99609501 is handled. Duration 235 ms by bot id=8308846710
2025-12-30 15:04:10,102 [INFO] aiogram.event: Update id=99609502 is handled. Duration 327 ms by bot id=8308846710
2025-12-30 15:22:39,510 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 15:22:39,511 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 15:22:39,512 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 15:22:39,530 [INFO] __main__: Shutdown complete
2025-12-30 15:38:08,505 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 15:38:08,505 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 15:38:08,506 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 15:38:08,506 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 15:38:08,529 [INFO] __main__: api started
2025-12-30 15:38:08,561 [INFO] db: DB initialized (create_all done)
2025-12-30 15:38:08,746 [INFO] app.bot: bot started
2025-12-30 15:38:08,747 [INFO] aiogram.dispatcher: Start polling
2025-12-30 15:38:08,748 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 58911.3s
2025-12-30 15:38:08,749 [INFO] db: DB initialized (create_all done)
2025-12-30 15:38:08,915 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 15:48:56,458 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 15:48:56,458 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 15:48:56,459 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 15:48:56,466 [INFO] __main__: Shutdown complete
2025-12-30 15:49:00,555 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 15:49:00,555 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 15:49:00,556 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 15:49:00,556 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 15:49:00,579 [INFO] __main__: api started
2025-12-30 15:49:00,610 [INFO] db: DB initialized (create_all done)
2025-12-30 15:49:00,796 [INFO] app.bot: bot started
2025-12-30 15:49:00,797 [INFO] aiogram.dispatcher: Start polling
2025-12-30 15:49:00,798 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 58259.2s
2025-12-30 15:49:00,800 [INFO] db: DB initialized (create_all done)
2025-12-30 15:49:00,954 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 15:55:30,066 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 15:55:30,067 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 15:55:30,067 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 15:55:30,068 [INFO] __main__: Shutdown complete
2025-12-30 15:55:33,509 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 15:55:33,510 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 15:55:33,510 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 15:55:33,511 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 15:55:33,534 [INFO] __main__: api started
2025-12-30 15:55:33,564 [INFO] db: DB initialized (create_all done)
2025-12-30 15:55:33,748 [INFO] app.bot: bot started
2025-12-30 15:55:33,749 [INFO] aiogram.dispatcher: Start polling
2025-12-30 15:55:33,749 [INFO] db: DB initialized (create_all done)
2025-12-30 15:55:33,750 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 57866.2s
2025-12-30 15:55:33,906 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 15:59:55,014 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 15:59:55,014 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 15:59:55,014 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-30 15:59:55,015 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-30 15:59:55,015 [INFO] __main__: Shutdown complete
2025-12-30 15:59:55,016 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:20:12,816 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 18:20:12,816 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 18:20:12,817 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 18:20:12,817 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 18:20:12,841 [INFO] __main__: api started
2025-12-30 18:20:12,872 [INFO] db: DB initialized (create_all done)
2025-12-30 18:20:12,873 [INFO] db: DB initialized (create_all done)
2025-12-30 18:20:13,059 [INFO] app.bot: bot started
2025-12-30 18:20:13,060 [INFO] aiogram.dispatcher: Start polling
2025-12-30 18:20:13,061 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 49186.9s
2025-12-30 18:20:13,226 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:25:28,380 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 18:25:28,381 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:25:28,382 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 18:25:28,390 [INFO] __main__: Shutdown complete
2025-12-30 18:25:32,020 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 18:25:32,020 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 18:25:32,021 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 18:25:32,021 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 18:25:32,047 [INFO] __main__: api started
2025-12-30 18:25:32,077 [INFO] db: DB initialized (create_all done)
2025-12-30 18:25:32,077 [INFO] db: DB initialized (create_all done)
2025-12-30 18:25:32,262 [INFO] app.bot: bot started
2025-12-30 18:25:32,263 [INFO] aiogram.dispatcher: Start polling
2025-12-30 18:25:32,264 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 48867.7s
2025-12-30 18:25:32,417 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:25:56,014 [INFO] aiogram.event: Update id=99609542 is handled. Duration 187 ms by bot id=8308846710
2025-12-30 18:25:57,260 [INFO] aiogram.event: Update id=99609543 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 18:25:59,235 [INFO] aiogram.event: Update id=99609544 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 18:27:16,285 [INFO] aiogram.event: Update id=99609545 is handled. Duration 63 ms by bot id=8308846710
2025-12-30 18:27:18,128 [INFO] aiogram.event: Update id=99609546 is handled. Duration 125 ms by bot id=8308846710
2025-12-30 18:28:54,766 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 18:28:54,766 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 18:28:54,766 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-30 18:28:54,767 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-30 18:28:54,767 [INFO] __main__: Shutdown complete
2025-12-30 18:28:54,768 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:28:58,256 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 18:28:58,256 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 18:28:58,257 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 18:28:58,257 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 18:28:58,280 [INFO] __main__: api started
2025-12-30 18:28:58,319 [INFO] db: DB initialized (create_all done)
2025-12-30 18:28:58,319 [INFO] db: DB initialized (create_all done)
2025-12-30 18:28:58,504 [INFO] app.bot: bot started
2025-12-30 18:28:58,505 [INFO] aiogram.dispatcher: Start polling
2025-12-30 18:28:58,506 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 48661.5s
2025-12-30 18:28:58,654 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:29:10,839 [INFO] aiogram.event: Update id=99609547 is handled. Duration 202 ms by bot id=8308846710
2025-12-30 18:29:18,574 [INFO] aiogram.event: Update id=99609548 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 18:29:19,980 [INFO] aiogram.event: Update id=99609549 is handled. Duration 108 ms by bot id=8308846710
2025-12-30 18:29:21,529 [INFO] aiogram.event: Update id=99609550 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 18:29:22,366 [INFO] aiogram.event: Update id=99609551 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 18:31:36,405 [INFO] aiogram.event: Update id=99609552 is handled. Duration 235 ms by bot id=8308846710
2025-12-30 18:31:38,539 [INFO] aiogram.event: Update id=99609553 is handled. Duration 139 ms by bot id=8308846710
2025-12-30 18:34:19,769 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 18:34:19,769 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:34:19,770 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 18:34:19,776 [INFO] __main__: Shutdown complete
2025-12-30 18:34:23,546 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 18:34:23,546 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 18:34:23,547 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 18:34:23,547 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 18:34:23,572 [INFO] __main__: api started
2025-12-30 18:34:23,602 [INFO] db: DB initialized (create_all done)
2025-12-30 18:34:23,787 [INFO] app.bot: bot started
2025-12-30 18:34:23,787 [INFO] aiogram.dispatcher: Start polling
2025-12-30 18:34:23,788 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 48336.2s
2025-12-30 18:34:23,790 [INFO] db: DB initialized (create_all done)
2025-12-30 18:34:23,932 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 18:34:54,942 [INFO] aiogram.event: Update id=99609554 is handled. Duration 250 ms by bot id=8308846710
2025-12-30 18:35:01,527 [INFO] db: Ignore update from banned user tg_id=1109508382
2025-12-30 18:35:01,528 [INFO] aiogram.event: Update id=99609555 is handled. Duration 16 ms by bot id=8308846710
2025-12-30 18:35:08,175 [INFO] aiogram.event: Update id=99609556 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 18:35:10,272 [INFO] aiogram.event: Update id=99609557 is handled. Duration 156 ms by bot id=8308846710
2025-12-30 18:35:14,558 [INFO] db: Ignore update from banned user tg_id=1109508382
2025-12-30 18:35:14,559 [INFO] aiogram.event: Update id=99609558 is handled. Duration 16 ms by bot id=8308846710
2025-12-30 18:35:23,307 [INFO] db: Ignore update from banned user tg_id=1109508382
2025-12-30 18:35:23,308 [INFO] aiogram.event: Update id=99609559 is handled. Duration 0 ms by bot id=8308846710
2025-12-30 18:36:01,417 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 18:36:01,418 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 18:36:01,418 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-30 18:36:01,418 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-30 18:36:01,419 [INFO] __main__: Shutdown complete
2025-12-30 18:36:01,419 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 19:11:01,985 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 19:11:01,986 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 19:11:01,986 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 19:11:01,986 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 19:11:02,011 [INFO] __main__: api started
2025-12-30 19:11:02,043 [INFO] db: DB initialized (create_all done)
2025-12-30 19:11:02,226 [INFO] app.bot: bot started
2025-12-30 19:11:02,226 [INFO] aiogram.dispatcher: Start polling
2025-12-30 19:11:02,227 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 46137.8s
2025-12-30 19:11:02,230 [INFO] db: DB initialized (create_all done)
2025-12-30 19:11:02,381 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 19:11:02,656 [INFO] aiogram.event: Update id=99609560 is handled. Duration 218 ms by bot id=8308846710
2025-12-30 19:11:25,108 [INFO] aiogram.event: Update id=99609561 is handled. Duration 156 ms by bot id=8308846710
2025-12-30 19:11:27,604 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 96, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-30 19:11:27,702 [INFO] aiogram.event: Update id=99609562 is handled. Duration 281 ms by bot id=8308846710
2025-12-30 19:11:29,043 [INFO] aiogram.event: Update id=99609563 is handled. Duration 156 ms by bot id=8308846710
2025-12-30 19:11:30,023 [INFO] aiogram.event: Update id=99609564 is handled. Duration 188 ms by bot id=8308846710
2025-12-30 19:11:34,531 [INFO] aiogram.event: Update id=99609565 is handled. Duration 125 ms by bot id=8308846710
2025-12-30 19:11:35,589 [INFO] aiogram.event: Update id=99609566 is handled. Duration 125 ms by bot id=8308846710
2025-12-30 19:11:37,418 [INFO] aiogram.event: Update id=99609567 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 19:11:38,250 [INFO] aiogram.event: Update id=99609568 is handled. Duration 235 ms by bot id=8308846710
2025-12-30 19:11:43,018 [INFO] aiogram.event: Update id=99609569 is handled. Duration 156 ms by bot id=8308846710
2025-12-30 19:12:34,861 [INFO] db: Ignore update from banned user tg_id=1109508382
2025-12-30 19:12:34,862 [INFO] aiogram.event: Update id=99609570 is handled. Duration 0 ms by bot id=8308846710
2025-12-30 19:12:36,066 [INFO] db: Ignore update from banned user tg_id=1109508382
2025-12-30 19:12:36,066 [INFO] aiogram.event: Update id=99609571 is handled. Duration 0 ms by bot id=8308846710
2025-12-30 19:12:47,940 [INFO] aiogram.event: Update id=99609572 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 19:13:58,152 [INFO] aiogram.event: Update id=99609573 is handled. Duration 110 ms by bot id=8308846710
2025-12-30 19:14:10,505 [INFO] aiogram.event: Update id=99609574 is handled. Duration 0 ms by bot id=8308846710
2025-12-30 19:14:12,242 [INFO] aiogram.event: Update id=99609575 is handled. Duration 16 ms by bot id=8308846710
2025-12-30 19:14:23,978 [INFO] aiogram.event: Update id=99609576 is handled. Duration 16 ms by bot id=8308846710
2025-12-30 19:14:32,132 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 19:14:32,132 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 19:14:32,133 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 19:14:32,140 [INFO] __main__: Shutdown complete
2025-12-30 19:15:37,674 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 19:15:37,674 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 19:15:37,675 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 19:15:37,675 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 19:15:37,700 [INFO] __main__: api started
2025-12-30 19:15:37,733 [INFO] db: DB initialized (create_all done)
2025-12-30 19:15:37,919 [INFO] app.bot: bot started
2025-12-30 19:15:37,920 [INFO] aiogram.dispatcher: Start polling
2025-12-30 19:15:37,920 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 45862.1s
2025-12-30 19:15:37,922 [INFO] db: DB initialized (create_all done)
2025-12-30 19:15:38,079 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 19:15:41,910 [INFO] aiogram.event: Update id=99609577 is handled. Duration 16 ms by bot id=8308846710
2025-12-30 21:12:03,881 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 21:12:03,881 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 21:12:03,882 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 21:12:03,882 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 21:12:03,925 [INFO] __main__: api started
2025-12-30 21:12:03,973 [INFO] db: DB initialized (create_all done)
2025-12-30 21:12:03,973 [INFO] db: DB initialized (create_all done)
2025-12-30 21:12:04,181 [INFO] app.bot: bot started
2025-12-30 21:12:04,182 [INFO] aiogram.dispatcher: Start polling
2025-12-30 21:12:04,184 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 38875.8s
2025-12-30 21:12:04,359 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:13:16,217 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 21:13:16,218 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:13:16,219 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 21:13:16,232 [INFO] __main__: Shutdown complete
2025-12-30 21:13:22,950 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 21:13:22,951 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 21:13:22,951 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 21:13:22,951 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 21:13:22,978 [INFO] __main__: api started
2025-12-30 21:13:23,048 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 340, in _handle_exception
    raise error
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlite3.OperationalError: index ix_users_username already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 71, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\app\bot.py", line 48, in start_bot
    await init_db(engine)
  File "C:\Python_Projects\dating_bot\db.py", line 92, in init_db
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2467, in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1026, in visit_table
    self.traverse_single(index, create_ok=True)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1063, in visit_index
    CreateIndex(index)._invoke_with(self.connection)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 180, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 340, in _handle_exception
    raise error
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 162, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\core.py", line 132, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiosqlite\core.py", line 115, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_users_username already exists
[SQL: CREATE INDEX ix_users_username ON users (username)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-30 21:13:23,085 [INFO] __main__: Shutdown complete
2025-12-30 21:13:35,370 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 21:13:35,370 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 21:13:35,371 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 21:13:35,371 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 21:13:35,398 [INFO] __main__: api started
2025-12-30 21:13:35,524 [INFO] db: DB initialized (create_all done)
2025-12-30 21:13:35,742 [INFO] app.bot: bot started
2025-12-30 21:13:35,743 [INFO] aiogram.dispatcher: Start polling
2025-12-30 21:13:35,744 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 38784.3s
2025-12-30 21:13:35,961 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:18:07,804 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 21:18:07,805 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-30 21:18:07,805 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-30 21:18:07,979 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:18:07,981 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 21:18:07,981 [INFO] __main__: Shutdown complete
2025-12-30 21:18:12,393 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 21:18:12,394 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 21:18:12,395 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 21:18:12,395 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 21:18:12,428 [INFO] __main__: api started
2025-12-30 21:18:12,465 [INFO] db: DB initialized (create_all done)
2025-12-30 21:18:12,689 [INFO] app.bot: bot started
2025-12-30 21:18:12,690 [INFO] aiogram.dispatcher: Start polling
2025-12-30 21:18:12,692 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 38507.3s
2025-12-30 21:18:12,705 [INFO] db: DB initialized (create_all done)
2025-12-30 21:18:12,861 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:18:54,601 [INFO] aiogram.event: Update id=99609578 is handled. Duration 312 ms by bot id=8308846710
2025-12-30 21:18:58,782 [INFO] aiogram.event: Update id=99609579 is handled. Duration 63 ms by bot id=8308846710
2025-12-30 21:19:01,055 [INFO] aiogram.event: Update id=99609580 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:19:04,326 [INFO] aiogram.event: Update id=99609581 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 21:19:10,863 [INFO] aiogram.event: Update id=99609582 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 21:19:15,138 [INFO] aiogram.event: Update id=99609583 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 21:19:19,444 [INFO] aiogram.event: Update id=99609584 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 21:24:59,618 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 21:24:59,619 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:24:59,619 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 21:24:59,640 [INFO] __main__: Shutdown complete
2025-12-30 21:25:03,617 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 21:25:03,618 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 21:25:03,618 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 21:25:03,618 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 21:25:03,647 [INFO] __main__: api started
2025-12-30 21:25:03,680 [INFO] db: DB initialized (create_all done)
2025-12-30 21:25:03,881 [INFO] app.bot: bot started
2025-12-30 21:25:03,882 [INFO] aiogram.dispatcher: Start polling
2025-12-30 21:25:03,884 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 38096.1s
2025-12-30 21:25:03,895 [INFO] db: DB initialized (create_all done)
2025-12-30 21:25:04,055 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:25:10,751 [INFO] aiogram.event: Update id=99609585 is not handled. Duration 0 ms by bot id=8308846710
2025-12-30 21:25:15,982 [INFO] aiogram.event: Update id=99609586 is handled. Duration 233 ms by bot id=8308846710
2025-12-30 21:25:19,652 [INFO] aiogram.event: Update id=99609587 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:25:24,586 [INFO] aiogram.event: Update id=99609588 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 21:25:26,127 [INFO] aiogram.event: Update id=99609589 is handled. Duration 62 ms by bot id=8308846710
2025-12-30 21:25:27,992 [INFO] aiogram.event: Update id=99609590 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:25:32,044 [INFO] aiogram.event: Update id=99609591 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:25:35,400 [INFO] aiogram.event: Update id=99609592 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:25:38,173 [INFO] aiogram.event: Update id=99609593 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:25:46,072 [INFO] aiogram.event: Update id=99609594 is handled. Duration 171 ms by bot id=8308846710
2025-12-30 21:25:48,723 [INFO] aiogram.event: Update id=99609595 is handled. Duration 125 ms by bot id=8308846710
2025-12-30 21:25:53,120 [INFO] aiogram.event: Update id=99609596 is handled. Duration 141 ms by bot id=8308846710
2025-12-30 21:26:19,451 [INFO] aiogram.event: Update id=99609597 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 21:26:25,978 [INFO] aiogram.event: Update id=99609598 is handled. Duration 141 ms by bot id=8308846710
2025-12-30 21:26:28,620 [INFO] aiogram.event: Update id=99609599 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:26:30,827 [INFO] aiogram.event: Update id=99609600 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 21:26:33,309 [INFO] aiogram.event: Update id=99609601 is handled. Duration 109 ms by bot id=8308846710
2025-12-30 21:26:36,788 [INFO] aiogram.event: Update id=99609602 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:26:38,850 [INFO] aiogram.event: Update id=99609603 is handled. Duration 77 ms by bot id=8308846710
2025-12-30 21:26:54,369 [INFO] aiogram.event: Update id=99609604 is handled. Duration 172 ms by bot id=8308846710
2025-12-30 21:26:55,917 [INFO] aiogram.event: Update id=99609605 is handled. Duration 93 ms by bot id=8308846710
2025-12-30 21:27:03,147 [INFO] aiogram.event: Update id=99609606 is handled. Duration 188 ms by bot id=8308846710
2025-12-30 21:27:08,326 [INFO] aiogram.event: Update id=99609607 is handled. Duration 187 ms by bot id=8308846710
2025-12-30 21:27:10,210 [INFO] aiogram.event: Update id=99609608 is handled. Duration 155 ms by bot id=8308846710
2025-12-30 21:27:17,258 [INFO] aiogram.event: Update id=99609609 is handled. Duration 108 ms by bot id=8308846710
2025-12-30 21:27:22,791 [INFO] aiogram.event: Update id=99609610 is handled. Duration 233 ms by bot id=8308846710
2025-12-30 21:27:24,871 [INFO] aiogram.event: Update id=99609611 is handled. Duration 141 ms by bot id=8308846710
2025-12-30 21:27:26,542 [INFO] aiogram.event: Update id=99609612 is handled. Duration 156 ms by bot id=8308846710
2025-12-30 21:38:36,292 [INFO] db: Ignore update from banned user tg_id=1109508382
2025-12-30 21:38:36,293 [INFO] aiogram.event: Update id=99609613 is handled. Duration 0 ms by bot id=8308846710
2025-12-30 21:38:45,037 [INFO] aiogram.event: Update id=99609614 is handled. Duration 343 ms by bot id=8308846710
2025-12-30 21:40:06,686 [INFO] aiogram.event: Update id=99609615 is handled. Duration 62 ms by bot id=8308846710
2025-12-30 21:40:09,924 [INFO] aiogram.event: Update id=99609616 is handled. Duration 203 ms by bot id=8308846710
2025-12-30 21:40:11,594 [INFO] aiogram.event: Update id=99609617 is handled. Duration 155 ms by bot id=8308846710
2025-12-30 21:40:13,175 [INFO] aiogram.event: Update id=99609618 is handled. Duration 139 ms by bot id=8308846710
2025-12-30 21:40:19,473 [INFO] aiogram.event: Update id=99609619 is handled. Duration 108 ms by bot id=8308846710
2025-12-30 21:42:20,037 [INFO] aiogram.event: Update id=99609620 is handled. Duration 233 ms by bot id=8308846710
2025-12-30 21:42:21,854 [INFO] aiogram.event: Update id=99609621 is handled. Duration 187 ms by bot id=8308846710
2025-12-30 21:42:23,157 [INFO] aiogram.event: Update id=99609622 is handled. Duration 266 ms by bot id=8308846710
2025-12-30 21:42:26,251 [INFO] aiogram.event: Update id=99609623 is handled. Duration 78 ms by bot id=8308846710
2025-12-30 21:43:51,883 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 21:43:51,884 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:43:51,884 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 21:43:51,892 [INFO] __main__: Shutdown complete
2025-12-30 21:54:50,757 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-30 21:54:50,758 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-30 21:54:50,758 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-30 21:54:50,758 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-30 21:54:50,782 [INFO] __main__: api started
2025-12-30 21:54:50,811 [INFO] db: DB initialized (create_all done)
2025-12-30 21:54:50,996 [INFO] app.bot: bot started
2025-12-30 21:54:50,996 [INFO] aiogram.dispatcher: Start polling
2025-12-30 21:54:50,997 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 36309.0s
2025-12-30 21:54:51,008 [INFO] db: DB initialized (create_all done)
2025-12-30 21:54:51,155 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 21:56:06,211 [ERROR] app.api.admin: Failed to notify user tg_id=2000004092
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-30 21:56:07,324 [ERROR] app.api.admin: Failed to notify user tg_id=2000004092
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-30 22:01:00,106 [INFO] aiogram.event: Update id=99609624 is handled. Duration 233 ms by bot id=8308846710
2025-12-30 22:03:35,198 [INFO] aiogram.dispatcher: Polling stopped
2025-12-30 22:03:35,199 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'dating'
2025-12-30 22:03:35,199 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-30 22:03:35,206 [INFO] __main__: Shutdown complete
2025-12-31 00:59:42,182 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 00:59:42,182 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 00:59:42,182 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 00:59:42,182 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 00:59:42,222 [INFO] __main__: api started
2025-12-31 00:59:42,261 [INFO] db: DB initialized (create_all done)
2025-12-31 00:59:42,462 [INFO] app.bot: bot started
2025-12-31 00:59:42,462 [INFO] aiogram.dispatcher: Start polling
2025-12-31 00:59:42,462 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 25217.5s
2025-12-31 00:59:42,483 [INFO] db: DB initialized (create_all done)
2025-12-31 00:59:42,984 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:02:50,331 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:02:50,331 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:02:50,331 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 01:02:50,331 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 01:02:50,331 [INFO] __main__: Shutdown complete
2025-12-31 01:02:50,331 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:05:10,510 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:05:10,510 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:05:10,511 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:05:10,511 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:05:10,530 [INFO] __main__: api started
2025-12-31 01:05:10,572 [INFO] db: DB initialized (create_all done)
2025-12-31 01:05:10,767 [INFO] app.bot: bot started
2025-12-31 01:05:10,767 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:05:10,769 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 24889.2s
2025-12-31 01:05:10,780 [INFO] db: DB initialized (create_all done)
2025-12-31 01:05:10,930 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:06:11,528 [INFO] aiogram.event: Update id=99609625 is not handled. Duration 0 ms by bot id=8308846710
2025-12-31 01:06:16,623 [INFO] aiogram.event: Update id=99609626 is handled. Duration 172 ms by bot id=8308846710
2025-12-31 01:06:19,065 [INFO] aiogram.event: Update id=99609627 is handled. Duration 109 ms by bot id=8308846710
2025-12-31 01:06:25,585 [INFO] aiogram.event: Update id=99609628 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:06:29,359 [INFO] aiogram.event: Update id=99609629 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:06:35,311 [INFO] aiogram.event: Update id=99609630 is handled. Duration 94 ms by bot id=8308846710
2025-12-31 01:06:38,817 [INFO] aiogram.event: Update id=99609631 is handled. Duration 141 ms by bot id=8308846710
2025-12-31 01:06:40,316 [INFO] aiogram.event: Update id=99609632 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:06:42,733 [INFO] aiogram.event: Update id=99609633 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:06:49,783 [INFO] aiogram.event: Update id=99609634 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:06:52,528 [INFO] aiogram.event: Update id=99609635 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 01:08:18,241 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:08:18,242 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:08:18,243 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:08:18,252 [INFO] __main__: Shutdown complete
2025-12-31 01:15:15,221 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:15:15,222 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:15:15,222 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:15:15,222 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:15:15,247 [INFO] __main__: api started
2025-12-31 01:15:15,277 [INFO] db: DB initialized (create_all done)
2025-12-31 01:15:15,464 [INFO] app.bot: bot started
2025-12-31 01:15:15,464 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:15:15,466 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 24284.5s
2025-12-31 01:15:15,476 [INFO] db: DB initialized (create_all done)
2025-12-31 01:15:15,624 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:15:15,866 [INFO] aiogram.event: Update id=99609636 is handled. Duration 203 ms by bot id=8308846710
2025-12-31 01:16:08,451 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 121]   
2025-12-31 01:16:08,451 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 01:16:21,183 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:16:21,183 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:16:21,184 [INFO] __main__: Shutdown complete
2025-12-31 01:16:21,185 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:16:21,373 [ERROR] asyncio: Task was destroyed but it is pending!
task: <Task cancelling name='Task-51' coro=<notify_user() running at C:\Python_Projects\dating_bot\app\api\admin.py:35> wait_for=<Future pending cb=[Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\tasks.py:764]>
2025-12-31 01:16:21,373 [ERROR] asyncio: Task was destroyed but it is pending!
task: <Task cancelling name='Task-58' coro=<notify_user() running at C:\Python_Projects\dating_bot\app\api\admin.py:35> wait_for=<Future pending cb=[Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\tasks.py:764]>
2025-12-31 01:16:25,386 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:16:25,387 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:16:25,387 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:16:25,388 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:16:25,413 [INFO] __main__: api started
2025-12-31 01:16:25,442 [INFO] db: DB initialized (create_all done)
2025-12-31 01:16:25,627 [INFO] app.bot: bot started
2025-12-31 01:16:25,627 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:16:25,629 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 24214.4s
2025-12-31 01:16:25,639 [INFO] db: DB initialized (create_all done)
2025-12-31 01:16:45,914 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:16:46,182 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1283, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\base_events.py", line 1113, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\base_events.py", line 1146, in _create_connection_transport
    await waiter
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\windows_events.py", line 854, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 121]   

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 177, in make_request
    async with session.post(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\client.py", line 725, in _connect_and_send_request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 642, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1209, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1581, in _create_direct_connection
    raise last_exc
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1550, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1291, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  ]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 71, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\app\bot.py", line 70, in start_bot
    await dp.start_polling(bot, cfg=settings)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 591, in start_polling
    await asyncio.gather(*done)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 362, in _polling
    user: User = await bot.me()
                 ^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 357, in me
    self._me = await self.get_me()
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 1797, in get_me
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 184, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  ]
2025-12-31 01:16:46,194 [INFO] __main__: Shutdown complete
2025-12-31 01:17:16,644 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:17:16,644 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:17:16,645 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:17:16,645 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:17:16,671 [INFO] __main__: api started
2025-12-31 01:17:16,702 [INFO] db: DB initialized (create_all done)
2025-12-31 01:17:16,910 [INFO] app.bot: bot started
2025-12-31 01:17:16,910 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:17:16,912 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 24163.1s
2025-12-31 01:17:16,923 [INFO] db: DB initialized (create_all done)
2025-12-31 01:17:17,083 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:17:17,323 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 63, in complaint_start
    await call.answer()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-12-31 01:17:17,334 [INFO] aiogram.event: Update id=99609639 is handled. Duration 202 ms by bot id=8308846710
2025-12-31 01:17:17,365 [INFO] aiogram.event: Update id=99609638 is handled. Duration 235 ms by bot id=8308846710
2025-12-31 01:17:17,386 [INFO] aiogram.event: Update id=99609637 is not handled. Duration 250 ms by bot id=8308846710
2025-12-31 01:17:17,386 [ERROR] aiogram.event: Cause exception while process update id=99609637 by bot id=8308846710
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 63, in complaint_start
    await call.answer()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 63, in complaint_start
    await call.answer()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2025-12-31 01:18:47,379 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-12-31 01:18:47,379 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 01:19:13,530 [INFO] aiogram.dispatcher: Connection established (tryings = 1, bot id = 8308846710)
2025-12-31 01:19:15,522 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:19:15,523 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:19:15,523 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 01:19:15,523 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 01:19:15,524 [INFO] __main__: Shutdown complete
2025-12-31 01:19:15,525 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:19:21,636 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:19:21,636 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:19:21,637 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:19:21,637 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:19:21,664 [INFO] __main__: api started
2025-12-31 01:19:21,695 [INFO] db: DB initialized (create_all done)
2025-12-31 01:19:21,886 [INFO] app.bot: bot started
2025-12-31 01:19:21,886 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:19:21,888 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 24038.1s
2025-12-31 01:19:21,899 [INFO] db: DB initialized (create_all done)
2025-12-31 01:19:22,039 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:19:23,209 [INFO] aiogram.event: Update id=99609640 is handled. Duration 202 ms by bot id=8308846710
2025-12-31 01:19:25,963 [INFO] aiogram.event: Update id=99609641 is handled. Duration 108 ms by bot id=8308846710
2025-12-31 01:19:33,468 [ERROR] app.api.admin: Failed to notify user tg_id=2000010001
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:19:34,057 [ERROR] app.api.admin: Failed to notify user tg_id=2000010001
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:19:36,059 [INFO] aiogram.event: Update id=99609642 is handled. Duration 94 ms by bot id=8308846710
2025-12-31 01:19:38,341 [ERROR] app.api.admin: Failed to notify user tg_id=2000010001
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:19:39,611 [INFO] aiogram.event: Update id=99609643 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:19:41,859 [ERROR] app.api.admin: Failed to notify user tg_id=2000010001
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:19:47,695 [INFO] aiogram.event: Update id=99609644 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:19:54,067 [INFO] db: Ignore update from banned user tg_id=8322042070
2025-12-31 01:19:54,067 [INFO] aiogram.event: Update id=99609645 is handled. Duration 0 ms by bot id=8308846710
2025-12-31 01:19:55,289 [INFO] db: Ignore update from banned user tg_id=8322042070
2025-12-31 01:19:55,290 [INFO] aiogram.event: Update id=99609646 is handled. Duration 14 ms by bot id=8308846710
2025-12-31 01:19:58,506 [INFO] aiogram.event: Update id=99609647 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:20:03,197 [INFO] aiogram.event: Update id=99609648 is handled. Duration 140 ms by bot id=8308846710
2025-12-31 01:20:59,460 [INFO] aiogram.event: Update id=99609649 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:21:03,668 [INFO] aiogram.event: Update id=99609650 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:26:56,584 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:26:56,584 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:26:56,585 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:26:56,585 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:26:56,610 [INFO] __main__: api started
2025-12-31 01:26:56,638 [INFO] db: DB initialized (create_all done)
2025-12-31 01:26:56,822 [INFO] app.bot: bot started
2025-12-31 01:26:56,823 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:26:56,824 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 23583.2s
2025-12-31 01:26:56,834 [INFO] db: DB initialized (create_all done)
2025-12-31 01:26:57,014 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:27:08,966 [INFO] aiogram.event: Update id=99609651 is handled. Duration 186 ms by bot id=8308846710
2025-12-31 01:27:11,091 [INFO] aiogram.event: Update id=99609652 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:27:15,896 [INFO] aiogram.event: Update id=99609653 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:27:19,131 [INFO] aiogram.event: Update id=99609654 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:27:21,084 [INFO] aiogram.event: Update id=99609655 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:27:23,362 [INFO] aiogram.event: Update id=99609656 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 01:27:27,623 [INFO] aiogram.event: Update id=99609657 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 01:27:30,902 [INFO] aiogram.event: Update id=99609658 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 01:27:41,720 [INFO] aiogram.event: Update id=99609659 is handled. Duration 155 ms by bot id=8308846710
2025-12-31 01:27:50,320 [INFO] aiogram.event: Update id=99609660 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 01:27:52,719 [INFO] aiogram.event: Update id=99609661 is handled. Duration 92 ms by bot id=8308846710
2025-12-31 01:27:54,394 [INFO] aiogram.event: Update id=99609662 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:27:59,051 [INFO] aiogram.event: Update id=99609663 is handled. Duration 139 ms by bot id=8308846710
2025-12-31 01:28:01,784 [INFO] aiogram.event: Update id=99609664 is handled. Duration 360 ms by bot id=8308846710
2025-12-31 01:28:07,265 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 96, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:28:07,358 [INFO] aiogram.event: Update id=99609665 is handled. Duration 562 ms by bot id=8308846710
2025-12-31 01:28:41,906 [INFO] aiogram.event: Update id=99609666 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 01:28:43,819 [INFO] aiogram.event: Update id=99609667 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:28:44,859 [INFO] aiogram.event: Update id=99609668 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:28:45,995 [INFO] aiogram.event: Update id=99609669 is handled. Duration 157 ms by bot id=8308846710
2025-12-31 01:28:47,544 [INFO] aiogram.event: Update id=99609670 is handled. Duration 421 ms by bot id=8308846710
2025-12-31 01:28:50,637 [INFO] aiogram.event: Update id=99609671 is handled. Duration 827 ms by bot id=8308846710
2025-12-31 01:28:54,550 [INFO] aiogram.event: Update id=99609672 is handled. Duration 514 ms by bot id=8308846710
2025-12-31 01:29:00,198 [INFO] aiogram.event: Update id=99609673 is handled. Duration 1110 ms by bot id=8308846710
2025-12-31 01:29:04,916 [INFO] aiogram.event: Update id=99609674 is handled. Duration 828 ms by bot id=8308846710
2025-12-31 01:29:08,709 [INFO] aiogram.event: Update id=99609675 is handled. Duration 639 ms by bot id=8308846710
2025-12-31 01:29:09,988 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 96, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:29:10,524 [INFO] aiogram.event: Update id=99609676 is handled. Duration 703 ms by bot id=8308846710
2025-12-31 01:29:11,828 [INFO] aiogram.event: Update id=99609677 is handled. Duration 218 ms by bot id=8308846710
2025-12-31 01:29:13,164 [INFO] aiogram.event: Update id=99609678 is handled. Duration 139 ms by bot id=8308846710
2025-12-31 01:29:56,491 [INFO] aiogram.event: Update id=99609679 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:29:58,043 [INFO] aiogram.event: Update id=99609680 is handled. Duration 546 ms by bot id=8308846710
2025-12-31 01:29:59,899 [INFO] aiogram.event: Update id=99609681 is handled. Duration 672 ms by bot id=8308846710
2025-12-31 01:30:01,622 [INFO] aiogram.event: Update id=99609682 is handled. Duration 500 ms by bot id=8308846710
2025-12-31 01:30:03,853 [INFO] aiogram.event: Update id=99609683 is handled. Duration 843 ms by bot id=8308846710
2025-12-31 01:30:05,149 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 96, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:30:05,799 [INFO] aiogram.event: Update id=99609684 is handled. Duration 796 ms by bot id=8308846710
2025-12-31 01:30:07,024 [INFO] aiogram.event: Update id=99609685 is handled. Duration 485 ms by bot id=8308846710
2025-12-31 01:30:08,202 [INFO] aiogram.event: Update id=99609686 is handled. Duration 452 ms by bot id=8308846710
2025-12-31 01:30:09,054 [INFO] aiogram.event: Update id=99609687 is handled. Duration 500 ms by bot id=8308846710
2025-12-31 01:30:09,963 [INFO] aiogram.event: Update id=99609688 is handled. Duration 514 ms by bot id=8308846710
2025-12-31 01:30:10,745 [INFO] aiogram.event: Update id=99609689 is handled. Duration 422 ms by bot id=8308846710
2025-12-31 01:30:11,795 [INFO] aiogram.event: Update id=99609690 is handled. Duration 656 ms by bot id=8308846710
2025-12-31 01:30:12,765 [INFO] aiogram.event: Update id=99609691 is handled. Duration 531 ms by bot id=8308846710
2025-12-31 01:30:16,707 [INFO] aiogram.event: Update id=99609692 is handled. Duration 468 ms by bot id=8308846710
2025-12-31 01:30:18,180 [INFO] aiogram.event: Update id=99609693 is handled. Duration 578 ms by bot id=8308846710
2025-12-31 01:30:19,100 [INFO] aiogram.event: Update id=99609694 is handled. Duration 452 ms by bot id=8308846710
2025-12-31 01:30:19,968 [INFO] aiogram.event: Update id=99609695 is handled. Duration 500 ms by bot id=8308846710
2025-12-31 01:30:20,897 [INFO] aiogram.event: Update id=99609696 is handled. Duration 610 ms by bot id=8308846710
2025-12-31 01:30:22,915 [INFO] aiogram.event: Update id=99609697 is handled. Duration 656 ms by bot id=8308846710
2025-12-31 01:30:24,015 [INFO] aiogram.event: Update id=99609698 is handled. Duration 672 ms by bot id=8308846710
2025-12-31 01:30:24,934 [INFO] aiogram.event: Update id=99609699 is handled. Duration 516 ms by bot id=8308846710
2025-12-31 01:30:26,123 [INFO] aiogram.event: Update id=99609700 is handled. Duration 828 ms by bot id=8308846710
2025-12-31 01:30:27,398 [INFO] aiogram.event: Update id=99609701 is handled. Duration 813 ms by bot id=8308846710
2025-12-31 01:30:28,409 [INFO] aiogram.event: Update id=99609702 is handled. Duration 625 ms by bot id=8308846710
2025-12-31 01:30:29,502 [INFO] aiogram.event: Update id=99609703 is handled. Duration 687 ms by bot id=8308846710
2025-12-31 01:30:30,382 [INFO] aiogram.event: Update id=99609704 is handled. Duration 468 ms by bot id=8308846710
2025-12-31 01:30:31,502 [INFO] aiogram.event: Update id=99609705 is handled. Duration 516 ms by bot id=8308846710
2025-12-31 01:31:04,507 [INFO] aiogram.event: Update id=99609706 is handled. Duration 625 ms by bot id=8308846710
2025-12-31 01:31:07,068 [INFO] aiogram.event: Update id=99609707 is handled. Duration 609 ms by bot id=8308846710
2025-12-31 01:31:10,067 [INFO] aiogram.event: Update id=99609708 is handled. Duration 141 ms by bot id=8308846710
2025-12-31 01:31:14,093 [INFO] aiogram.event: Update id=99609709 is handled. Duration 639 ms by bot id=8308846710
2025-12-31 01:31:36,236 [INFO] aiogram.event: Update id=99609710 is handled. Duration 500 ms by bot id=8308846710
2025-12-31 01:31:46,104 [INFO] aiogram.event: Update id=99609711 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:32:10,880 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:32:10,881 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:32:10,882 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:32:10,890 [INFO] __main__: Shutdown complete
2025-12-31 01:33:52,427 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:33:52,427 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:33:52,428 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:33:52,428 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:33:52,453 [INFO] __main__: api started
2025-12-31 01:33:52,484 [INFO] db: DB initialized (create_all done)
2025-12-31 01:33:52,672 [INFO] app.bot: bot started
2025-12-31 01:33:52,673 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:33:52,674 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 23167.3s
2025-12-31 01:33:52,685 [INFO] db: DB initialized (create_all done)
2025-12-31 01:33:52,844 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:34:04,235 [INFO] aiogram.event: Update id=99609712 is handled. Duration 171 ms by bot id=8308846710
2025-12-31 01:34:05,892 [INFO] aiogram.event: Update id=99609713 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:34:38,932 [INFO] aiogram.event: Update id=99609714 is handled. Duration 172 ms by bot id=8308846710
2025-12-31 01:34:41,383 [INFO] aiogram.event: Update id=99609715 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:34:42,804 [INFO] aiogram.event: Update id=99609716 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 01:34:45,282 [INFO] aiogram.event: Update id=99609717 is handled. Duration 63 ms by bot id=8308846710
2025-12-31 01:34:49,132 [INFO] aiogram.event: Update id=99609718 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:34:51,239 [INFO] aiogram.event: Update id=99609719 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:35:02,133 [INFO] aiogram.event: Update id=99609720 is handled. Duration 156 ms by bot id=8308846710
2025-12-31 01:35:15,552 [INFO] aiogram.event: Update id=99609721 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 01:35:17,058 [INFO] aiogram.event: Update id=99609722 is handled. Duration 172 ms by bot id=8308846710
2025-12-31 01:35:18,271 [INFO] aiogram.event: Update id=99609723 is handled. Duration 156 ms by bot id=8308846710
2025-12-31 01:35:18,486 [INFO] aiogram.event: Update id=99609724 is handled. Duration 141 ms by bot id=8308846710
2025-12-31 01:35:19,352 [INFO] aiogram.event: Update id=99609725 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 01:35:22,047 [INFO] aiogram.event: Update id=99609726 is handled. Duration 139 ms by bot id=8308846710
2025-12-31 01:35:24,089 [INFO] aiogram.event: Update id=99609727 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:35:25,918 [INFO] aiogram.event: Update id=99609728 is handled. Duration 108 ms by bot id=8308846710
2025-12-31 01:35:27,603 [INFO] aiogram.event: Update id=99609729 is handled. Duration 156 ms by bot id=8308846710
2025-12-31 01:35:29,459 [INFO] aiogram.event: Update id=99609730 is handled. Duration 1000 ms by bot id=8308846710
2025-12-31 01:35:33,666 [INFO] aiogram.event: Update id=99609731 is handled. Duration 687 ms by bot id=8308846710
2025-12-31 01:35:34,008 [INFO] aiogram.event: Update id=99609732 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:35:42,157 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:35:42,158 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:35:42,158 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:35:42,165 [INFO] __main__: Shutdown complete
2025-12-31 01:37:39,387 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:37:39,387 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:37:39,388 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:37:39,388 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:37:39,413 [INFO] __main__: api started
2025-12-31 01:37:39,442 [INFO] db: DB initialized (create_all done)
2025-12-31 01:37:39,628 [INFO] app.bot: bot started
2025-12-31 01:37:39,629 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:37:39,630 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 22940.4s
2025-12-31 01:37:39,641 [INFO] db: DB initialized (create_all done)
2025-12-31 01:37:39,775 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:37:48,859 [INFO] aiogram.event: Update id=99609733 is handled. Duration 671 ms by bot id=8308846710
2025-12-31 01:38:02,373 [INFO] aiogram.event: Update id=99609734 is handled. Duration 141 ms by bot id=8308846710
2025-12-31 01:38:06,787 [INFO] aiogram.event: Update id=99609735 is handled. Duration 453 ms by bot id=8308846710
2025-12-31 01:38:19,252 [INFO] aiogram.event: Update id=99609736 is handled. Duration 407 ms by bot id=8308846710
2025-12-31 01:38:21,534 [INFO] aiogram.event: Update id=99609737 is handled. Duration 781 ms by bot id=8308846710
2025-12-31 01:38:23,200 [INFO] aiogram.event: Update id=99609738 is handled. Duration 610 ms by bot id=8308846710
2025-12-31 01:38:24,610 [INFO] aiogram.event: Update id=99609739 is handled. Duration 531 ms by bot id=8308846710
2025-12-31 01:38:25,886 [INFO] aiogram.event: Update id=99609740 is handled. Duration 422 ms by bot id=8308846710
2025-12-31 01:38:28,135 [INFO] aiogram.event: Update id=99609741 is handled. Duration 608 ms by bot id=8308846710
2025-12-31 01:38:30,858 [INFO] aiogram.event: Update id=99609742 is handled. Duration 437 ms by bot id=8308846710
2025-12-31 01:38:33,409 [INFO] aiogram.event: Update id=99609743 is handled. Duration 516 ms by bot id=8308846710
2025-12-31 01:38:35,586 [INFO] aiogram.event: Update id=99609744 is handled. Duration 500 ms by bot id=8308846710
2025-12-31 01:38:37,721 [INFO] aiogram.event: Update id=99609745 is handled. Duration 811 ms by bot id=8308846710
2025-12-31 01:38:43,278 [INFO] aiogram.event: Update id=99609746 is handled. Duration 781 ms by bot id=8308846710
2025-12-31 01:38:45,981 [INFO] aiogram.event: Update id=99609747 is handled. Duration 531 ms by bot id=8308846710
2025-12-31 01:38:47,807 [INFO] aiogram.event: Update id=99609748 is handled. Duration 844 ms by bot id=8308846710
2025-12-31 01:38:48,389 [INFO] aiogram.event: Update id=99609749 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 01:38:49,743 [INFO] aiogram.event: Update id=99609750 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 01:38:51,576 [INFO] aiogram.event: Update id=99609751 is handled. Duration 610 ms by bot id=8308846710
2025-12-31 01:38:52,774 [INFO] aiogram.event: Update id=99609752 is handled. Duration 391 ms by bot id=8308846710
2025-12-31 01:38:53,865 [INFO] aiogram.event: Update id=99609753 is handled. Duration 218 ms by bot id=8308846710
2025-12-31 01:38:54,778 [INFO] aiogram.event: Update id=99609754 is handled. Duration 141 ms by bot id=8308846710
2025-12-31 01:38:56,569 [INFO] aiogram.event: Update id=99609755 is handled. Duration 140 ms by bot id=8308846710
2025-12-31 01:41:33,425 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:41:33,426 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:41:33,426 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 01:41:33,427 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 01:41:33,427 [INFO] __main__: Shutdown complete
2025-12-31 01:41:33,428 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:42:14,481 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:42:14,481 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:42:14,482 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:42:14,482 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:42:14,507 [INFO] __main__: api started
2025-12-31 01:42:14,535 [INFO] db: DB initialized (create_all done)
2025-12-31 01:42:14,723 [INFO] app.bot: bot started
2025-12-31 01:42:14,723 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:42:14,724 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 22665.3s
2025-12-31 01:42:14,735 [INFO] db: DB initialized (create_all done)
2025-12-31 01:42:14,874 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:45:07,658 [INFO] aiogram.event: Update id=99609756 is handled. Duration 500 ms by bot id=8308846710
2025-12-31 01:45:10,027 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:10,085 [INFO] aiogram.event: Update id=99609757 is not handled. Duration 139 ms by bot id=8308846710
2025-12-31 01:45:10,086 [ERROR] aiogram.event: Cause exception while process update id=99609757 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:12,832 [INFO] aiogram.event: Update id=99609758 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 01:45:13,599 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:13,659 [INFO] aiogram.event: Update id=99609759 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:13,659 [ERROR] aiogram.event: Cause exception while process update id=99609759 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:15,493 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:15,554 [INFO] aiogram.event: Update id=99609760 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:15,554 [ERROR] aiogram.event: Cause exception while process update id=99609760 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:16,360 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:16,422 [INFO] aiogram.event: Update id=99609761 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:16,422 [ERROR] aiogram.event: Cause exception while process update id=99609761 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:16,983 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:17,043 [INFO] aiogram.event: Update id=99609762 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:17,043 [ERROR] aiogram.event: Cause exception while process update id=99609762 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:17,442 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:17,501 [INFO] aiogram.event: Update id=99609763 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:17,501 [ERROR] aiogram.event: Cause exception while process update id=99609763 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:17,856 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:17,914 [INFO] aiogram.event: Update id=99609764 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:17,914 [ERROR] aiogram.event: Cause exception while process update id=99609764 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:21,425 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:45:21,485 [INFO] aiogram.event: Update id=99609765 is not handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:45:21,485 [ERROR] aiogram.event: Cause exception while process update id=99609765 by bot id=8308846710
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 143, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 111, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 124, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 146, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\complaints.py", line 90, in complaint_start
    await call.message.answer(reply_markup=kb)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2025-12-31 01:46:50,716 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:46:50,717 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:46:50,717 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 01:46:50,718 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 01:46:50,718 [INFO] __main__: Shutdown complete
2025-12-31 01:46:50,719 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:46:54,505 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:46:54,505 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:46:54,506 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:46:54,506 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:46:54,535 [INFO] __main__: api started
2025-12-31 01:46:54,566 [INFO] db: DB initialized (create_all done)
2025-12-31 01:46:54,760 [INFO] app.bot: bot started
2025-12-31 01:46:54,761 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:46:54,762 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 22385.2s
2025-12-31 01:46:54,774 [INFO] db: DB initialized (create_all done)
2025-12-31 01:46:54,918 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:46:56,774 [INFO] aiogram.event: Update id=99609766 is handled. Duration 250 ms by bot id=8308846710
2025-12-31 01:46:58,113 [INFO] aiogram.event: Update id=99609767 is handled. Duration 108 ms by bot id=8308846710
2025-12-31 01:46:59,207 [INFO] aiogram.event: Update id=99609768 is handled. Duration 140 ms by bot id=8308846710
2025-12-31 01:47:00,917 [INFO] aiogram.event: Update id=99609769 is handled. Duration 108 ms by bot id=8308846710
2025-12-31 01:47:02,321 [INFO] aiogram.event: Update id=99609770 is handled. Duration 452 ms by bot id=8308846710
2025-12-31 01:47:03,496 [INFO] aiogram.event: Update id=99609771 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:47:06,057 [INFO] aiogram.event: Update id=99609772 is handled. Duration 156 ms by bot id=8308846710
2025-12-31 01:47:10,049 [INFO] aiogram.event: Update id=99609773 is handled. Duration 108 ms by bot id=8308846710
2025-12-31 01:47:13,181 [INFO] aiogram.event: Update id=99609774 is handled. Duration 484 ms by bot id=8308846710
2025-12-31 01:47:33,986 [INFO] aiogram.event: Update id=99609775 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 01:47:36,089 [INFO] aiogram.event: Update id=99609776 is handled. Duration 139 ms by bot id=8308846710
2025-12-31 01:47:38,845 [INFO] aiogram.event: Update id=99609777 is handled. Duration 108 ms by bot id=8308846710
2025-12-31 01:47:44,778 [INFO] aiogram.event: Update id=99609778 is handled. Duration 766 ms by bot id=8308846710
2025-12-31 01:49:15,288 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:49:15,288 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:49:15,289 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:49:15,296 [INFO] __main__: Shutdown complete
2025-12-31 01:50:33,907 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 01:50:33,908 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 01:50:33,908 [INFO] __main__: DB path: C:\Python_Projects\dating_bot\data\db.sqlite3
2025-12-31 01:50:33,909 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 01:50:33,933 [INFO] __main__: api started
2025-12-31 01:50:33,963 [INFO] db: DB initialized (create_all done)
2025-12-31 01:50:34,149 [INFO] app.bot: bot started
2025-12-31 01:50:34,149 [INFO] aiogram.dispatcher: Start polling
2025-12-31 01:50:34,151 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 22165.8s
2025-12-31 01:50:34,161 [INFO] db: DB initialized (create_all done)
2025-12-31 01:50:34,316 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:50:38,415 [ERROR] app.api.admin: Failed to notify user tg_id=8322042082
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 31, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 01:51:10,999 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 01:51:11,000 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 01:51:11,000 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 01:51:11,008 [INFO] __main__: Shutdown complete
2025-12-31 02:15:24,544 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 02:15:24,544 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 02:15:24,545 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 02:15:24,545 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 02:15:24,580 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 68, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\run.py", line 39, in start_api
    app = create_api(settings)
          ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\app\api\__init__.py", line 14, in create_api
    engine = create_engine(settings.database_url)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\app\db.py", line 12, in create_engine
    return create_async_engine(database_url or settings.database_url, echo=False, future=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\create.py", line 617, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1094, in import_dbapi
    return AsyncAdapt_asyncpg_dbapi(__import__("asyncpg"))
                                    ^^^^^^^^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'asyncpg'
2025-12-31 02:15:24,585 [INFO] __main__: Shutdown complete
2025-12-31 02:18:23,964 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 02:18:23,965 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 02:18:23,965 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 02:18:23,965 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 02:18:24,049 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 68, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\run.py", line 39, in start_api
    app = create_api(settings)
  File "C:\Python_Projects\dating_bot\app\api\__init__.py", line 14, in create_api
    engine = create_engine(settings.database_url)
  File "C:\Python_Projects\dating_bot\app\db.py", line 14, in create_engine
    return create_async_engine(database_url or settings.database_url, echo=False, future=True)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\sqlalchemy\engine\create.py", line 617, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1094, in import_dbapi
    return AsyncAdapt_asyncpg_dbapi(__import__("asyncpg"))
ModuleNotFoundError: No module named 'asyncpg'
2025-12-31 02:18:24,096 [INFO] __main__: Shutdown complete
2025-12-31 02:19:19,497 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 02:19:19,497 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 02:19:19,498 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 02:19:19,498 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 02:19:19,644 [INFO] __main__: api started
2025-12-31 02:19:19,857 [INFO] db: DB initialized (create_all done)
2025-12-31 02:19:19,874 [INFO] app.bot: bot started
2025-12-31 02:19:19,875 [INFO] aiogram.dispatcher: Start polling
2025-12-31 02:19:19,885 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 20440.1s
2025-12-31 02:19:20,043 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 02:20:39,405 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 02:20:39,405 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 02:20:39,714 [INFO] __main__: Shutdown complete
2025-12-31 02:20:39,715 [ERROR] asyncio: Task was destroyed but it is pending!
task: <Task pending name='bot' coro=<start_bot() running at C:\Python_Projects\dating_bot\app\bot.py:70> wait_for=<_GatheringFuture pending cb=[<TaskWakeupMethWrapper object at 0x0000022CF5FBCB50>()]> cb=[_gather.<locals>._done_callback() at C:\Users\JK\AppData\Local\Programs\Python\Python39\lib\asyncio\tasks.py:767, _gather.<locals>._done_callback() at C:\Users\JK\AppData\Local\Programs\Python\Python39\lib\asyncio\tasks.py:767]>
2025-12-31 02:20:49,714 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 02:20:49,715 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 02:20:49,715 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 02:20:49,715 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 02:20:49,816 [INFO] __main__: api started
2025-12-31 02:20:49,920 [INFO] db: DB initialized (create_all done)
2025-12-31 02:20:49,928 [INFO] app.bot: bot started
2025-12-31 02:20:49,928 [INFO] aiogram.dispatcher: Start polling
2025-12-31 02:20:49,931 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 20350.1s
2025-12-31 02:20:49,933 [INFO] db: DB initialized (create_all done)
2025-12-31 02:20:50,067 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 02:21:10,071 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 02:21:10,071 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 02:21:10,072 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 02:22:41,939 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 02:22:41,939 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 02:22:41,939 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 02:22:41,939 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 02:22:42,043 [INFO] __main__: api started
2025-12-31 02:22:42,147 [INFO] db: DB initialized (create_all done)
2025-12-31 02:22:42,155 [INFO] app.bot: bot started
2025-12-31 02:22:42,156 [INFO] aiogram.dispatcher: Start polling
2025-12-31 02:22:42,158 [INFO] services.daily_reset: Daily reset scheduled at 2025-12-31T08:00:00+02:00 (Europe/Kyiv), sleep 20237.8s
2025-12-31 02:22:42,158 [INFO] db: DB initialized (create_all done)
2025-12-31 02:22:42,294 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 02:23:45,634 [INFO] aiogram.event: Update id=99609780 is handled. Duration 172 ms by bot id=8308846710
2025-12-31 02:23:47,346 [INFO] aiogram.event: Update id=99609781 is handled. Duration 61 ms by bot id=8308846710
2025-12-31 02:23:51,731 [INFO] aiogram.event: Update id=99609782 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 02:23:54,687 [INFO] aiogram.event: Update id=99609783 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 02:23:56,409 [INFO] aiogram.event: Update id=99609784 is handled. Duration 63 ms by bot id=8308846710
2025-12-31 02:23:58,246 [INFO] aiogram.event: Update id=99609785 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 02:24:03,485 [INFO] aiogram.event: Update id=99609786 is handled. Duration 77 ms by bot id=8308846710
2025-12-31 02:24:05,386 [INFO] aiogram.event: Update id=99609787 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 02:24:13,575 [INFO] aiogram.event: Update id=99609788 is handled. Duration 140 ms by bot id=8308846710
2025-12-31 02:24:16,112 [INFO] aiogram.event: Update id=99609789 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 02:24:17,361 [INFO] aiogram.event: Update id=99609790 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 02:24:18,581 [INFO] aiogram.event: Update id=99609791 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 02:24:19,444 [INFO] aiogram.event: Update id=99609792 is handled. Duration 93 ms by bot id=8308846710
2025-12-31 02:24:21,427 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 96, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 02:24:21,552 [INFO] aiogram.event: Update id=99609793 is handled. Duration 281 ms by bot id=8308846710
2025-12-31 02:24:23,439 [INFO] aiogram.event: Update id=99609794 is handled. Duration 141 ms by bot id=8308846710
2025-12-31 02:24:25,085 [INFO] aiogram.event: Update id=99609795 is handled. Duration 483 ms by bot id=8308846710
2025-12-31 02:24:26,974 [INFO] aiogram.event: Update id=99609796 is handled. Duration 687 ms by bot id=8308846710
2025-12-31 02:24:27,988 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 96, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
  File "C:\Python_Projects\dating_bot\.venv\lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-12-31 02:24:28,973 [INFO] aiogram.event: Update id=99609797 is handled. Duration 1155 ms by bot id=8308846710
2025-12-31 02:24:30,839 [INFO] aiogram.event: Update id=99609798 is handled. Duration 530 ms by bot id=8308846710
2025-12-31 02:24:31,839 [INFO] aiogram.event: Update id=99609799 is handled. Duration 139 ms by bot id=8308846710
2025-12-31 02:24:34,015 [INFO] aiogram.event: Update id=99609800 is handled. Duration 125 ms by bot id=8308846710
2025-12-31 02:24:37,932 [INFO] aiogram.event: Update id=99609801 is handled. Duration 109 ms by bot id=8308846710
2025-12-31 02:25:17,208 [INFO] aiogram.event: Update id=99609802 is handled. Duration 62 ms by bot id=8308846710
2025-12-31 02:25:23,657 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 02:25:23,658 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 02:25:23,658 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 16:13:40,384 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 16:13:40,385 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 16:13:40,385 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 16:13:40,385 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 16:13:40,419 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 68, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\run.py", line 39, in start_api
    app = create_api(settings)
          ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\app\api\__init__.py", line 14, in create_api
    engine = create_engine(settings.database_url)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\app\db.py", line 14, in create_engine
    return create_async_engine(database_url or settings.database_url, echo=False, future=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\create.py", line 617, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1094, in import_dbapi
    return AsyncAdapt_asyncpg_dbapi(__import__("asyncpg"))
                                    ^^^^^^^^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'asyncpg'
2025-12-31 16:13:40,434 [INFO] __main__: Shutdown complete
2025-12-31 16:15:24,731 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 16:15:24,731 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 16:15:24,731 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 16:15:24,731 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 16:15:24,810 [INFO] __main__: api started
2025-12-31 16:15:24,952 [INFO] db: DB initialized (create_all done)
2025-12-31 16:15:25,162 [INFO] app.bot: bot started
2025-12-31 16:15:25,162 [INFO] aiogram.dispatcher: Start polling
2025-12-31 16:15:25,164 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 56674.8s
2025-12-31 16:15:25,165 [INFO] db: DB initialized (create_all done)
2025-12-31 16:15:25,330 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 16:18:42,958 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 16:18:42,958 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 16:18:42,959 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 16:18:42,959 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 16:18:42,988 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 68, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\run.py", line 39, in start_api
    app = create_api(settings)
          ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\app\api\__init__.py", line 14, in create_api
    engine = create_engine(settings.database_url)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\app\db.py", line 14, in create_engine
    return create_async_engine(database_url or settings.database_url, echo=False, future=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\create.py", line 617, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1094, in import_dbapi
    return AsyncAdapt_asyncpg_dbapi(__import__("asyncpg"))
                                    ^^^^^^^^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'asyncpg'
2025-12-31 16:18:42,992 [INFO] __main__: Shutdown complete
2025-12-31 16:18:54,246 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 16:18:54,247 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 16:18:54,247 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 16:18:54,247 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 16:18:54,306 [INFO] __main__: api started
2025-12-31 16:18:54,466 [INFO] db: DB initialized (create_all done)
2025-12-31 16:18:54,466 [INFO] db: DB initialized (create_all done)
2025-12-31 16:18:54,675 [INFO] app.bot: bot started
2025-12-31 16:18:54,676 [INFO] aiogram.dispatcher: Start polling
2025-12-31 16:18:54,678 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 56465.3s
2025-12-31 16:18:54,825 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 16:29:21,557 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 16:29:21,557 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 16:29:21,557 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 16:29:21,557 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 16:29:21,557 [INFO] __main__: Shutdown complete
2025-12-31 16:29:21,557 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 16:29:25,014 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 16:29:25,014 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 16:29:25,014 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 16:29:25,014 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 16:29:25,070 [INFO] __main__: api started
2025-12-31 16:29:25,232 [INFO] db: DB initialized (create_all done)
2025-12-31 16:29:25,232 [INFO] db: DB initialized (create_all done)
2025-12-31 16:29:25,420 [INFO] app.bot: bot started
2025-12-31 16:29:25,420 [INFO] aiogram.dispatcher: Start polling
2025-12-31 16:29:25,420 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 55834.6s
2025-12-31 16:29:25,571 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 16:32:55,523 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 16:32:55,523 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 16:32:55,524 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 16:32:55,524 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 16:32:55,526 [INFO] __main__: Shutdown complete
2025-12-31 16:32:55,527 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 16:33:53,849 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 16:33:53,849 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 16:33:53,849 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 16:33:53,849 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 16:33:53,916 [INFO] __main__: api started
2025-12-31 16:33:54,080 [INFO] db: DB initialized (create_all done)
2025-12-31 16:33:54,265 [INFO] app.bot: bot started
2025-12-31 16:33:54,265 [INFO] aiogram.dispatcher: Start polling
2025-12-31 16:33:54,265 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 55565.7s
2025-12-31 16:33:54,269 [INFO] db: DB initialized (create_all done)
2025-12-31 16:33:54,420 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:25:01,532 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-12-31 18:25:01,986 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 18:25:03,007 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
2025-12-31 18:25:03,007 [WARNING] aiogram.dispatcher: Sleep for 1.299193 seconds and try again... (tryings = 1, bot id = 8308846710)
2025-12-31 18:25:14,448 [INFO] aiogram.dispatcher: Connection established (tryings = 2, bot id = 8308846710)
2025-12-31 18:25:19,991 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 18:25:20,001 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 18:25:20,001 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 18:25:20,001 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 18:25:20,003 [INFO] __main__: Shutdown complete
2025-12-31 18:25:20,003 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:25:23,739 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 18:25:23,739 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 18:25:23,739 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 18:25:23,739 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 18:25:23,834 [INFO] __main__: api started
2025-12-31 18:25:24,005 [INFO] db: DB initialized (create_all done)
2025-12-31 18:25:24,193 [INFO] app.bot: bot started
2025-12-31 18:25:24,193 [INFO] aiogram.dispatcher: Start polling
2025-12-31 18:25:24,193 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 48875.8s
2025-12-31 18:25:24,193 [INFO] db: DB initialized (create_all done)
2025-12-31 18:25:24,346 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:25:29,596 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:25:29,617 [INFO] aiogram.event: Update id=99609803 is not handled. Duration 62 ms by bot id=8308846710
2025-12-31 18:25:29,617 [ERROR] aiogram.event: Cause exception while process update id=99609803 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:25:31,407 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:25:31,413 [INFO] aiogram.event: Update id=99609804 is not handled. Duration 15 ms by bot id=8308846710
2025-12-31 18:25:31,414 [ERROR] aiogram.event: Cause exception while process update id=99609804 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:25:37,028 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:25:37,034 [INFO] aiogram.event: Update id=99609805 is not handled. Duration 0 ms by bot id=8308846710
2025-12-31 18:25:37,035 [ERROR] aiogram.event: Cause exception while process update id=99609805 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:25:38,501 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:25:38,508 [INFO] aiogram.event: Update id=99609806 is not handled. Duration 15 ms by bot id=8308846710
2025-12-31 18:25:38,508 [ERROR] aiogram.event: Cause exception while process update id=99609806 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:26:35,792 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 18:26:35,792 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 18:26:35,792 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 18:26:35,792 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 18:26:35,863 [INFO] __main__: api started
2025-12-31 18:26:36,023 [INFO] db: DB initialized (create_all done)
2025-12-31 18:26:36,023 [INFO] db: DB initialized (create_all done)
2025-12-31 18:26:36,213 [INFO] app.bot: bot started
2025-12-31 18:26:36,213 [INFO] aiogram.dispatcher: Start polling
2025-12-31 18:26:36,213 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 48803.8s
2025-12-31 18:26:36,352 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:26:40,382 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:26:40,395 [INFO] aiogram.event: Update id=99609807 is not handled. Duration 15 ms by bot id=8308846710
2025-12-31 18:26:40,396 [ERROR] aiogram.event: Cause exception while process update id=99609807 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:28:03,917 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 18:28:03,917 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 18:28:03,917 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 18:28:03,917 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 18:28:03,917 [INFO] __main__: Shutdown complete
2025-12-31 18:28:03,917 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:28:07,221 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 18:28:07,221 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 18:28:07,236 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 18:28:07,236 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 18:28:07,290 [INFO] __main__: api started
2025-12-31 18:28:07,450 [INFO] db: DB initialized (create_all done)
2025-12-31 18:28:07,450 [INFO] db: DB initialized (create_all done)
2025-12-31 18:28:07,644 [INFO] app.bot: bot started
2025-12-31 18:28:07,644 [INFO] aiogram.dispatcher: Start polling
2025-12-31 18:28:07,644 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 48712.4s
2025-12-31 18:28:07,784 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:28:14,922 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:28:14,935 [INFO] aiogram.event: Update id=99609808 is not handled. Duration 16 ms by bot id=8308846710
2025-12-31 18:28:14,935 [ERROR] aiogram.event: Cause exception while process update id=99609808 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:29:28,093 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 18:29:28,093 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 18:29:28,093 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 18:29:28,093 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 18:29:28,093 [INFO] __main__: Shutdown complete
2025-12-31 18:29:28,093 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:29:31,512 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 18:29:31,512 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 18:29:31,512 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 18:29:31,512 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 18:29:31,580 [INFO] __main__: api started
2025-12-31 18:29:31,763 [INFO] db: DB initialized (create_all done)
2025-12-31 18:29:31,933 [INFO] app.bot: bot started
2025-12-31 18:29:31,933 [INFO] aiogram.dispatcher: Start polling
2025-12-31 18:29:31,949 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 48628.1s
2025-12-31 18:29:31,949 [INFO] db: DB initialized (create_all done)
2025-12-31 18:29:32,085 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:29:33,431 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:29:33,445 [INFO] aiogram.event: Update id=99609809 is not handled. Duration 32 ms by bot id=8308846710
2025-12-31 18:29:33,445 [ERROR] aiogram.event: Cause exception while process update id=99609809 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:29:36,728 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 18:29:36,734 [INFO] aiogram.event: Update id=99609810 is not handled. Duration 0 ms by bot id=8308846710
2025-12-31 18:29:36,735 [ERROR] aiogram.event: Cause exception while process update id=99609810 by bot id=8308846710
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 65, in __call__
    res = await session.execute(select(User).where(User.tg_id == from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>:  users.region  
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncpg.exceptions.InFailedSQLTransactionError:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>:   ,      
[SQL: SELECT users.id, users.tg_id, users.username, users.first_name, users.last_name, users.is_banned, users.name, users.age, users.age_filter_enabled, users.gender, users.looking_for, users.city, users.region, users.district, users.settlement, users.settlement_type, users.search_scope, users.about, users.search_global, users.active, users.created_at 
FROM users 
WHERE users.tg_id = $1::BIGINT]
[parameters: (8322042070,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-12-31 18:29:37,843 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 18:29:37,843 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:29:37,843 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 18:29:37,853 [INFO] __main__: Shutdown complete
2025-12-31 18:30:38,043 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 18:30:38,043 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 18:30:38,043 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 18:30:38,043 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 18:30:38,104 [INFO] __main__: api started
2025-12-31 18:30:38,277 [INFO] db: DB initialized (create_all done)
2025-12-31 18:30:38,282 [INFO] db: DB initialized (create_all done)
2025-12-31 18:30:38,466 [INFO] app.bot: bot started
2025-12-31 18:30:38,466 [INFO] aiogram.dispatcher: Start polling
2025-12-31 18:30:38,466 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 48561.5s
2025-12-31 18:30:38,609 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 18:30:52,851 [INFO] aiogram.event: Update id=99609811 is handled. Duration 187 ms by bot id=8308846710
2025-12-31 18:30:56,994 [INFO] aiogram.event: Update id=99609812 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 18:30:59,538 [INFO] aiogram.event: Update id=99609813 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 18:31:01,233 [INFO] aiogram.event: Update id=99609814 is handled. Duration 78 ms by bot id=8308846710
2025-12-31 18:31:02,870 [INFO] aiogram.event: Update id=99609815 is handled. Duration 94 ms by bot id=8308846710
2025-12-31 18:31:17,209 [INFO] aiogram.event: Update id=99609816 is handled. Duration 171 ms by bot id=8308846710
2025-12-31 19:20:49,614 [INFO] aiogram.dispatcher: Polling stopped
2025-12-31 19:20:49,614 [INFO] __main__: Shutdown requested, cancelling services...
2025-12-31 19:20:49,614 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-12-31 19:20:49,614 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2025-12-31 19:20:49,621 [INFO] __main__: Shutdown complete
2025-12-31 19:20:49,621 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2025-12-31 19:30:03,968 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2025-12-31 19:30:03,968 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2025-12-31 19:30:03,972 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2025-12-31 19:30:03,972 [INFO] __main__: API listening: http://127.0.0.1:8000
2025-12-31 19:30:04,033 [INFO] __main__: api started
2025-12-31 19:30:04,206 [INFO] db: DB initialized (create_all done)
2025-12-31 19:30:04,211 [INFO] db: DB initialized (create_all done)
2025-12-31 19:30:04,395 [INFO] app.bot: bot started
2025-12-31 19:30:04,395 [INFO] aiogram.dispatcher: Start polling
2025-12-31 19:30:04,395 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-01T08:00:00+02:00 (Europe/Kyiv), sleep 44995.6s
2025-12-31 19:30:04,545 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 14:37:53,499 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 14:37:53,499 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 14:37:53,499 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 14:37:53,499 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 14:37:53,607 [INFO] __main__: api started
2026-01-01 14:37:53,828 [INFO] db: DB initialized (create_all done)
2026-01-01 14:37:54,034 [INFO] app.bot: bot started
2026-01-01 14:37:54,034 [INFO] aiogram.dispatcher: Start polling
2026-01-01 14:37:54,034 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 62526.0s
2026-01-01 14:37:54,217 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 14:39:28,040 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 14:39:28,199 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 14:39:28,201 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 14:39:28,202 [INFO] __main__: Shutdown complete
2026-01-01 14:39:33,019 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 14:39:33,019 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 14:39:33,019 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 14:39:33,019 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 14:39:33,092 [INFO] __main__: api started
2026-01-01 14:39:33,237 [INFO] db: DB initialized (create_all done)
2026-01-01 14:39:33,237 [ERROR] __main__: Service crashed, stopping services...
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError:       "pg_type_typname_nsp_index"
DETAIL:   "(typname, typnamespace)=(ua_locations, 2200)"  .

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>:       "pg_type_typname_nsp_index"
DETAIL:   "(typname, typnamespace)=(ua_locations, 2200)"  .

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\run.py", line 68, in main
    await asyncio.gather(*tasks)
  File "C:\Python_Projects\dating_bot\app\bot.py", line 48, in start_bot
    await init_db(engine)
  File "C:\Python_Projects\dating_bot\db.py", line 31, in init_db
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 2467, in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>:       "pg_type_typname_nsp_index"
DETAIL:   "(typname, typnamespace)=(ua_locations, 2200)"  .
[SQL: 
CREATE TABLE ua_locations (
	id INTEGER NOT NULL, 
	level1 VARCHAR(32), 
	level2 VARCHAR(32), 
	level3 VARCHAR(32), 
	level4 VARCHAR(32), 
	level_extra VARCHAR(32), 
	category VARCHAR(2), 
	name VARCHAR(256) NOT NULL, 
	PRIMARY KEY (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-01-01 14:39:33,261 [INFO] __main__: Shutdown complete
2026-01-01 14:41:58,536 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 14:41:58,536 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 14:41:58,536 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 14:41:58,536 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 14:41:58,613 [INFO] __main__: api started
2026-01-01 14:41:58,737 [INFO] db: DB initialized (create_all done)
2026-01-01 14:41:58,924 [INFO] app.bot: bot started
2026-01-01 14:41:58,924 [INFO] aiogram.dispatcher: Start polling
2026-01-01 14:41:58,924 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 62281.1s
2026-01-01 14:41:58,941 [INFO] db: DB initialized (create_all done)
2026-01-01 14:41:59,080 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 14:42:47,791 [INFO] aiogram.event: Update id=99609817 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 14:42:51,722 [INFO] aiogram.event: Update id=99609818 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 14:43:01,119 [INFO] aiogram.event: Update id=99609819 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 14:43:03,260 [INFO] aiogram.event: Update id=99609820 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 14:43:04,551 [INFO] aiogram.event: Update id=99609821 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 14:43:38,129 [INFO] aiogram.event: Update id=99609822 is handled. Duration 281 ms by bot id=8308846710
2026-01-01 14:43:44,448 [INFO] aiogram.event: Update id=99609823 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 14:43:52,623 [INFO] aiogram.event: Update id=99609824 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 14:44:01,579 [INFO] aiogram.event: Update id=99609825 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 14:44:08,753 [INFO] aiogram.event: Update id=99609826 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 14:44:20,876 [INFO] aiogram.event: Update id=99609827 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 14:44:23,699 [INFO] aiogram.event: Update id=99609828 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 14:44:45,415 [INFO] aiogram.event: Update id=99609829 is handled. Duration 250 ms by bot id=8308846710
2026-01-01 14:44:47,326 [INFO] aiogram.event: Update id=99609830 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 14:44:50,533 [INFO] aiogram.event: Update id=99609831 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 14:44:52,049 [INFO] aiogram.event: Update id=99609832 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 14:44:53,507 [INFO] aiogram.event: Update id=99609833 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 14:44:54,720 [INFO] aiogram.event: Update id=99609834 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 14:45:00,703 [INFO] aiogram.event: Update id=99609835 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 14:49:53,969 [INFO] aiogram.event: Update id=99609836 is not handled. Duration 16 ms by bot id=8308846710
2026-01-01 14:49:59,919 [INFO] aiogram.event: Update id=99609837 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 14:50:06,125 [INFO] aiogram.event: Update id=99609838 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 14:50:10,930 [INFO] aiogram.event: Update id=99609839 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 14:50:12,839 [INFO] aiogram.event: Update id=99609840 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 14:50:13,799 [INFO] aiogram.event: Update id=99609841 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 14:50:18,544 [INFO] aiogram.event: Update id=99609842 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 14:50:21,751 [INFO] aiogram.event: Update id=99609843 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 14:50:41,699 [INFO] aiogram.event: Update id=99609844 is handled. Duration 235 ms by bot id=8308846710
2026-01-01 14:51:15,824 [INFO] aiogram.event: Update id=99609845 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 14:51:17,727 [INFO] aiogram.event: Update id=99609846 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 14:51:21,238 [INFO] aiogram.event: Update id=99609847 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 14:51:23,648 [INFO] aiogram.event: Update id=99609848 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 14:51:27,474 [INFO] aiogram.event: Update id=99609849 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 14:51:29,789 [INFO] aiogram.event: Update id=99609850 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 14:55:20,016 [INFO] aiogram.event: Update id=99609851 is handled. Duration 202 ms by bot id=8308846710
2026-01-01 14:55:26,090 [INFO] aiogram.event: Update id=99609852 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 14:55:28,842 [INFO] aiogram.event: Update id=99609853 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 14:55:31,591 [INFO] aiogram.event: Update id=99609854 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 14:55:34,325 [INFO] aiogram.event: Update id=99609855 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 14:55:35,977 [INFO] aiogram.event: Update id=99609856 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 14:55:41,010 [INFO] aiogram.event: Update id=99609857 is handled. Duration 250 ms by bot id=8308846710
2026-01-01 14:56:14,220 [INFO] aiogram.event: Update id=99609858 is handled. Duration 19500 ms by bot id=8308846710
2026-01-01 14:56:14,509 [INFO] aiogram.event: Update id=99609859 is handled. Duration 9984 ms by bot id=8308846710
2026-01-01 14:59:40,921 [INFO] aiogram.event: Update id=99609860 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 14:59:42,823 [INFO] aiogram.event: Update id=99609861 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 14:59:46,510 [INFO] aiogram.event: Update id=99609862 is handled. Duration 281 ms by bot id=8308846710
2026-01-01 14:59:48,357 [INFO] aiogram.event: Update id=99609863 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 14:59:56,428 [INFO] aiogram.event: Update id=99609864 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 14:59:59,719 [INFO] aiogram.event: Update id=99609865 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 15:00:06,080 [INFO] aiogram.event: Update id=99609866 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 15:01:04,970 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:01:04,970 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:01:04,971 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:01:04,975 [INFO] __main__: Shutdown complete
2026-01-01 15:03:11,783 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:03:11,783 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:03:11,783 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:03:11,783 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:03:11,855 [INFO] __main__: api started
2026-01-01 15:03:11,983 [INFO] db: DB initialized (create_all done)
2026-01-01 15:03:11,986 [INFO] db: DB initialized (create_all done)
2026-01-01 15:03:12,185 [INFO] app.bot: bot started
2026-01-01 15:03:12,186 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:03:12,187 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 61007.8s
2026-01-01 15:03:12,335 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:03:21,430 [INFO] aiogram.event: Update id=99609867 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 15:03:22,799 [INFO] aiogram.event: Update id=99609868 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:03:27,037 [INFO] aiogram.event: Update id=99609869 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 15:03:29,249 [INFO] aiogram.event: Update id=99609870 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:03:38,727 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:03:38,728 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:03:38,730 [INFO] __main__: Shutdown complete
2026-01-01 15:03:38,731 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:07:54,841 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:07:54,841 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:07:54,841 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:07:54,841 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:07:54,915 [INFO] __main__: api started
2026-01-01 15:07:55,045 [INFO] db: DB initialized (create_all done)
2026-01-01 15:07:55,047 [INFO] db: DB initialized (create_all done)
2026-01-01 15:07:55,244 [INFO] app.bot: bot started
2026-01-01 15:07:55,245 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:07:55,246 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 60724.8s
2026-01-01 15:07:55,398 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:08:10,228 [INFO] aiogram.event: Update id=99609871 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 15:08:11,412 [INFO] aiogram.event: Update id=99609872 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:08:14,668 [INFO] aiogram.event: Update id=99609873 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:08:17,741 [INFO] aiogram.event: Update id=99609874 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:08:19,693 [INFO] aiogram.event: Update id=99609875 is handled. Duration 172 ms by bot id=8308846710
2026-01-01 15:08:21,539 [INFO] aiogram.event: Update id=99609876 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 15:09:14,401 [INFO] aiogram.event: Update id=99609877 is handled. Duration 218 ms by bot id=8308846710
2026-01-01 15:09:57,996 [INFO] aiogram.event: Update id=99609878 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 15:14:10,722 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:14:10,723 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:14:10,725 [INFO] __main__: Shutdown complete
2026-01-01 15:14:10,726 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:14:15,524 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:14:15,525 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:14:15,525 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:14:15,525 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:14:15,601 [INFO] __main__: api started
2026-01-01 15:14:15,735 [INFO] db: DB initialized (create_all done)
2026-01-01 15:14:15,978 [INFO] app.bot: bot started
2026-01-01 15:14:15,979 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:14:15,980 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 60344.0s
2026-01-01 15:14:15,983 [INFO] db: DB initialized (create_all done)
2026-01-01 15:14:16,161 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:15:35,430 [INFO] aiogram.event: Update id=99609879 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 15:15:39,168 [INFO] aiogram.event: Update id=99609880 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:15:41,661 [INFO] aiogram.event: Update id=99609881 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:15:44,484 [INFO] aiogram.event: Update id=99609882 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:15:46,089 [INFO] aiogram.event: Update id=99609883 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 15:15:50,665 [INFO] aiogram.event: Update id=99609884 is handled. Duration 217 ms by bot id=8308846710
2026-01-01 15:15:58,523 [INFO] aiogram.event: Update id=99609885 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 15:16:01,106 [INFO] aiogram.event: Update id=99609886 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 15:16:03,920 [INFO] aiogram.event: Update id=99609887 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:16:05,746 [INFO] aiogram.event: Update id=99609888 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 15:16:08,802 [INFO] aiogram.event: Update id=99609889 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 15:16:09,977 [INFO] aiogram.event: Update id=99609890 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 15:16:28,014 [INFO] aiogram.event: Update id=99609891 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 15:16:30,055 [INFO] aiogram.event: Update id=99609892 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:16:32,021 [INFO] aiogram.event: Update id=99609893 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:16:34,442 [INFO] aiogram.event: Update id=99609894 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:16:35,234 [INFO] aiogram.event: Update id=99609895 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:16:43,836 [INFO] aiogram.event: Update id=99609896 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 15:16:50,161 [INFO] aiogram.event: Update id=99609897 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 15:16:56,542 [INFO] aiogram.event: Update id=99609898 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 15:17:00,639 [INFO] aiogram.event: Update id=99609899 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 15:17:02,800 [INFO] aiogram.event: Update id=99609900 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 15:17:06,804 [INFO] aiogram.event: Update id=99609901 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:17:07,997 [INFO] aiogram.event: Update id=99609902 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:17:13,654 [INFO] aiogram.event: Update id=99609903 is not handled. Duration 15 ms by bot id=8308846710
2026-01-01 15:17:15,941 [INFO] aiogram.event: Update id=99609904 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 15:17:31,923 [INFO] aiogram.event: Update id=99609905 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 15:17:33,293 [INFO] aiogram.event: Update id=99609906 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:17:35,716 [INFO] aiogram.event: Update id=99609907 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 15:17:38,102 [INFO] aiogram.event: Update id=99609908 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:17:49,698 [INFO] aiogram.event: Update id=99609909 is handled. Duration 110 ms by bot id=8308846710
2026-01-01 15:17:51,493 [INFO] aiogram.event: Update id=99609910 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 15:17:55,151 [INFO] aiogram.event: Update id=99609911 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 15:18:09,579 [INFO] aiogram.event: Update id=99609912 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 15:23:09,948 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:23:09,948 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:23:09,950 [INFO] __main__: Shutdown complete
2026-01-01 15:23:09,951 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:23:15,163 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:23:15,164 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:23:15,164 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:23:15,164 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:23:15,244 [INFO] __main__: api started
2026-01-01 15:23:15,376 [INFO] db: DB initialized (create_all done)
2026-01-01 15:23:15,579 [INFO] app.bot: bot started
2026-01-01 15:23:15,579 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:23:15,580 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 59804.4s
2026-01-01 15:23:15,583 [INFO] db: DB initialized (create_all done)
2026-01-01 15:23:15,736 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:23:24,510 [INFO] aiogram.event: Update id=99609913 is handled. Duration 328 ms by bot id=8308846710
2026-01-01 15:23:27,149 [INFO] aiogram.event: Update id=99609914 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 15:23:29,245 [INFO] aiogram.event: Update id=99609915 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:23:30,854 [INFO] aiogram.event: Update id=99609916 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:23:33,877 [INFO] aiogram.event: Update id=99609917 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:23:37,949 [INFO] aiogram.event: Update id=99609918 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 15:23:48,378 [INFO] aiogram.event: Update id=99609919 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:24:07,869 [INFO] aiogram.event: Update id=99609920 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 15:24:09,601 [INFO] aiogram.event: Update id=99609921 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 15:24:11,371 [INFO] aiogram.event: Update id=99609922 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:24:12,847 [INFO] aiogram.event: Update id=99609923 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:24:14,078 [INFO] aiogram.event: Update id=99609924 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 15:24:17,183 [INFO] aiogram.event: Update id=99609925 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 15:24:21,300 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:24:21,301 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:24:21,303 [INFO] __main__: Shutdown complete
2026-01-01 15:24:21,303 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:37:08,700 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:37:08,701 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:37:08,701 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:37:08,701 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:37:08,778 [INFO] __main__: api started
2026-01-01 15:37:08,908 [INFO] db: DB initialized (create_all done)
2026-01-01 15:37:08,910 [INFO] db: DB initialized (create_all done)
2026-01-01 15:37:09,112 [INFO] app.bot: bot started
2026-01-01 15:37:09,112 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:37:09,114 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 58970.9s
2026-01-01 15:37:09,271 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:37:15,134 [INFO] aiogram.event: Update id=99609926 is handled. Duration 297 ms by bot id=8308846710
2026-01-01 15:37:19,692 [INFO] aiogram.event: Update id=99609927 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:37:21,788 [INFO] aiogram.event: Update id=99609928 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 15:37:23,632 [INFO] aiogram.event: Update id=99609929 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:37:25,278 [INFO] aiogram.event: Update id=99609930 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:37:31,022 [INFO] aiogram.event: Update id=99609931 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 15:38:03,860 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:38:03,860 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:38:03,862 [INFO] __main__: Shutdown complete
2026-01-01 15:38:03,863 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:39:08,543 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:39:08,543 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:39:08,543 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:39:08,544 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:39:08,618 [INFO] __main__: api started
2026-01-01 15:39:08,746 [INFO] db: DB initialized (create_all done)
2026-01-01 15:39:08,947 [INFO] app.bot: bot started
2026-01-01 15:39:08,947 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:39:08,948 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 58851.1s
2026-01-01 15:39:08,951 [INFO] db: DB initialized (create_all done)
2026-01-01 15:39:09,087 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:39:13,501 [INFO] aiogram.event: Update id=99609932 is handled. Duration 297 ms by bot id=8308846710
2026-01-01 15:39:14,730 [INFO] aiogram.event: Update id=99609933 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:39:16,693 [INFO] aiogram.event: Update id=99609934 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 15:39:18,330 [INFO] aiogram.event: Update id=99609935 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 15:39:19,622 [INFO] aiogram.event: Update id=99609936 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:39:20,828 [INFO] aiogram.event: Update id=99609937 is handled. Duration 202 ms by bot id=8308846710
2026-01-01 15:39:24,460 [INFO] aiogram.event: Update id=99609938 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:43:25,062 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:43:25,062 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:43:25,063 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:43:25,072 [INFO] __main__: Shutdown complete
2026-01-01 15:43:36,597 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:43:36,597 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:43:36,598 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:43:36,598 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:43:36,681 [INFO] __main__: api started
2026-01-01 15:43:36,811 [INFO] db: DB initialized (create_all done)
2026-01-01 15:43:37,011 [INFO] app.bot: bot started
2026-01-01 15:43:37,012 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:43:37,013 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 58583.0s
2026-01-01 15:43:37,015 [INFO] db: DB initialized (create_all done)
2026-01-01 15:43:37,176 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:43:53,398 [INFO] aiogram.event: Update id=99609939 is handled. Duration 327 ms by bot id=8308846710
2026-01-01 15:43:55,580 [INFO] aiogram.event: Update id=99609940 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:43:58,116 [INFO] aiogram.event: Update id=99609941 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:43:59,690 [INFO] aiogram.event: Update id=99609942 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:44:00,726 [INFO] aiogram.event: Update id=99609943 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:44:08,804 [INFO] aiogram.event: Update id=99609944 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:44:17,590 [INFO] aiogram.event: Update id=99609945 is not handled. Duration 16 ms by bot id=8308846710
2026-01-01 15:44:28,066 [INFO] aiogram.event: Update id=99609946 is handled. Duration 172 ms by bot id=8308846710
2026-01-01 15:44:35,876 [INFO] aiogram.event: Update id=99609947 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:44:38,062 [INFO] aiogram.event: Update id=99609948 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:44:39,496 [INFO] aiogram.event: Update id=99609949 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:44:40,819 [INFO] aiogram.event: Update id=99609950 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:44:44,236 [INFO] aiogram.event: Update id=99609951 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 15:44:52,596 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:44:52,597 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:44:52,599 [INFO] __main__: Shutdown complete
2026-01-01 15:44:52,599 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:44:57,596 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:44:57,596 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:44:57,597 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:44:57,597 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:44:57,670 [INFO] __main__: api started
2026-01-01 15:44:57,797 [INFO] db: DB initialized (create_all done)
2026-01-01 15:44:57,799 [INFO] db: DB initialized (create_all done)
2026-01-01 15:44:57,999 [INFO] app.bot: bot started
2026-01-01 15:44:57,999 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:44:58,000 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 58502.0s
2026-01-01 15:44:58,153 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:45:01,217 [INFO] aiogram.event: Update id=99609952 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 15:45:02,922 [INFO] aiogram.event: Update id=99609953 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 15:45:04,900 [INFO] aiogram.event: Update id=99609954 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:45:06,337 [INFO] aiogram.event: Update id=99609955 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 15:45:07,383 [INFO] aiogram.event: Update id=99609956 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 15:45:09,504 [INFO] aiogram.event: Update id=99609957 is handled. Duration 250 ms by bot id=8308846710
2026-01-01 15:45:13,499 [INFO] aiogram.event: Update id=99609958 is not handled. Duration 15 ms by bot id=8308846710
2026-01-01 15:45:14,414 [INFO] aiogram.event: Update id=99609959 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:45:17,021 [INFO] aiogram.event: Update id=99609960 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:45:21,263 [INFO] aiogram.event: Update id=99609961 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 15:45:26,017 [INFO] aiogram.event: Update id=99609962 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 15:45:28,519 [INFO] aiogram.event: Update id=99609963 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 15:45:30,435 [INFO] aiogram.event: Update id=99609964 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:45:35,887 [INFO] aiogram.event: Update id=99609965 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 15:46:03,185 [INFO] aiogram.event: Update id=99609966 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 15:46:19,564 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 15:46:19,565 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:46:19,565 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 15:46:19,574 [INFO] __main__: Shutdown complete
2026-01-01 15:52:43,021 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 15:52:43,022 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 15:52:43,022 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 15:52:43,022 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 15:52:43,097 [INFO] __main__: api started
2026-01-01 15:52:43,226 [INFO] db: DB initialized (create_all done)
2026-01-01 15:52:43,229 [INFO] db: DB initialized (create_all done)
2026-01-01 15:52:43,429 [INFO] app.bot: bot started
2026-01-01 15:52:43,430 [INFO] aiogram.dispatcher: Start polling
2026-01-01 15:52:43,431 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 58036.6s
2026-01-01 15:52:43,586 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 15:52:43,999 [INFO] aiogram.event: Update id=99609967 is handled. Duration 359 ms by bot id=8308846710
2026-01-01 15:52:52,148 [INFO] aiogram.event: Update id=99609968 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:02:17,399 [INFO] aiogram.event: Update id=99609969 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:02:29,683 [INFO] aiogram.event: Update id=99609970 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:02:31,807 [INFO] aiogram.event: Update id=99609971 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:02:33,926 [INFO] aiogram.event: Update id=99609972 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:02:35,354 [INFO] aiogram.event: Update id=99609973 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:02:36,224 [INFO] aiogram.event: Update id=99609974 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 16:04:26,113 [INFO] aiogram.event: Update id=99609975 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 16:04:40,363 [INFO] aiogram.event: Update id=99609976 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:04:43,296 [INFO] aiogram.event: Update id=99609977 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 16:04:47,236 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:04:47,236 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:04:47,237 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:04:47,246 [INFO] __main__: Shutdown complete
2026-01-01 16:10:30,813 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:10:30,814 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:10:30,814 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:10:30,814 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:10:30,889 [INFO] __main__: api started
2026-01-01 16:10:31,016 [INFO] db: DB initialized (create_all done)
2026-01-01 16:10:31,019 [INFO] db: DB initialized (create_all done)
2026-01-01 16:10:31,219 [INFO] app.bot: bot started
2026-01-01 16:10:31,220 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:10:31,221 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 56968.8s
2026-01-01 16:10:31,375 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:10:31,748 [INFO] aiogram.event: Update id=99609978 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 16:10:35,037 [INFO] aiogram.event: Update id=99609979 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:10:44,476 [INFO] aiogram.event: Update id=99609980 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 16:10:48,033 [INFO] aiogram.event: Update id=99609981 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 16:10:50,681 [INFO] aiogram.event: Update id=99609982 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:10:52,154 [INFO] aiogram.event: Update id=99609983 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 16:10:52,989 [INFO] aiogram.event: Update id=99609984 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:10:55,935 [INFO] aiogram.event: Update id=99609985 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:10:58,475 [INFO] aiogram.event: Update id=99609986 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:11:13,283 [INFO] aiogram.event: Update id=99609987 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:11:18,848 [INFO] aiogram.event: Update id=99609988 is handled. Duration 266 ms by bot id=8308846710
2026-01-01 16:11:42,483 [INFO] aiogram.event: Update id=99609989 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 16:11:45,009 [INFO] aiogram.event: Update id=99609990 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:11:48,236 [INFO] aiogram.event: Update id=99609991 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:11:51,207 [INFO] aiogram.event: Update id=99609992 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:11:53,117 [INFO] aiogram.event: Update id=99609993 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 16:12:00,386 [INFO] aiogram.event: Update id=99609994 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 16:12:01,427 [INFO] aiogram.event: Update id=99609995 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 16:12:03,328 [INFO] aiogram.event: Update id=99609996 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 16:15:18,966 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:15:18,967 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:15:18,969 [INFO] __main__: Shutdown complete
2026-01-01 16:15:18,969 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:15:23,795 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:15:23,796 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:15:23,796 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:15:23,796 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:15:23,868 [INFO] __main__: api started
2026-01-01 16:15:23,996 [INFO] db: DB initialized (create_all done)
2026-01-01 16:15:23,998 [INFO] db: DB initialized (create_all done)
2026-01-01 16:15:24,199 [INFO] app.bot: bot started
2026-01-01 16:15:24,199 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:15:24,200 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 56675.8s
2026-01-01 16:15:24,364 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:17:40,319 [INFO] aiogram.event: Update id=99609997 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 16:17:46,830 [INFO] aiogram.event: Update id=99609998 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 16:17:48,777 [INFO] aiogram.event: Update id=99609999 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:17:50,710 [INFO] aiogram.event: Update id=99610000 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:17:51,944 [INFO] aiogram.event: Update id=99610001 is handled. Duration 110 ms by bot id=8308846710
2026-01-01 16:17:55,576 [INFO] aiogram.event: Update id=99610002 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:18:36,132 [INFO] aiogram.event: Update id=99610003 is handled. Duration 1156 ms by bot id=8308846710
2026-01-01 16:18:37,331 [INFO] aiogram.event: Update id=99610004 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:18:59,689 [INFO] aiogram.event: Update id=99610005 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 16:19:03,216 [INFO] aiogram.event: Update id=99610006 is handled. Duration 391 ms by bot id=8308846710
2026-01-01 16:19:21,162 [INFO] aiogram.event: Update id=99610007 is handled. Duration 625 ms by bot id=8308846710
2026-01-01 16:19:22,701 [INFO] aiogram.event: Update id=99610008 is handled. Duration 202 ms by bot id=8308846710
2026-01-01 16:19:25,434 [INFO] aiogram.event: Update id=99610009 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:19:26,733 [INFO] aiogram.event: Update id=99610010 is handled. Duration 282 ms by bot id=8308846710
2026-01-01 16:19:33,790 [INFO] aiogram.event: Update id=99610011 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:21:29,988 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:21:29,988 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:21:29,991 [INFO] __main__: Shutdown complete
2026-01-01 16:21:29,991 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:21:35,027 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:21:35,027 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:21:35,027 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:21:35,028 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:21:35,103 [INFO] __main__: api started
2026-01-01 16:21:35,231 [INFO] db: DB initialized (create_all done)
2026-01-01 16:21:35,234 [INFO] db: DB initialized (create_all done)
2026-01-01 16:21:35,435 [INFO] app.bot: bot started
2026-01-01 16:21:35,436 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:21:35,437 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 56304.6s
2026-01-01 16:21:35,591 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:21:36,021 [INFO] aiogram.event: Update id=99610012 is handled. Duration 359 ms by bot id=8308846710
2026-01-01 16:21:38,806 [INFO] aiogram.event: Update id=99610013 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:21:40,744 [INFO] aiogram.event: Update id=99610014 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:21:42,027 [INFO] aiogram.event: Update id=99610015 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:21:43,251 [INFO] aiogram.event: Update id=99610016 is handled. Duration 328 ms by bot id=8308846710
2026-01-01 16:21:47,888 [INFO] aiogram.event: Update id=99610017 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:21:50,700 [INFO] aiogram.event: Update id=99610018 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:21:52,392 [INFO] aiogram.event: Update id=99610019 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:21:53,837 [INFO] aiogram.event: Update id=99610020 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:21:55,391 [INFO] aiogram.event: Update id=99610021 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:21:56,844 [INFO] aiogram.event: Update id=99610022 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:21:58,772 [INFO] aiogram.event: Update id=99610023 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:22:00,217 [INFO] aiogram.event: Update id=99610024 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:22:00,970 [INFO] aiogram.event: Update id=99610025 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:22:02,636 [INFO] aiogram.event: Update id=99610026 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:22:03,374 [INFO] aiogram.event: Update id=99610027 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 16:22:05,064 [INFO] aiogram.event: Update id=99610028 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:22:05,765 [INFO] aiogram.event: Update id=99610029 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:22:07,279 [INFO] aiogram.event: Update id=99610030 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:22:13,297 [INFO] aiogram.event: Update id=99610031 is not handled. Duration 16 ms by bot id=8308846710
2026-01-01 16:22:15,881 [INFO] aiogram.event: Update id=99610032 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:22:36,922 [INFO] aiogram.event: Update id=99610033 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:22:45,811 [INFO] aiogram.event: Update id=99610034 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:22:47,931 [INFO] aiogram.event: Update id=99610035 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 16:22:49,483 [INFO] aiogram.event: Update id=99610036 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 16:22:50,896 [INFO] aiogram.event: Update id=99610037 is handled. Duration 202 ms by bot id=8308846710
2026-01-01 16:23:02,273 [INFO] aiogram.event: Update id=99610038 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 16:23:04,688 [INFO] aiogram.event: Update id=99610039 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:23:06,371 [INFO] aiogram.event: Update id=99610040 is handled. Duration 172 ms by bot id=8308846710
2026-01-01 16:24:39,596 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:24:39,597 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:24:39,597 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:24:39,605 [INFO] __main__: Shutdown complete
2026-01-01 16:24:44,196 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:24:44,197 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:24:44,197 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:24:44,197 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:24:44,269 [INFO] __main__: api started
2026-01-01 16:24:44,395 [INFO] db: DB initialized (create_all done)
2026-01-01 16:24:44,592 [INFO] app.bot: bot started
2026-01-01 16:24:44,593 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:24:44,594 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 56115.4s
2026-01-01 16:24:44,597 [INFO] db: DB initialized (create_all done)
2026-01-01 16:24:44,738 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:24:57,612 [INFO] aiogram.event: Update id=99610041 is handled. Duration 328 ms by bot id=8308846710
2026-01-01 16:25:00,266 [INFO] aiogram.event: Update id=99610042 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 16:25:02,239 [INFO] aiogram.event: Update id=99610043 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:25:05,355 [INFO] aiogram.event: Update id=99610044 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:25:06,018 [INFO] aiogram.event: Update id=99610045 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 16:25:08,406 [INFO] aiogram.event: Update id=99610046 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:25:10,254 [INFO] aiogram.event: Update id=99610047 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:25:11,135 [INFO] aiogram.event: Update id=99610048 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:25:13,404 [INFO] aiogram.event: Update id=99610049 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:25:15,076 [INFO] aiogram.event: Update id=99610050 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:25:17,839 [INFO] aiogram.event: Update id=99610051 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:25:19,189 [INFO] aiogram.event: Update id=99610052 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:25:26,204 [INFO] aiogram.event: Update id=99610053 is not handled. Duration 14 ms by bot id=8308846710
2026-01-01 16:25:27,586 [INFO] aiogram.event: Update id=99610054 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:25:29,555 [INFO] aiogram.event: Update id=99610055 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 16:25:31,178 [INFO] aiogram.event: Update id=99610056 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:25:32,187 [INFO] aiogram.event: Update id=99610057 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 16:25:33,905 [INFO] aiogram.event: Update id=99610058 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:25:35,023 [INFO] aiogram.event: Update id=99610059 is handled. Duration 202 ms by bot id=8308846710
2026-01-01 16:25:36,159 [INFO] aiogram.event: Update id=99610060 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:25:37,296 [INFO] aiogram.event: Update id=99610061 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:25:38,754 [INFO] aiogram.event: Update id=99610062 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 16:25:39,877 [INFO] aiogram.event: Update id=99610063 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:25:41,538 [INFO] aiogram.event: Update id=99610064 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:25:42,709 [INFO] aiogram.event: Update id=99610065 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:25:43,857 [INFO] aiogram.event: Update id=99610066 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 16:26:51,335 [INFO] aiogram.event: Update id=99610067 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 16:27:12,509 [INFO] aiogram.event: Update id=99610068 is not handled. Duration 0 ms by bot id=8308846710
2026-01-01 16:27:15,941 [INFO] aiogram.event: Update id=99610069 is handled. Duration 266 ms by bot id=8308846710
2026-01-01 16:27:17,081 [INFO] aiogram.event: Update id=99610070 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:27:23,174 [INFO] aiogram.event: Update id=99610071 is not handled. Duration 16 ms by bot id=8308846710
2026-01-01 16:27:25,722 [INFO] aiogram.event: Update id=99610072 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:27:27,379 [INFO] aiogram.event: Update id=99610073 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:28:44,578 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:28:44,579 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:28:44,579 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:28:44,587 [INFO] __main__: Shutdown complete
2026-01-01 16:29:04,179 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:29:04,180 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:29:04,180 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:29:04,180 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:29:04,260 [INFO] __main__: api started
2026-01-01 16:29:04,389 [INFO] db: DB initialized (create_all done)
2026-01-01 16:29:04,392 [INFO] db: DB initialized (create_all done)
2026-01-01 16:29:04,591 [INFO] app.bot: bot started
2026-01-01 16:29:04,592 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:29:04,593 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 55855.4s
2026-01-01 16:29:04,744 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:29:09,372 [INFO] aiogram.event: Update id=99610074 is handled. Duration 344 ms by bot id=8308846710
2026-01-01 16:29:11,306 [INFO] aiogram.event: Update id=99610075 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:29:12,921 [INFO] aiogram.event: Update id=99610076 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 16:29:14,356 [INFO] aiogram.event: Update id=99610077 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:29:15,326 [INFO] aiogram.event: Update id=99610078 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 16:29:21,901 [INFO] aiogram.event: Update id=99610079 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 16:29:40,773 [INFO] aiogram.event: Update id=99610080 is handled. Duration 234 ms by bot id=8308846710
2026-01-01 16:29:41,811 [INFO] aiogram.event: Update id=99610081 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:29:42,676 [INFO] aiogram.event: Update id=99610082 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:29:43,468 [INFO] aiogram.event: Update id=99610083 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:29:45,435 [INFO] aiogram.event: Update id=99610084 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:29:46,534 [INFO] aiogram.event: Update id=99610085 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:29:48,555 [INFO] aiogram.event: Update id=99610086 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:29:49,573 [INFO] aiogram.event: Update id=99610087 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:29:50,950 [INFO] aiogram.event: Update id=99610088 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 16:29:51,921 [INFO] aiogram.event: Update id=99610089 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:29:53,252 [INFO] aiogram.event: Update id=99610090 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:29:54,333 [INFO] aiogram.event: Update id=99610091 is handled. Duration 202 ms by bot id=8308846710
2026-01-01 16:29:55,436 [INFO] aiogram.event: Update id=99610092 is handled. Duration 360 ms by bot id=8308846710
2026-01-01 16:29:56,220 [INFO] aiogram.event: Update id=99610093 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 16:29:57,310 [INFO] aiogram.event: Update id=99610094 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 16:29:58,375 [INFO] aiogram.event: Update id=99610095 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:29:59,380 [INFO] aiogram.event: Update id=99610096 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:30:00,302 [INFO] aiogram.event: Update id=99610097 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:30:01,573 [INFO] aiogram.event: Update id=99610098 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:30:02,532 [INFO] aiogram.event: Update id=99610099 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:30:03,549 [INFO] aiogram.event: Update id=99610100 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:30:49,903 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:30:49,904 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:30:49,906 [INFO] __main__: Shutdown complete
2026-01-01 16:30:49,906 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:31:17,003 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:31:17,004 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:31:17,004 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:31:17,004 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:31:17,077 [INFO] __main__: api started
2026-01-01 16:31:17,205 [INFO] db: DB initialized (create_all done)
2026-01-01 16:31:17,207 [INFO] db: DB initialized (create_all done)
2026-01-01 16:31:17,405 [INFO] app.bot: bot started
2026-01-01 16:31:17,406 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:31:17,407 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 55722.6s
2026-01-01 16:31:17,556 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:31:17,622 [INFO] aiogram.event: Update id=99610101 is not handled. Duration 15 ms by bot id=8308846710
2026-01-01 16:31:19,589 [INFO] aiogram.event: Update id=99610102 is handled. Duration 296 ms by bot id=8308846710
2026-01-01 16:31:21,722 [INFO] aiogram.event: Update id=99610103 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 16:31:23,553 [INFO] aiogram.event: Update id=99610104 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 16:31:24,865 [INFO] aiogram.event: Update id=99610105 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:31:25,703 [INFO] aiogram.event: Update id=99610106 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:31:29,130 [INFO] aiogram.event: Update id=99610107 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 16:31:32,793 [INFO] aiogram.event: Update id=99610108 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 16:31:34,770 [INFO] aiogram.event: Update id=99610109 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:31:36,939 [INFO] aiogram.event: Update id=99610110 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:31:38,412 [INFO] aiogram.event: Update id=99610111 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:31:40,067 [INFO] aiogram.event: Update id=99610112 is handled. Duration 235 ms by bot id=8308846710
2026-01-01 16:31:41,286 [INFO] aiogram.event: Update id=99610113 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:31:43,538 [INFO] aiogram.event: Update id=99610114 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:31:45,380 [INFO] aiogram.event: Update id=99610115 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:31:47,191 [INFO] aiogram.event: Update id=99610116 is handled. Duration 157 ms by bot id=8308846710
2026-01-01 16:31:48,814 [INFO] aiogram.event: Update id=99610117 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 16:31:50,865 [INFO] aiogram.event: Update id=99610118 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:31:57,349 [INFO] aiogram.event: Update id=99610119 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:32:01,114 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:32:01,114 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:32:01,116 [INFO] __main__: Shutdown complete
2026-01-01 16:32:01,117 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:36:19,115 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:36:19,115 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:36:19,116 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:36:19,116 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:36:19,188 [INFO] __main__: api started
2026-01-01 16:36:19,317 [INFO] db: DB initialized (create_all done)
2026-01-01 16:36:19,319 [INFO] db: DB initialized (create_all done)
2026-01-01 16:36:19,518 [INFO] app.bot: bot started
2026-01-01 16:36:19,519 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:36:19,520 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 55420.5s
2026-01-01 16:36:19,674 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:36:20,167 [INFO] aiogram.event: Update id=99610120 is handled. Duration 421 ms by bot id=8308846710
2026-01-01 16:36:20,203 [INFO] aiogram.event: Update id=99610122 is handled. Duration 452 ms by bot id=8308846710
2026-01-01 16:36:20,229 [INFO] aiogram.event: Update id=99610124 is handled. Duration 468 ms by bot id=8308846710
2026-01-01 16:36:20,256 [INFO] aiogram.event: Update id=99610121 is handled. Duration 500 ms by bot id=8308846710
2026-01-01 16:36:20,294 [INFO] aiogram.event: Update id=99610123 is handled. Duration 546 ms by bot id=8308846710
2026-01-01 16:36:25,958 [INFO] aiogram.event: Update id=99610125 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 16:36:28,133 [INFO] aiogram.event: Update id=99610126 is handled. Duration 109 ms by bot id=8308846710
2026-01-01 16:36:29,382 [INFO] aiogram.event: Update id=99610127 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 16:36:30,104 [INFO] aiogram.event: Update id=99610128 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:36:35,332 [INFO] aiogram.event: Update id=99610129 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:36:37,037 [INFO] aiogram.event: Update id=99610130 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 16:36:40,587 [INFO] aiogram.event: Update id=99610131 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 16:36:42,276 [INFO] aiogram.event: Update id=99610132 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 16:36:45,726 [INFO] aiogram.event: Update id=99610133 is handled. Duration 266 ms by bot id=8308846710
2026-01-01 16:36:49,538 [INFO] aiogram.event: Update id=99610134 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 16:36:52,770 [INFO] aiogram.event: Update id=99610135 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:39:54,363 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:39:54,363 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:39:54,369 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:39:54,370 [ERROR] sqlalchemy.pool.impl.AsyncAdaptedQueuePool: Exception closing connection <AdaptedConnection <asyncpg.connection.Connection object at 0x0000027C5F941220>>
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\asyncio\base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "C:\Users\JK\anaconda3\Lib\asyncio\windows_events.py", line 322, in run_forever
    super().run_forever()
  File "C:\Users\JK\anaconda3\Lib\asyncio\base_events.py", line 641, in run_forever
    self._run_once()
  File "C:\Users\JK\anaconda3\Lib\asyncio\base_events.py", line 1948, in _run_once
    event_list = self._selector.select(timeout)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\asyncio\windows_events.py", line 445, in select
    self._poll(timeout)
  File "C:\Users\JK\anaconda3\Lib\asyncio\windows_events.py", line 774, in _poll
    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py", line 374, in _close_connection
    self._dialect.do_close(connection)
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\engine\default.py", line 721, in do_close
    dbapi_connection.close()
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 903, in close
    self.await_(self._connection.close())
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\asyncpg\connection.py", line 1467, in close
    await self._protocol.close(timeout)
  File "asyncpg\protocol\protocol.pyx", line 641, in close
asyncio.exceptions.CancelledError
2026-01-01 16:39:54,378 [INFO] __main__: Shutdown complete
2026-01-01 16:39:59,368 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:39:59,368 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:39:59,368 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:39:59,368 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:39:59,443 [INFO] __main__: api started
2026-01-01 16:39:59,568 [INFO] db: DB initialized (create_all done)
2026-01-01 16:39:59,766 [INFO] app.bot: bot started
2026-01-01 16:39:59,767 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:39:59,768 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 55200.2s
2026-01-01 16:39:59,771 [INFO] db: DB initialized (create_all done)
2026-01-01 16:39:59,938 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:40:27,325 [INFO] aiogram.event: Update id=99610136 is handled. Duration 264 ms by bot id=8308846710
2026-01-01 16:40:35,491 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 16:40:35,492 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 16:40:35,494 [INFO] __main__: Shutdown complete
2026-01-01 16:40:35,494 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:45:18,563 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 16:45:18,563 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 16:45:18,563 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 16:45:18,564 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 16:45:18,649 [INFO] __main__: api started
2026-01-01 16:45:18,777 [INFO] db: DB initialized (create_all done)
2026-01-01 16:45:18,780 [INFO] db: DB initialized (create_all done)
2026-01-01 16:45:18,978 [INFO] app.bot: bot started
2026-01-01 16:45:18,979 [INFO] aiogram.dispatcher: Start polling
2026-01-01 16:45:18,980 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 54881.0s
2026-01-01 16:45:19,133 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 16:45:19,363 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 75, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\profile.py", line 183, in edit_city
    await call.answer()
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2026-01-01 16:45:19,424 [INFO] aiogram.event: Update id=99610137 is not handled. Duration 233 ms by bot id=8308846710
2026-01-01 16:45:19,424 [ERROR] aiogram.event: Cause exception while process update id=99610137 by bot id=8308846710
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 75, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\profile.py", line 183, in edit_city
    await call.answer()
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\profile.py", line 183, in edit_city
    await call.answer()
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2026-01-01 16:45:29,752 [INFO] aiogram.event: Update id=99610138 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 16:45:35,866 [INFO] aiogram.event: Update id=99610139 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 16:45:37,344 [INFO] aiogram.event: Update id=99610140 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 16:45:39,127 [INFO] aiogram.event: Update id=99610141 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 16:45:41,581 [INFO] aiogram.event: Update id=99610142 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 16:45:43,850 [INFO] aiogram.event: Update id=99610143 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:45:45,595 [INFO] aiogram.event: Update id=99610144 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:45:46,567 [INFO] aiogram.event: Update id=99610145 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 16:45:48,003 [INFO] aiogram.event: Update id=99610146 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 16:45:49,176 [INFO] aiogram.event: Update id=99610147 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:45:51,259 [INFO] aiogram.event: Update id=99610148 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:45:52,257 [INFO] aiogram.event: Update id=99610149 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 16:45:57,632 [INFO] aiogram.event: Update id=99610150 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 16:46:01,963 [INFO] aiogram.event: Update id=99610151 is handled. Duration 46 ms by bot id=8308846710
2026-01-01 16:46:07,000 [INFO] aiogram.event: Update id=99610152 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 16:46:08,392 [INFO] aiogram.event: Update id=99610153 is handled. Duration 77 ms by bot id=8308846710
2026-01-01 16:46:09,893 [INFO] aiogram.event: Update id=99610154 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 16:46:12,838 [INFO] aiogram.event: Update id=99610155 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 16:47:05,424 [INFO] aiogram.event: Update id=99610156 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 21:30:17,546 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2026-01-01 21:30:17,546 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-01 21:30:18,568 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2026-01-01 21:30:18,569 [WARNING] aiogram.dispatcher: Sleep for 1.363617 seconds and try again... (tryings = 1, bot id = 8308846710)
2026-01-01 21:30:19,946 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2026-01-01 21:30:19,948 [WARNING] aiogram.dispatcher: Sleep for 1.751971 seconds and try again... (tryings = 2, bot id = 8308846710)
2026-01-01 21:30:21,728 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2026-01-01 21:30:21,728 [WARNING] aiogram.dispatcher: Sleep for 2.061379 seconds and try again... (tryings = 3, bot id = 8308846710)
2026-01-01 21:30:33,740 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 21:30:33,741 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 21:30:33,741 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 21:30:33,766 [INFO] __main__: Shutdown complete
2026-01-01 23:03:25,721 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:03:25,722 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:03:25,722 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:03:25,722 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:03:25,821 [INFO] __main__: api started
2026-01-01 23:03:26,005 [INFO] db: DB initialized (create_all done)
2026-01-01 23:03:26,005 [INFO] db: DB initialized (create_all done)
2026-01-01 23:03:26,211 [INFO] app.bot: bot started
2026-01-01 23:03:26,212 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:03:26,214 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 32193.8s
2026-01-01 23:03:26,532 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:03:48,880 [INFO] aiogram.event: Update id=99610157 is handled. Duration 562 ms by bot id=8308846710
2026-01-01 23:03:59,425 [INFO] aiogram.event: Update id=99610158 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:04:12,240 [INFO] aiogram.event: Update id=99610159 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:04:14,387 [INFO] aiogram.event: Update id=99610160 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 23:04:16,062 [INFO] aiogram.event: Update id=99610161 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 23:04:22,796 [INFO] aiogram.event: Update id=99610162 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 23:04:38,473 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:04:38,478 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:04:38,479 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:04:38,491 [INFO] __main__: Shutdown complete
2026-01-01 23:06:08,202 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:06:08,203 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:06:08,203 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:06:08,203 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:06:08,282 [INFO] __main__: api started
2026-01-01 23:06:08,419 [INFO] db: DB initialized (create_all done)
2026-01-01 23:06:08,421 [INFO] db: DB initialized (create_all done)
2026-01-01 23:06:08,623 [INFO] app.bot: bot started
2026-01-01 23:06:08,623 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:06:08,624 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 32031.4s
2026-01-01 23:06:08,917 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:06:09,451 [INFO] aiogram.event: Update id=99610163 is handled. Duration 437 ms by bot id=8308846710
2026-01-01 23:06:13,976 [INFO] aiogram.event: Update id=99610164 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 23:06:16,275 [INFO] aiogram.event: Update id=99610165 is handled. Duration 218 ms by bot id=8308846710
2026-01-01 23:06:17,789 [INFO] aiogram.event: Update id=99610166 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:06:19,758 [INFO] aiogram.event: Update id=99610167 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:06:22,376 [INFO] aiogram.event: Update id=99610168 is handled. Duration 234 ms by bot id=8308846710
2026-01-01 23:06:24,125 [INFO] aiogram.event: Update id=99610169 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:06:25,670 [INFO] aiogram.event: Update id=99610170 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 23:06:26,977 [INFO] aiogram.event: Update id=99610171 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:06:29,496 [INFO] aiogram.event: Update id=99610172 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:06:42,265 [INFO] aiogram.event: Update id=99610173 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 23:06:43,979 [INFO] aiogram.event: Update id=99610174 is handled. Duration 93 ms by bot id=8308846710
2026-01-01 23:06:49,361 [INFO] aiogram.event: Update id=99610175 is handled. Duration 234 ms by bot id=8308846710
2026-01-01 23:06:51,171 [INFO] aiogram.event: Update id=99610176 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:06:52,565 [INFO] aiogram.event: Update id=99610177 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 23:06:53,948 [INFO] aiogram.event: Update id=99610178 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:06:55,103 [INFO] aiogram.event: Update id=99610179 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:06:56,379 [INFO] aiogram.event: Update id=99610180 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:06:57,862 [INFO] aiogram.event: Update id=99610181 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:06:59,907 [INFO] aiogram.event: Update id=99610182 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:09:29,217 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:09:29,217 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:09:29,218 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:09:29,220 [INFO] __main__: Shutdown complete
2026-01-01 23:09:34,452 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:09:34,452 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:09:34,453 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:09:34,453 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:09:34,532 [INFO] __main__: api started
2026-01-01 23:09:34,667 [INFO] db: DB initialized (create_all done)
2026-01-01 23:09:34,874 [INFO] app.bot: bot started
2026-01-01 23:09:34,875 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:09:34,876 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 31825.1s
2026-01-01 23:09:34,878 [INFO] db: DB initialized (create_all done)
2026-01-01 23:09:35,169 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:09:47,596 [INFO] aiogram.event: Update id=99610183 is handled. Duration 358 ms by bot id=8308846710
2026-01-01 23:09:51,027 [INFO] aiogram.event: Update id=99610184 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 23:09:53,782 [INFO] aiogram.event: Update id=99610185 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 23:09:55,040 [INFO] aiogram.event: Update id=99610186 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:09:55,749 [INFO] aiogram.event: Update id=99610187 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:09:57,018 [INFO] aiogram.event: Update id=99610188 is handled. Duration 234 ms by bot id=8308846710
2026-01-01 23:09:58,605 [INFO] aiogram.event: Update id=99610189 is handled. Duration 296 ms by bot id=8308846710
2026-01-01 23:09:59,828 [INFO] aiogram.event: Update id=99610190 is handled. Duration 217 ms by bot id=8308846710
2026-01-01 23:10:01,720 [INFO] aiogram.event: Update id=99610191 is handled. Duration 218 ms by bot id=8308846710
2026-01-01 23:10:03,514 [INFO] aiogram.event: Update id=99610192 is handled. Duration 218 ms by bot id=8308846710
2026-01-01 23:10:06,268 [INFO] aiogram.event: Update id=99610193 is handled. Duration 250 ms by bot id=8308846710
2026-01-01 23:10:09,791 [INFO] aiogram.event: Update id=99610194 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:10:15,183 [INFO] aiogram.event: Update id=99610195 is handled. Duration 250 ms by bot id=8308846710
2026-01-01 23:10:32,196 [INFO] aiogram.event: Update id=99610196 is handled. Duration 282 ms by bot id=8308846710
2026-01-01 23:10:42,538 [INFO] aiogram.event: Update id=99610197 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 23:10:43,804 [INFO] aiogram.event: Update id=99610198 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:10:51,736 [INFO] aiogram.event: Update id=99610199 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:10:53,029 [INFO] aiogram.event: Update id=99610200 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:12:28,052 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:12:28,053 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:12:28,054 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:12:28,065 [INFO] __main__: Shutdown complete
2026-01-01 23:12:35,866 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:12:35,867 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:12:35,867 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:12:35,867 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:12:35,947 [INFO] __main__: api started
2026-01-01 23:12:36,082 [INFO] db: DB initialized (create_all done)
2026-01-01 23:12:36,085 [INFO] db: DB initialized (create_all done)
2026-01-01 23:12:36,290 [INFO] app.bot: bot started
2026-01-01 23:12:36,290 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:12:36,291 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 31643.7s
2026-01-01 23:12:36,572 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:12:39,246 [INFO] aiogram.event: Update id=99610201 is handled. Duration 437 ms by bot id=8308846710
2026-01-01 23:12:41,108 [INFO] aiogram.event: Update id=99610202 is handled. Duration 344 ms by bot id=8308846710
2026-01-01 23:12:41,981 [INFO] aiogram.event: Update id=99610203 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:12:43,047 [INFO] aiogram.event: Update id=99610204 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:12:43,903 [INFO] aiogram.event: Update id=99610205 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 23:12:44,842 [INFO] aiogram.event: Update id=99610206 is handled. Duration 218 ms by bot id=8308846710
2026-01-01 23:12:46,156 [INFO] aiogram.event: Update id=99610207 is handled. Duration 217 ms by bot id=8308846710
2026-01-01 23:16:22,471 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:16:22,471 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:16:22,472 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:16:22,481 [INFO] __main__: Shutdown complete
2026-01-01 23:16:27,519 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:16:27,520 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:16:27,520 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:16:27,520 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:16:27,599 [INFO] __main__: api started
2026-01-01 23:16:27,730 [INFO] db: DB initialized (create_all done)
2026-01-01 23:16:27,733 [INFO] db: DB initialized (create_all done)
2026-01-01 23:16:27,936 [INFO] app.bot: bot started
2026-01-01 23:16:27,936 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:16:27,937 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 31412.1s
2026-01-01 23:16:28,209 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:16:32,566 [INFO] aiogram.event: Update id=99610208 is handled. Duration 407 ms by bot id=8308846710
2026-01-01 23:16:34,460 [INFO] aiogram.event: Update id=99610209 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 23:16:35,748 [INFO] aiogram.event: Update id=99610210 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 23:16:36,843 [INFO] aiogram.event: Update id=99610211 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:16:37,856 [INFO] aiogram.event: Update id=99610212 is handled. Duration 219 ms by bot id=8308846710
2026-01-01 23:16:38,756 [INFO] aiogram.event: Update id=99610213 is handled. Duration 234 ms by bot id=8308846710
2026-01-01 23:16:39,571 [INFO] aiogram.event: Update id=99610214 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:16:41,421 [INFO] aiogram.event: Update id=99610215 is handled. Duration 203 ms by bot id=8308846710
2026-01-01 23:16:46,813 [INFO] aiogram.event: Update id=99610216 is handled. Duration 110 ms by bot id=8308846710
2026-01-01 23:18:04,058 [INFO] aiogram.event: Update id=99610217 is handled. Duration 437 ms by bot id=8308846710
2026-01-01 23:18:26,991 [INFO] aiogram.event: Update id=99610218 is handled. Duration 391 ms by bot id=8308846710
2026-01-01 23:18:29,375 [INFO] aiogram.event: Update id=99610219 is handled. Duration 437 ms by bot id=8308846710
2026-01-01 23:18:31,352 [INFO] aiogram.event: Update id=99610220 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:18:33,101 [INFO] aiogram.event: Update id=99610221 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 23:18:34,769 [INFO] aiogram.event: Update id=99610222 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:18:47,166 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:18:47,167 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:18:47,167 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:18:47,176 [INFO] __main__: Shutdown complete
2026-01-01 23:30:53,466 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:30:53,466 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:30:53,466 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:30:53,467 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:30:53,561 [INFO] __main__: api started
2026-01-01 23:30:53,731 [INFO] db: DB initialized (create_all done)
2026-01-01 23:30:53,932 [INFO] app.bot: bot started
2026-01-01 23:30:53,932 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:30:53,934 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 30546.1s
2026-01-01 23:30:53,938 [INFO] db: DB initialized (create_all done)
2026-01-01 23:30:54,120 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:30:54,524 [INFO] aiogram.event: Update id=99610223 is handled. Duration 327 ms by bot id=8308846710
2026-01-01 23:31:02,429 [INFO] aiogram.event: Update id=99610224 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 23:31:03,804 [INFO] aiogram.event: Update id=99610225 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 23:31:09,486 [INFO] aiogram.event: Update id=99610226 is handled. Duration 94 ms by bot id=8308846710
2026-01-01 23:31:18,589 [INFO] aiogram.event: Update id=99610227 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 23:31:25,185 [INFO] aiogram.event: Update id=99610228 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 23:31:28,286 [INFO] aiogram.event: Update id=99610229 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 23:31:30,379 [INFO] aiogram.event: Update id=99610230 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:31:31,289 [INFO] aiogram.event: Update id=99610231 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 23:31:34,291 [INFO] aiogram.event: Update id=99610232 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 23:31:42,612 [INFO] aiogram.event: Update id=99610233 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:31:46,226 [INFO] aiogram.event: Update id=99610234 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 23:31:52,386 [INFO] aiogram.event: Update id=99610235 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 23:31:54,670 [INFO] aiogram.event: Update id=99610236 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:31:58,334 [INFO] aiogram.event: Update id=99610237 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:32:00,276 [INFO] aiogram.event: Update id=99610238 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 23:32:05,278 [INFO] aiogram.event: Update id=99610239 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 23:32:06,288 [INFO] aiogram.event: Update id=99610240 is handled. Duration 92 ms by bot id=8308846710
2026-01-01 23:32:08,232 [INFO] aiogram.event: Update id=99610241 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:33:24,958 [INFO] aiogram.event: Update id=99610242 is handled. Duration 233 ms by bot id=8308846710
2026-01-01 23:33:26,927 [INFO] aiogram.event: Update id=99610243 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:33:28,707 [INFO] aiogram.event: Update id=99610244 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:33:30,411 [INFO] aiogram.event: Update id=99610245 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:33:32,418 [INFO] aiogram.event: Update id=99610246 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 23:33:34,819 [INFO] aiogram.event: Update id=99610247 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 23:33:41,699 [INFO] aiogram.event: Update id=99610248 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 23:33:43,746 [INFO] aiogram.event: Update id=99610249 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:33:44,454 [INFO] aiogram.event: Update id=99610250 is handled. Duration 139 ms by bot id=8308846710
2026-01-01 23:33:45,380 [INFO] aiogram.event: Update id=99610251 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 23:33:46,980 [INFO] aiogram.event: Update id=99610252 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:34:06,800 [INFO] aiogram.event: Update id=99610253 is handled. Duration 156 ms by bot id=8308846710
2026-01-01 23:34:08,123 [INFO] aiogram.event: Update id=99610254 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:34:10,043 [INFO] aiogram.event: Update id=99610255 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:34:12,066 [INFO] aiogram.event: Update id=99610256 is handled. Duration 172 ms by bot id=8308846710
2026-01-01 23:34:13,306 [INFO] aiogram.event: Update id=99610257 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:14,462 [INFO] aiogram.event: Update id=99610258 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:15,683 [INFO] aiogram.event: Update id=99610259 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:16,730 [INFO] aiogram.event: Update id=99610260 is handled. Duration 155 ms by bot id=8308846710
2026-01-01 23:34:17,602 [INFO] aiogram.event: Update id=99610261 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 23:34:18,674 [INFO] aiogram.event: Update id=99610262 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:19,791 [INFO] aiogram.event: Update id=99610263 is handled. Duration 108 ms by bot id=8308846710
2026-01-01 23:34:20,831 [INFO] aiogram.event: Update id=99610264 is handled. Duration 342 ms by bot id=8308846710
2026-01-01 23:34:22,082 [INFO] aiogram.event: Update id=99610265 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:22,806 [INFO] aiogram.event: Update id=99610266 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:23,769 [INFO] aiogram.event: Update id=99610267 is handled. Duration 140 ms by bot id=8308846710
2026-01-01 23:34:26,056 [INFO] aiogram.event: Update id=99610268 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:27,309 [INFO] aiogram.event: Update id=99610269 is handled. Duration 141 ms by bot id=8308846710
2026-01-01 23:34:28,255 [INFO] aiogram.event: Update id=99610270 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:34:29,955 [INFO] aiogram.event: Update id=99610271 is handled. Duration 125 ms by bot id=8308846710
2026-01-01 23:36:26,864 [INFO] aiogram.event: Update id=99610272 is handled. Duration 171 ms by bot id=8308846710
2026-01-01 23:37:25,790 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:37:25,790 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:37:25,792 [INFO] __main__: Shutdown complete
2026-01-01 23:37:25,793 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:46:22,424 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:46:22,424 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:46:22,425 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:46:22,425 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:46:22,502 [INFO] __main__: api started
2026-01-01 23:46:22,637 [INFO] db: DB initialized (create_all done)
2026-01-01 23:46:22,838 [INFO] app.bot: bot started
2026-01-01 23:46:22,838 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:46:22,839 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 29617.2s
2026-01-01 23:46:22,842 [INFO] db: DB initialized (create_all done)
2026-01-01 23:46:22,997 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:46:23,376 [INFO] aiogram.event: Update id=99610273 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 23:47:42,125 [INFO] aiogram.event: Update id=99610274 is handled. Duration 234 ms by bot id=8308846710
2026-01-01 23:47:44,591 [INFO] aiogram.event: Update id=99610275 is handled. Duration 16 ms by bot id=8308846710
2026-01-01 23:47:46,525 [INFO] aiogram.event: Update id=99610276 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 23:47:49,306 [INFO] aiogram.event: Update id=99610277 is handled. Duration 0 ms by bot id=8308846710
2026-01-01 23:47:55,453 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:47:55,454 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:47:55,456 [INFO] __main__: Shutdown complete
2026-01-01 23:47:55,456 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:48:08,697 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:48:08,697 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:48:08,698 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:48:08,698 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:48:08,773 [INFO] __main__: api started
2026-01-01 23:48:08,900 [INFO] db: DB initialized (create_all done)
2026-01-01 23:48:08,902 [INFO] db: DB initialized (create_all done)
2026-01-01 23:48:09,102 [INFO] app.bot: bot started
2026-01-01 23:48:09,102 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:48:09,103 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 29510.9s
2026-01-01 23:48:09,264 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:48:14,590 [INFO] aiogram.event: Update id=99610278 is handled. Duration 30 ms by bot id=8308846710
2026-01-01 23:48:38,888 [INFO] aiogram.event: Update id=99610279 is handled. Duration 15 ms by bot id=8308846710
2026-01-01 23:48:39,530 [INFO] aiogram.event: Update id=99610280 is handled. Duration 15 ms by bot id=8308846710
2026-01-01 23:48:40,940 [INFO] aiogram.event: Update id=99610281 is handled. Duration 312 ms by bot id=8308846710
2026-01-01 23:48:57,721 [INFO] aiogram.event: Update id=99610282 is handled. Duration 0 ms by bot id=8308846710
2026-01-01 23:49:09,408 [INFO] aiogram.event: Update id=99610283 is handled. Duration 0 ms by bot id=8308846710
2026-01-01 23:49:10,730 [INFO] aiogram.event: Update id=99610284 is handled. Duration 16 ms by bot id=8308846710
2026-01-01 23:49:19,093 [ERROR] asyncio: Exception in callback _ProactorBasePipeTransport._call_connection_lost(None)
handle: <Handle _ProactorBasePipeTransport._call_connection_lost(None)>
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\JK\anaconda3\Lib\asyncio\proactor_events.py", line 165, in _call_connection_lost
    self._sock.shutdown(socket.SHUT_RDWR)
ConnectionResetError: [WinError 10054]      
2026-01-01 23:52:41,304 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:52:41,305 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:52:41,305 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:52:41,305 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:52:41,392 [INFO] __main__: api started
2026-01-01 23:52:41,588 [INFO] db: DB initialized (create_all done)
2026-01-01 23:52:41,589 [INFO] db: DB initialized (create_all done)
2026-01-01 23:52:41,801 [INFO] app.bot: bot started
2026-01-01 23:52:41,801 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:52:41,803 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 29238.2s
2026-01-01 23:52:41,964 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:53:08,178 [INFO] aiogram.event: Update id=99610285 is handled. Duration 187 ms by bot id=8308846710
2026-01-01 23:53:09,888 [INFO] aiogram.event: Update id=99610286 is handled. Duration 109 ms by bot id=8308846710
2026-01-01 23:53:13,313 [INFO] aiogram.event: Update id=99610287 is handled. Duration 78 ms by bot id=8308846710
2026-01-01 23:53:14,649 [INFO] aiogram.event: Update id=99610288 is handled. Duration 62 ms by bot id=8308846710
2026-01-01 23:53:22,802 [INFO] aiogram.dispatcher: Polling stopped
2026-01-01 23:53:22,802 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-01 23:53:22,803 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-01 23:53:22,803 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-01 23:53:22,804 [ERROR] sqlalchemy.pool.impl.AsyncAdaptedQueuePool: Exception closing connection <AdaptedConnection <asyncpg.connection.Connection object at 0x00000158BCA2DB70>>
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 583, in start_polling
    done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\tasks.py", line 428, in wait
    return await _wait(fs, timeout, return_when, loop)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\tasks.py", line 535, in _wait
    await waiter
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\bot.py", line 70, in start_bot
    await dp.start_polling(bot, cfg=settings)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 599, in start_polling
    await asyncio.gather(*(bot.session.close() for bot in bots))
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 146, in close
    await self._session.close()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\client.py", line 1327, in close
    await self._connector.close()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1044, in close
    await super().close(abort_ssl=abort_ssl or self._ssl_shutdown_timeout == 0)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 136, in _wait_for_close
    async def _wait_for_close(waiters: List[Awaitable[object]]) -> None:
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\pool\base.py", line 374, in _close_connection
    self._dialect.do_close(connection)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 721, in do_close
    dbapi_connection.close()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 903, in close
    self.await_(self._connection.close())
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 1467, in close
    await self._protocol.close(timeout)
asyncio.exceptions.CancelledError
2026-01-01 23:53:22,826 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:53:22,827 [INFO] __main__: Shutdown complete
2026-01-01 23:57:19,099 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-01 23:57:19,100 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-01 23:57:19,100 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-01 23:57:19,100 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-01 23:57:19,197 [INFO] __main__: api started
2026-01-01 23:57:19,571 [INFO] db: DB initialized (create_all done)
2026-01-01 23:57:19,783 [INFO] app.bot: bot started
2026-01-01 23:57:19,783 [INFO] aiogram.dispatcher: Start polling
2026-01-01 23:57:19,785 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 28960.2s
2026-01-01 23:57:19,786 [INFO] db: DB initialized (create_all done)
2026-01-01 23:57:19,944 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-01 23:57:20,009 [INFO] aiogram.event: Update id=99610289 is not handled. Duration 0 ms by bot id=8308846710
2026-01-02 00:00:38,987 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 00:00:39,001 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:00:39,030 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 00:00:39,073 [INFO] __main__: Shutdown complete
2026-01-02 00:00:43,357 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-02 00:00:43,358 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-02 00:00:43,358 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-02 00:00:43,358 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-02 00:00:43,449 [INFO] __main__: api started
2026-01-02 00:00:43,670 [INFO] db: DB initialized (create_all done)
2026-01-02 00:00:43,881 [INFO] app.bot: bot started
2026-01-02 00:00:43,881 [INFO] aiogram.dispatcher: Start polling
2026-01-02 00:00:43,883 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 28756.1s
2026-01-02 00:00:43,884 [INFO] db: DB initialized (create_all done)
2026-01-02 00:00:44,040 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:00:44,269 [INFO] aiogram.event: Update id=99610290 is handled. Duration 171 ms by bot id=8308846710
2026-01-02 00:00:46,642 [INFO] aiogram.event: Update id=99610291 is handled. Duration 62 ms by bot id=8308846710
2026-01-02 00:00:48,933 [INFO] aiogram.event: Update id=99610292 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 00:00:50,718 [INFO] aiogram.event: Update id=99610293 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 00:00:51,582 [INFO] aiogram.event: Update id=99610294 is handled. Duration 92 ms by bot id=8308846710
2026-01-02 00:00:57,315 [INFO] aiogram.event: Update id=99610295 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 00:00:58,626 [INFO] aiogram.event: Update id=99610296 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 00:00:59,668 [INFO] aiogram.event: Update id=99610297 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:01:00,702 [INFO] aiogram.event: Update id=99610298 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:01:03,396 [INFO] aiogram.event: Update id=99610299 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:01:11,184 [INFO] aiogram.event: Update id=99610300 is handled. Duration 437 ms by bot id=8308846710
2026-01-02 00:01:13,756 [INFO] aiogram.event: Update id=99610301 is handled. Duration 62 ms by bot id=8308846710
2026-01-02 00:01:22,991 [INFO] aiogram.event: Update id=99610302 is handled. Duration 171 ms by bot id=8308846710
2026-01-02 00:01:58,321 [INFO] aiogram.event: Update id=99610303 is handled. Duration 94 ms by bot id=8308846710
2026-01-02 00:02:00,084 [INFO] aiogram.event: Update id=99610304 is handled. Duration 92 ms by bot id=8308846710
2026-01-02 00:02:03,176 [INFO] aiogram.event: Update id=99610305 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:02:04,830 [INFO] aiogram.event: Update id=99610306 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 00:02:07,552 [INFO] aiogram.event: Update id=99610307 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:02:09,296 [INFO] aiogram.event: Update id=99610308 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 00:02:12,013 [INFO] aiogram.event: Update id=99610309 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:02:12,863 [INFO] aiogram.event: Update id=99610310 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 00:02:16,151 [INFO] aiogram.event: Update id=99610311 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 00:02:18,400 [INFO] aiogram.event: Update id=99610312 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 00:02:20,725 [INFO] aiogram.event: Update id=99610313 is handled. Duration 203 ms by bot id=8308846710
2026-01-02 00:02:22,655 [INFO] aiogram.event: Update id=99610314 is handled. Duration 203 ms by bot id=8308846710
2026-01-02 00:02:25,661 [INFO] aiogram.event: Update id=99610315 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:02:27,205 [INFO] aiogram.event: Update id=99610316 is handled. Duration 155 ms by bot id=8308846710
2026-01-02 00:02:28,674 [INFO] aiogram.event: Update id=99610317 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:02:31,658 [INFO] aiogram.event: Update id=99610318 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 00:02:33,900 [INFO] aiogram.event: Update id=99610319 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 00:02:40,118 [INFO] aiogram.event: Update id=99610320 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 00:02:42,800 [INFO] aiogram.event: Update id=99610321 is handled. Duration 108 ms by bot id=8308846710
2026-01-02 00:02:44,705 [INFO] aiogram.event: Update id=99610322 is handled. Duration 155 ms by bot id=8308846710
2026-01-02 00:04:27,363 [INFO] aiogram.event: Update id=99610323 is handled. Duration 94 ms by bot id=8308846710
2026-01-02 00:04:31,650 [INFO] aiogram.event: Update id=99610324 is handled. Duration 234 ms by bot id=8308846710
2026-01-02 00:04:33,293 [INFO] aiogram.event: Update id=99610325 is handled. Duration 187 ms by bot id=8308846710
2026-01-02 00:04:34,562 [INFO] aiogram.event: Update id=99610326 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 00:04:35,404 [INFO] aiogram.event: Update id=99610327 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:04:36,493 [INFO] aiogram.event: Update id=99610328 is handled. Duration 312 ms by bot id=8308846710
2026-01-02 00:05:16,895 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 00:05:16,896 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 00:05:16,897 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-02 00:05:16,898 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-02 00:05:16,900 [INFO] __main__: Shutdown complete
2026-01-02 00:05:16,900 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:06:41,318 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-02 00:06:41,318 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-02 00:06:41,318 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-02 00:06:41,318 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-02 00:06:41,385 [INFO] __main__: api started
2026-01-02 00:06:41,567 [INFO] db: DB initialized (create_all done)
2026-01-02 00:06:41,755 [INFO] app.bot: bot started
2026-01-02 00:06:41,756 [INFO] aiogram.dispatcher: Start polling
2026-01-02 00:06:41,757 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 28398.2s
2026-01-02 00:06:41,761 [INFO] db: DB initialized (create_all done)
2026-01-02 00:06:41,903 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:06:42,172 [INFO] aiogram.event: Update id=99610330 is handled. Duration 219 ms by bot id=8308846710
2026-01-02 00:06:42,235 [INFO] aiogram.event: Update id=99610329 is handled. Duration 282 ms by bot id=8308846710
2026-01-02 00:06:48,832 [INFO] aiogram.event: Update id=99610331 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 00:10:26,516 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 00:10:26,517 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:10:26,517 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 00:10:26,528 [INFO] __main__: Shutdown complete
2026-01-02 00:49:43,073 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-02 00:49:43,074 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-02 00:49:43,074 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-02 00:49:43,074 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-02 00:49:43,146 [INFO] __main__: api started
2026-01-02 00:49:43,334 [INFO] db: DB initialized (create_all done)
2026-01-02 00:49:43,521 [INFO] app.bot: bot started
2026-01-02 00:49:43,521 [INFO] aiogram.dispatcher: Start polling
2026-01-02 00:49:43,522 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 25816.5s
2026-01-02 00:49:43,524 [INFO] db: DB initialized (create_all done)
2026-01-02 00:49:43,680 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:49:58,982 [INFO] aiogram.event: Update id=99610332 is handled. Duration 188 ms by bot id=8308846710
2026-01-02 00:50:04,039 [INFO] aiogram.event: Update id=99610333 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 00:50:11,926 [INFO] aiogram.event: Update id=99610334 is handled. Duration 61 ms by bot id=8308846710
2026-01-02 00:50:16,799 [INFO] aiogram.event: Update id=99610335 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 00:50:29,148 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 00:50:29,149 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:50:29,149 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 00:50:29,151 [INFO] __main__: Shutdown complete
2026-01-02 00:56:10,529 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-02 00:56:10,529 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-02 00:56:10,529 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-02 00:56:10,529 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-02 00:56:10,602 [INFO] __main__: api started
2026-01-02 00:56:10,792 [INFO] db: DB initialized (create_all done)
2026-01-02 00:56:10,795 [INFO] db: DB initialized (create_all done)
2026-01-02 00:56:10,986 [INFO] app.bot: bot started
2026-01-02 00:56:10,986 [INFO] aiogram.dispatcher: Start polling
2026-01-02 00:56:10,988 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 25429.0s
2026-01-02 00:56:11,135 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:56:54,034 [INFO] aiogram.event: Update id=99610336 is handled. Duration 170 ms by bot id=8308846710
2026-01-02 00:56:58,619 [INFO] aiogram.event: Update id=99610337 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 00:57:00,690 [INFO] aiogram.event: Update id=99610338 is handled. Duration 62 ms by bot id=8308846710
2026-01-02 00:57:02,088 [INFO] aiogram.event: Update id=99610339 is handled. Duration 156 ms by bot id=8308846710
2026-01-02 00:57:03,233 [INFO] aiogram.event: Update id=99610340 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 00:57:08,358 [INFO] aiogram.event: Update id=99610341 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:57:10,940 [INFO] aiogram.event: Update id=99610342 is handled. Duration 171 ms by bot id=8308846710
2026-01-02 00:57:12,269 [INFO] aiogram.event: Update id=99610343 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:57:15,600 [INFO] aiogram.event: Update id=99610344 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:57:17,293 [INFO] aiogram.event: Update id=99610345 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 00:57:20,280 [INFO] aiogram.event: Update id=99610346 is handled. Duration 139 ms by bot id=8308846710
2026-01-02 00:57:22,392 [INFO] aiogram.event: Update id=99610347 is handled. Duration 63 ms by bot id=8308846710
2026-01-02 00:57:27,745 [INFO] aiogram.event: Update id=99610348 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 00:57:29,732 [INFO] aiogram.event: Update id=99610349 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 00:57:32,922 [INFO] aiogram.event: Update id=99610350 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 00:57:36,297 [INFO] aiogram.event: Update id=99610351 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:57:37,812 [INFO] aiogram.event: Update id=99610352 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 00:57:39,275 [INFO] aiogram.event: Update id=99610353 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:57:40,675 [INFO] aiogram.event: Update id=99610354 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 00:57:41,889 [INFO] aiogram.event: Update id=99610355 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 00:57:51,545 [INFO] aiogram.event: Update id=99610356 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 00:57:52,969 [INFO] aiogram.event: Update id=99610357 is handled. Duration 188 ms by bot id=8308846710
2026-01-02 00:57:54,685 [INFO] aiogram.event: Update id=99610358 is handled. Duration 407 ms by bot id=8308846710
2026-01-02 00:58:09,210 [INFO] aiogram.event: Update id=99610359 is handled. Duration 547 ms by bot id=8308846710
2026-01-02 00:58:14,864 [INFO] aiogram.event: Update id=99610360 is handled. Duration 547 ms by bot id=8308846710
2026-01-02 00:58:39,473 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 00:58:39,473 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 00:58:39,474 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 00:58:39,476 [INFO] __main__: Shutdown complete
2026-01-02 01:12:24,882 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-02 01:12:24,882 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-02 01:12:24,882 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-02 01:12:24,882 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-02 01:12:24,954 [INFO] __main__: api started
2026-01-02 01:12:25,144 [INFO] db: DB initialized (create_all done)
2026-01-02 01:12:25,335 [INFO] app.bot: bot started
2026-01-02 01:12:25,336 [INFO] aiogram.dispatcher: Start polling
2026-01-02 01:12:25,337 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 24454.7s
2026-01-02 01:12:25,339 [INFO] db: DB initialized (create_all done)
2026-01-02 01:12:25,484 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 01:12:30,775 [INFO] aiogram.event: Update id=99610361 is handled. Duration 672 ms by bot id=8308846710
2026-01-02 01:12:33,239 [INFO] aiogram.event: Update id=99610362 is handled. Duration 79 ms by bot id=8308846710
2026-01-02 01:12:34,673 [INFO] aiogram.event: Update id=99610363 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:12:37,942 [INFO] aiogram.event: Update id=99610364 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:12:39,959 [INFO] aiogram.event: Update id=99610365 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 01:12:40,852 [INFO] aiogram.event: Update id=99610366 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 01:12:42,225 [INFO] aiogram.event: Update id=99610367 is handled. Duration 108 ms by bot id=8308846710
2026-01-02 01:12:51,065 [INFO] aiogram.event: Update id=99610368 is handled. Duration 109 ms by bot id=8308846710
2026-01-02 01:12:54,319 [INFO] aiogram.event: Update id=99610369 is handled. Duration 171 ms by bot id=8308846710
2026-01-02 01:12:56,798 [INFO] aiogram.event: Update id=99610370 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:12:58,592 [INFO] aiogram.event: Update id=99610371 is handled. Duration 156 ms by bot id=8308846710
2026-01-02 01:13:00,294 [INFO] aiogram.event: Update id=99610372 is handled. Duration 171 ms by bot id=8308846710
2026-01-02 01:13:06,003 [INFO] aiogram.event: Update id=99610373 is handled. Duration 172 ms by bot id=8308846710
2026-01-02 01:13:07,548 [INFO] aiogram.event: Update id=99610374 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:13:09,668 [INFO] aiogram.event: Update id=99610375 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:13:10,774 [INFO] aiogram.event: Update id=99610376 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:13:13,815 [INFO] aiogram.event: Update id=99610377 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:13:19,664 [INFO] aiogram.event: Update id=99610378 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:13:22,778 [INFO] aiogram.event: Update id=99610379 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:13:25,288 [INFO] aiogram.event: Update id=99610380 is handled. Duration 155 ms by bot id=8308846710
2026-01-02 01:13:26,962 [INFO] aiogram.event: Update id=99610381 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:13:30,574 [INFO] aiogram.event: Update id=99610382 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:13:31,458 [INFO] aiogram.event: Update id=99610383 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:13:32,931 [INFO] aiogram.event: Update id=99610384 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:13:34,005 [INFO] aiogram.event: Update id=99610385 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 01:13:35,277 [INFO] aiogram.event: Update id=99610386 is handled. Duration 92 ms by bot id=8308846710
2026-01-02 01:13:53,541 [INFO] aiogram.event: Update id=99610387 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:13:54,966 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 01:13:54,966 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 01:13:54,967 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-02 01:13:54,967 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-02 01:13:54,970 [INFO] __main__: Shutdown complete
2026-01-02 01:13:54,971 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 01:13:59,196 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-02 01:13:59,196 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-02 01:13:59,196 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-02 01:13:59,197 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-02 01:13:59,263 [INFO] __main__: api started
2026-01-02 01:13:59,448 [INFO] db: DB initialized (create_all done)
2026-01-02 01:13:59,636 [INFO] app.bot: bot started
2026-01-02 01:13:59,637 [INFO] aiogram.dispatcher: Start polling
2026-01-02 01:13:59,638 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-02T08:00:00+02:00 (Europe/Kyiv), sleep 24360.4s
2026-01-02 01:13:59,641 [INFO] db: DB initialized (create_all done)
2026-01-02 01:13:59,781 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 01:14:20,207 [INFO] aiogram.event: Update id=99610388 is handled. Duration 202 ms by bot id=8308846710
2026-01-02 01:14:20,983 [INFO] aiogram.event: Update id=99610389 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 01:14:21,800 [INFO] aiogram.event: Update id=99610390 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 01:14:22,466 [INFO] aiogram.event: Update id=99610391 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 01:14:26,673 [INFO] aiogram.event: Update id=99610392 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:14:27,581 [INFO] aiogram.event: Update id=99610393 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 01:14:28,861 [INFO] aiogram.event: Update id=99610394 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:14:30,504 [INFO] aiogram.event: Update id=99610395 is handled. Duration 500 ms by bot id=8308846710
2026-01-02 01:14:33,408 [INFO] aiogram.event: Update id=99610396 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:14:34,445 [INFO] aiogram.event: Update id=99610397 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:14:38,400 [INFO] aiogram.event: Update id=99610398 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 01:14:41,081 [INFO] aiogram.event: Update id=99610399 is handled. Duration 92 ms by bot id=8308846710
2026-01-02 01:14:42,897 [INFO] aiogram.event: Update id=99610400 is handled. Duration 94 ms by bot id=8308846710
2026-01-02 01:14:45,028 [INFO] aiogram.event: Update id=99610401 is handled. Duration 92 ms by bot id=8308846710
2026-01-02 01:14:46,363 [INFO] aiogram.event: Update id=99610402 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:14:48,527 [INFO] aiogram.event: Update id=99610403 is handled. Duration 139 ms by bot id=8308846710
2026-01-02 01:14:51,543 [INFO] aiogram.event: Update id=99610404 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:14:56,152 [INFO] aiogram.event: Update id=99610405 is handled. Duration 264 ms by bot id=8308846710
2026-01-02 01:14:58,267 [INFO] aiogram.event: Update id=99610406 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:14:59,640 [INFO] aiogram.event: Update id=99610407 is handled. Duration 156 ms by bot id=8308846710
2026-01-02 01:15:01,552 [INFO] aiogram.event: Update id=99610408 is handled. Duration 436 ms by bot id=8308846710
2026-01-02 01:15:12,273 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 144, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2026-01-02 01:15:12,663 [INFO] aiogram.event: Update id=99610409 is handled. Duration 530 ms by bot id=8308846710
2026-01-02 01:16:13,992 [INFO] aiogram.event: Update id=99610410 is handled. Duration 79 ms by bot id=8308846710
2026-01-02 01:16:15,457 [INFO] aiogram.event: Update id=99610411 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:16:16,715 [INFO] aiogram.event: Update id=99610412 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:16:19,762 [INFO] aiogram.event: Update id=99610413 is handled. Duration 1297 ms by bot id=8308846710
2026-01-02 01:16:23,513 [INFO] aiogram.event: Update id=99610414 is handled. Duration 94 ms by bot id=8308846710
2026-01-02 01:16:24,865 [INFO] aiogram.event: Update id=99610415 is handled. Duration 93 ms by bot id=8308846710
2026-01-02 01:16:28,263 [INFO] aiogram.event: Update id=99610416 is handled. Duration 485 ms by bot id=8308846710
2026-01-02 01:16:33,324 [INFO] aiogram.event: Update id=99610417 is handled. Duration 483 ms by bot id=8308846710
2026-01-02 01:16:36,184 [INFO] aiogram.event: Update id=99610418 is handled. Duration 157 ms by bot id=8308846710
2026-01-02 01:16:39,422 [INFO] aiogram.event: Update id=99610419 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:16:40,512 [INFO] aiogram.event: Update id=99610420 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:16:42,486 [INFO] aiogram.event: Update id=99610421 is handled. Duration 593 ms by bot id=8308846710
2026-01-02 01:16:48,551 [INFO] aiogram.event: Update id=99610422 is handled. Duration 108 ms by bot id=8308846710
2026-01-02 01:16:50,329 [INFO] aiogram.event: Update id=99610423 is handled. Duration 640 ms by bot id=8308846710
2026-01-02 01:17:04,308 [INFO] aiogram.event: Update id=99610424 is handled. Duration 532 ms by bot id=8308846710
2026-01-02 01:17:14,565 [INFO] aiogram.event: Update id=99610425 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:17:16,063 [INFO] aiogram.event: Update id=99610426 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:17:17,384 [INFO] aiogram.event: Update id=99610427 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:17:19,318 [INFO] aiogram.event: Update id=99610428 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:17:30,203 [INFO] aiogram.event: Update id=99610429 is handled. Duration 77 ms by bot id=8308846710
2026-01-02 01:17:31,467 [INFO] aiogram.event: Update id=99610430 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:17:32,756 [INFO] aiogram.event: Update id=99610431 is handled. Duration 78 ms by bot id=8308846710
2026-01-02 01:17:38,142 [INFO] aiogram.event: Update id=99610432 is handled. Duration 547 ms by bot id=8308846710
2026-01-02 01:17:46,637 [INFO] aiogram.event: Update id=99610433 is handled. Duration 94 ms by bot id=8308846710
2026-01-02 01:17:47,957 [INFO] aiogram.event: Update id=99610434 is handled. Duration 311 ms by bot id=8308846710
2026-01-02 01:17:49,522 [INFO] aiogram.event: Update id=99610435 is handled. Duration 156 ms by bot id=8308846710
2026-01-02 01:17:52,500 [INFO] aiogram.event: Update id=99610436 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 01:17:59,650 [INFO] aiogram.event: Update id=99610437 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:18:01,626 [INFO] aiogram.event: Update id=99610438 is handled. Duration 140 ms by bot id=8308846710
2026-01-02 01:18:16,533 [INFO] aiogram.event: Update id=99610439 is handled. Duration 139 ms by bot id=8308846710
2026-01-02 01:18:18,740 [INFO] aiogram.event: Update id=99610440 is handled. Duration 125 ms by bot id=8308846710
2026-01-02 01:18:20,037 [INFO] aiogram.event: Update id=99610441 is handled. Duration 139 ms by bot id=8308846710
2026-01-02 01:18:21,701 [INFO] aiogram.event: Update id=99610442 is handled. Duration 92 ms by bot id=8308846710
2026-01-02 01:18:47,084 [INFO] aiogram.event: Update id=99610443 is handled. Duration 656 ms by bot id=8308846710
2026-01-02 01:19:07,876 [INFO] aiogram.event: Update id=99610444 is handled. Duration 625 ms by bot id=8308846710
2026-01-02 01:19:40,449 [INFO] aiogram.event: Update id=99610445 is handled. Duration 422 ms by bot id=8308846710
2026-01-02 01:19:41,488 [INFO] aiogram.event: Update id=99610446 is handled. Duration 141 ms by bot id=8308846710
2026-01-02 01:19:42,594 [INFO] aiogram.event: Update id=99610447 is handled. Duration 172 ms by bot id=8308846710
2026-01-02 01:20:58,366 [INFO] aiogram.event: Update id=99610448 is handled. Duration 79 ms by bot id=8308846710
2026-01-02 01:21:22,911 [INFO] aiogram.dispatcher: Polling stopped
2026-01-02 01:21:22,912 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-02 01:21:22,913 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-02 01:21:22,915 [INFO] __main__: Shutdown complete
2026-01-03 20:42:31,053 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 20:42:31,053 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 20:42:31,053 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 20:42:31,053 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 20:42:31,143 [INFO] __main__: api started
2026-01-03 20:42:31,352 [INFO] db: DB initialized (create_all done)
2026-01-03 20:42:31,554 [INFO] app.bot: bot started
2026-01-03 20:42:31,554 [INFO] aiogram.dispatcher: Start polling
2026-01-03 20:42:31,554 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 40648.4s
2026-01-03 20:42:31,554 [INFO] db: DB initialized (create_all done)
2026-01-03 20:42:31,729 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 20:42:31,992 [INFO] aiogram.event: Update id=99610449 is handled. Duration 218 ms by bot id=8308846710
2026-01-03 20:43:44,851 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 20:43:44,853 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 20:43:44,853 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 20:43:44,855 [INFO] __main__: Shutdown complete
2026-01-03 20:44:21,932 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 20:44:21,933 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 20:44:21,933 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 20:44:21,933 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 20:44:21,998 [INFO] __main__: api started
2026-01-03 20:44:22,170 [INFO] db: DB initialized (create_all done)
2026-01-03 20:44:22,172 [INFO] db: DB initialized (create_all done)
2026-01-03 20:44:22,358 [INFO] app.bot: bot started
2026-01-03 20:44:22,359 [INFO] aiogram.dispatcher: Start polling
2026-01-03 20:44:22,360 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 40537.6s
2026-01-03 20:44:22,510 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 20:44:22,873 [INFO] aiogram.event: Update id=99610450 is handled. Duration 312 ms by bot id=8308846710
2026-01-03 20:44:22,899 [INFO] aiogram.event: Update id=99610451 is handled. Duration 343 ms by bot id=8308846710
2026-01-03 20:44:24,905 [INFO] aiogram.event: Update id=99610452 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 20:44:26,309 [INFO] aiogram.event: Update id=99610453 is handled. Duration 281 ms by bot id=8308846710
2026-01-03 20:44:32,182 [INFO] aiogram.event: Update id=99610454 is handled. Duration 203 ms by bot id=8308846710
2026-01-03 20:44:34,697 [INFO] aiogram.event: Update id=99610455 is handled. Duration 187 ms by bot id=8308846710
2026-01-03 20:44:38,533 [INFO] aiogram.event: Update id=99610456 is handled. Duration 172 ms by bot id=8308846710
2026-01-03 20:44:39,651 [INFO] aiogram.event: Update id=99610457 is handled. Duration 156 ms by bot id=8308846710
2026-01-03 20:44:41,805 [INFO] aiogram.event: Update id=99610458 is handled. Duration 312 ms by bot id=8308846710
2026-01-03 20:44:44,288 [INFO] aiogram.event: Update id=99610459 is handled. Duration 139 ms by bot id=8308846710
2026-01-03 20:48:15,720 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 20:48:15,720 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 20:48:15,721 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-03 20:48:15,721 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-03 20:48:15,725 [INFO] __main__: Shutdown complete
2026-01-03 20:48:15,726 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:28:39,477 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 21:28:39,478 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 21:28:39,478 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 21:28:39,478 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 21:28:39,544 [INFO] __main__: api started
2026-01-03 21:28:39,723 [INFO] db: DB initialized (create_all done)
2026-01-03 21:28:39,911 [INFO] app.bot: bot started
2026-01-03 21:28:39,912 [INFO] aiogram.dispatcher: Start polling
2026-01-03 21:28:39,913 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 37880.1s
2026-01-03 21:28:39,913 [INFO] db: DB initialized (create_all done)
2026-01-03 21:28:40,079 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:28:49,337 [INFO] aiogram.event: Update id=99610460 is handled. Duration 202 ms by bot id=8308846710
2026-01-03 21:28:51,158 [INFO] aiogram.event: Update id=99610461 is handled. Duration 203 ms by bot id=8308846710
2026-01-03 21:28:52,445 [INFO] aiogram.event: Update id=99610462 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:28:54,057 [INFO] aiogram.event: Update id=99610463 is handled. Duration 156 ms by bot id=8308846710
2026-01-03 21:28:55,109 [INFO] aiogram.event: Update id=99610464 is handled. Duration 202 ms by bot id=8308846710
2026-01-03 21:28:56,169 [INFO] aiogram.event: Update id=99610465 is handled. Duration 187 ms by bot id=8308846710
2026-01-03 21:28:57,931 [INFO] aiogram.event: Update id=99610466 is handled. Duration 406 ms by bot id=8308846710
2026-01-03 21:28:59,156 [INFO] aiogram.event: Update id=99610467 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:29:09,337 [INFO] aiogram.event: Update id=99610468 is handled. Duration 186 ms by bot id=8308846710
2026-01-03 21:29:10,827 [INFO] aiogram.event: Update id=99610469 is handled. Duration 140 ms by bot id=8308846710
2026-01-03 21:29:12,747 [INFO] aiogram.event: Update id=99610470 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:29:15,262 [INFO] aiogram.event: Update id=99610471 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:29:16,918 [INFO] aiogram.event: Update id=99610472 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:29:20,527 [INFO] aiogram.event: Update id=99610473 is handled. Duration 203 ms by bot id=8308846710
2026-01-03 21:29:24,208 [INFO] aiogram.event: Update id=99610474 is handled. Duration 718 ms by bot id=8308846710
2026-01-03 21:29:25,445 [INFO] aiogram.event: Update id=99610475 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:29:28,942 [INFO] aiogram.event: Update id=99610476 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:29:30,860 [INFO] aiogram.event: Update id=99610477 is handled. Duration 156 ms by bot id=8308846710
2026-01-03 21:29:33,541 [INFO] aiogram.event: Update id=99610478 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:29:35,711 [INFO] aiogram.event: Update id=99610479 is handled. Duration 233 ms by bot id=8308846710
2026-01-03 21:29:36,553 [INFO] aiogram.event: Update id=99610480 is handled. Duration 94 ms by bot id=8308846710
2026-01-03 21:29:38,510 [INFO] aiogram.event: Update id=99610481 is handled. Duration 250 ms by bot id=8308846710
2026-01-03 21:29:39,404 [INFO] aiogram.event: Update id=99610482 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:29:41,244 [INFO] aiogram.event: Update id=99610483 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:29:43,773 [INFO] aiogram.event: Update id=99610484 is handled. Duration 188 ms by bot id=8308846710
2026-01-03 21:29:46,800 [INFO] aiogram.event: Update id=99610485 is handled. Duration 156 ms by bot id=8308846710
2026-01-03 21:29:48,987 [INFO] aiogram.event: Update id=99610486 is handled. Duration 218 ms by bot id=8308846710
2026-01-03 21:29:51,156 [INFO] aiogram.event: Update id=99610487 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:29:52,810 [INFO] aiogram.event: Update id=99610488 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:29:57,245 [INFO] aiogram.event: Update id=99610489 is handled. Duration 157 ms by bot id=8308846710
2026-01-03 21:29:58,658 [INFO] aiogram.event: Update id=99610490 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:30:00,632 [INFO] aiogram.event: Update id=99610491 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:30:08,972 [INFO] aiogram.event: Update id=99610492 is handled. Duration 577 ms by bot id=8308846710
2026-01-03 21:30:13,739 [INFO] aiogram.event: Update id=99610493 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:30:14,376 [INFO] aiogram.event: Update id=99610494 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:30:14,901 [INFO] aiogram.event: Update id=99610495 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:31:02,060 [INFO] aiogram.event: Update id=99610496 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:31:02,806 [INFO] aiogram.event: Update id=99610497 is handled. Duration 219 ms by bot id=8308846710
2026-01-03 21:31:04,810 [INFO] aiogram.event: Update id=99610498 is handled. Duration 172 ms by bot id=8308846710
2026-01-03 21:31:12,797 [INFO] aiogram.event: Update id=99610499 is handled. Duration 171 ms by bot id=8308846710
2026-01-03 21:31:16,746 [INFO] aiogram.event: Update id=99610500 is handled. Duration 641 ms by bot id=8308846710
2026-01-03 21:31:17,853 [INFO] aiogram.event: Update id=99610501 is handled. Duration 156 ms by bot id=8308846710
2026-01-03 21:31:19,010 [INFO] aiogram.event: Update id=99610502 is handled. Duration 250 ms by bot id=8308846710
2026-01-03 21:31:20,231 [INFO] aiogram.event: Update id=99610503 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:31:22,511 [INFO] aiogram.event: Update id=99610504 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:31:24,782 [INFO] aiogram.event: Update id=99610505 is handled. Duration 516 ms by bot id=8308846710
2026-01-03 21:31:28,639 [INFO] aiogram.event: Update id=99610506 is handled. Duration 468 ms by bot id=8308846710
2026-01-03 21:31:29,695 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 144, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2026-01-03 21:31:30,261 [INFO] aiogram.event: Update id=99610507 is handled. Duration 797 ms by bot id=8308846710
2026-01-03 21:31:32,427 [INFO] aiogram.event: Update id=99610508 is handled. Duration 672 ms by bot id=8308846710
2026-01-03 21:31:35,354 [INFO] aiogram.event: Update id=99610509 is handled. Duration 577 ms by bot id=8308846710
2026-01-03 21:31:36,900 [ERROR] services.matching: Failed to send like notification
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\services\matching.py", line 144, in _send_like_notification
    await bot.send_photo(chat_id=to_user.tg_id, photo=photo_id, caption=text, reply_markup=kb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2026-01-03 21:31:37,485 [INFO] aiogram.event: Update id=99610510 is handled. Duration 750 ms by bot id=8308846710
2026-01-03 21:31:38,936 [INFO] aiogram.event: Update id=99610511 is handled. Duration 703 ms by bot id=8308846710
2026-01-03 21:32:30,099 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 21:32:30,099 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 21:32:30,100 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-03 21:32:30,100 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-03 21:32:30,103 [ERROR] sqlalchemy.pool.impl.AsyncAdaptedQueuePool: Exception closing connection <AdaptedConnection <asyncpg.connection.Connection object at 0x000001CB2262D5D0>>
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 583, in start_polling
    done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\tasks.py", line 428, in wait
    return await _wait(fs, timeout, return_when, loop)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\asyncio\tasks.py", line 535, in _wait
    await waiter
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\bot.py", line 70, in start_bot
    await dp.start_polling(bot, cfg=settings)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 599, in start_polling
    await asyncio.gather(*(bot.session.close() for bot in bots))
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 146, in close
    await self._session.close()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\client.py", line 1327, in close
    await self._connector.close()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 1044, in close
    await super().close(abort_ssl=abort_ssl or self._ssl_shutdown_timeout == 0)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiohttp\connector.py", line 136, in _wait_for_close
    async def _wait_for_close(waiters: List[Awaitable[object]]) -> None:
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\pool\base.py", line 374, in _close_connection
    self._dialect.do_close(connection)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 721, in do_close
    dbapi_connection.close()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 903, in close
    self.await_(self._connection.close())
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\connection.py", line 1467, in close
    await self._protocol.close(timeout)
asyncio.exceptions.CancelledError
2026-01-03 21:32:30,114 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:32:30,114 [INFO] __main__: Shutdown complete
2026-01-03 21:35:17,709 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 21:35:17,709 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 21:35:17,709 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 21:35:17,709 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 21:35:17,774 [INFO] __main__: api started
2026-01-03 21:35:17,933 [INFO] db: DB initialized (create_all done)
2026-01-03 21:35:18,122 [INFO] app.bot: bot started
2026-01-03 21:35:18,122 [INFO] aiogram.dispatcher: Start polling
2026-01-03 21:35:18,123 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 37481.9s
2026-01-03 21:35:18,161 [INFO] db: DB initialized (create_all done)
2026-01-03 21:35:18,281 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:35:18,522 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 75, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\browse.py", line 130, in browse_react
    await call.answer(" " if action == "like" else " ")
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2026-01-03 21:35:18,600 [INFO] aiogram.event: Update id=99610512 is not handled. Duration 281 ms by bot id=8308846710
2026-01-03 21:35:18,601 [ERROR] aiogram.event: Cause exception while process update id=99610512 by bot id=8308846710
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 75, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\browse.py", line 130, in browse_react
    await call.answer(" " if action == "like" else " ")
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\browse.py", line 130, in browse_react
    await call.answer(" " if action == "like" else " ")
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2026-01-03 21:35:23,196 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 21:35:23,196 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 21:35:23,197 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-03 21:35:23,197 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-03 21:35:23,199 [INFO] __main__: Shutdown complete
2026-01-03 21:35:23,199 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:35:26,851 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 21:35:26,852 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 21:35:26,852 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 21:35:26,852 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 21:35:26,916 [INFO] __main__: api started
2026-01-03 21:35:27,088 [INFO] db: DB initialized (create_all done)
2026-01-03 21:35:27,275 [INFO] app.bot: bot started
2026-01-03 21:35:27,275 [INFO] aiogram.dispatcher: Start polling
2026-01-03 21:35:27,276 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 37472.7s
2026-01-03 21:35:27,279 [INFO] db: DB initialized (create_all done)
2026-01-03 21:35:27,409 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:35:31,062 [INFO] aiogram.event: Update id=99610513 is handled. Duration 203 ms by bot id=8308846710
2026-01-03 21:35:33,009 [INFO] aiogram.event: Update id=99610514 is handled. Duration 983 ms by bot id=8308846710
2026-01-03 21:35:35,159 [INFO] aiogram.event: Update id=99610515 is handled. Duration 563 ms by bot id=8308846710
2026-01-03 21:36:12,503 [INFO] aiogram.event: Update id=99610516 is handled. Duration 62 ms by bot id=8308846710
2026-01-03 21:36:13,909 [INFO] aiogram.event: Update id=99610517 is handled. Duration 63 ms by bot id=8308846710
2026-01-03 21:36:17,945 [INFO] aiogram.event: Update id=99610518 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:36:20,423 [INFO] aiogram.event: Update id=99610519 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:36:21,952 [INFO] aiogram.event: Update id=99610520 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:36:22,851 [INFO] aiogram.event: Update id=99610521 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:36:25,203 [INFO] aiogram.event: Update id=99610522 is handled. Duration 250 ms by bot id=8308846710
2026-01-03 21:36:27,544 [INFO] aiogram.event: Update id=99610523 is handled. Duration 233 ms by bot id=8308846710
2026-01-03 21:36:28,893 [INFO] aiogram.event: Update id=99610524 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:36:31,649 [INFO] aiogram.event: Update id=99610525 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:36:39,188 [INFO] aiogram.event: Update id=99610526 is handled. Duration 250 ms by bot id=8308846710
2026-01-03 21:37:00,506 [INFO] aiogram.event: Update id=99610527 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:37:04,762 [INFO] aiogram.event: Update id=99610528 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:37:12,202 [ERROR] db: Ban check failed (db error)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.NotNullViolationError:  NULL   "settlement_type"  "users"   NOT NULL
DETAIL:     (10015, 1109508382, goldcha1n, goldcha1n, null, f, , 19, t, M, F, , , , , null, hromada, null, f, t, 2026-01-03 21:37:12.193542+02, ).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>:  NULL   "settlement_type"  "users"   NOT NULL
DETAIL:     (10015, 1109508382, goldcha1n, goldcha1n, null, f, , 19, t, M, F, , , , , null, hromada, null, f, t, 2026-01-03 21:37:12.193542+02, ).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\db.py", line 68, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\onboarding.py", line 453, in reg_photo
    await _finish_registration(message, state, session)
  File "C:\Python_Projects\dating_bot\handlers\onboarding.py", line 503, in _finish_registration
    await session.flush()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 787, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 4466, in _flush
    with util.safe_reraise():
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 4427, in _flush
    flush_context.execute()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>:  NULL   "settlement_type"  "users"   NOT NULL
DETAIL:     (10015, 1109508382, goldcha1n, goldcha1n, null, f, , 19, t, M, F, , , , , null, hromada, null, f, t, 2026-01-03 21:37:12.193542+02, ).
[SQL: INSERT INTO users (tg_id, username, first_name, last_name, is_banned, name, age, age_filter_enabled, gender, looking_for, city, region, district, hromada, settlement, search_scope, about, search_global, active) VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::BOOLEAN, $6::VARCHAR, $7::INTEGER, $8::BOOLEAN, $9::VARCHAR, $10::VARCHAR, $11::VARCHAR, $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::BOOLEAN, $19::BOOLEAN) RETURNING users.id, users.created_at]
[parameters: (1109508382, 'goldcha1n', 'goldcha1n', None, False, '', 19, True, 'M', 'F', '', '', '', '', '', 'hromada', None, False, True)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-01-03 21:37:12,218 [INFO] aiogram.event: Update id=99610529 is not handled. Duration 30 ms by bot id=8308846710
2026-01-03 21:37:12,218 [ERROR] aiogram.event: Cause exception while process update id=99610529 by bot id=8308846710
PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>:  NULL   "settlement_type"  "users"   NOT NULL
DETAIL:     (10015, 1109508382, goldcha1n, goldcha1n, null, f, , 19, t, M, F, , , , , null, hromada, null, f, t, 2026-01-03 21:37:12.193542+02, ).
[SQL: INSERT INTO users (tg_id, username, first_name, last_name, is_banned, name, age, age_filter_enabled, gender, looking_for, city, region, district, hromada, settlement, search_scope, about, search_global, active) VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::BOOLEAN, $6::VARCHAR, $7::INTEGER, $8::BOOLEAN, $9::VARCHAR, $10::VARCHAR, $11::VARCHAR, $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::BOOLEAN, $19::BOOLEAN) RETURNING users.id, users.created_at]
[parameters: (1109508382, 'goldcha1n', 'goldcha1n', None, False, '', 19, True, 'M', 'F', '', '', '', '', '', 'hromada', None, False, True)]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
Traceback (most recent call last):
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\db.py", line 78, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Python_Projects\dating_bot\handlers\onboarding.py", line 453, in reg_photo
    await _finish_registration(message, state, session)
  File "C:\Python_Projects\dating_bot\handlers\onboarding.py", line 503, in _finish_registration
    await session.flush()
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 787, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 4423, in _flush
    flush_context.transaction = transaction = self._autobegin_t()._begin()
                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _begin
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 101, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\sqlalchemy\orm\session.py", line 971, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>:  NULL   "settlement_type"  "users"   NOT NULL
DETAIL:     (10015, 1109508382, goldcha1n, goldcha1n, null, f, , 19, t, M, F, , , , , null, hromada, null, f, t, 2026-01-03 21:37:12.193542+02, ).
[SQL: INSERT INTO users (tg_id, username, first_name, last_name, is_banned, name, age, age_filter_enabled, gender, looking_for, city, region, district, hromada, settlement, search_scope, about, search_global, active) VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::BOOLEAN, $6::VARCHAR, $7::INTEGER, $8::BOOLEAN, $9::VARCHAR, $10::VARCHAR, $11::VARCHAR, $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::BOOLEAN, $19::BOOLEAN) RETURNING users.id, users.created_at]
[parameters: (1109508382, 'goldcha1n', 'goldcha1n', None, False, '', 19, True, 'M', 'F', '', '', '', '', '', 'hromada', None, False, True)]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2026-01-03 21:38:37,227 [INFO] aiogram.event: Update id=99610530 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:38:58,382 [INFO] aiogram.event: Update id=99610531 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:42:46,408 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 21:42:46,409 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 21:42:46,409 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-03 21:42:46,409 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-03 21:42:46,411 [INFO] __main__: Shutdown complete
2026-01-03 21:42:46,412 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:44:22,236 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 21:44:22,236 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 21:44:22,236 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 21:44:22,237 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 21:44:22,315 [INFO] __main__: api started
2026-01-03 21:44:22,502 [INFO] db: DB initialized (create_all done)
2026-01-03 21:44:22,505 [INFO] db: DB initialized (create_all done)
2026-01-03 21:44:22,703 [INFO] app.bot: bot started
2026-01-03 21:44:22,703 [INFO] aiogram.dispatcher: Start polling
2026-01-03 21:44:22,705 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 36937.3s
2026-01-03 21:44:22,858 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:44:27,665 [INFO] aiogram.event: Update id=99610532 is handled. Duration 203 ms by bot id=8308846710
2026-01-03 21:44:29,783 [INFO] aiogram.event: Update id=99610533 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:44:31,781 [INFO] aiogram.event: Update id=99610534 is handled. Duration 63 ms by bot id=8308846710
2026-01-03 21:44:33,033 [INFO] aiogram.event: Update id=99610535 is handled. Duration 110 ms by bot id=8308846710
2026-01-03 21:44:33,869 [INFO] aiogram.event: Update id=99610536 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:44:35,583 [INFO] aiogram.event: Update id=99610537 is handled. Duration 250 ms by bot id=8308846710
2026-01-03 21:44:36,897 [INFO] aiogram.event: Update id=99610538 is handled. Duration 203 ms by bot id=8308846710
2026-01-03 21:44:38,368 [INFO] aiogram.event: Update id=99610539 is handled. Duration 328 ms by bot id=8308846710
2026-01-03 21:44:39,697 [INFO] aiogram.event: Update id=99610540 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:44:42,442 [INFO] aiogram.event: Update id=99610541 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:44:46,744 [INFO] aiogram.event: Update id=99610542 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:44:49,322 [INFO] aiogram.event: Update id=99610543 is handled. Duration 62 ms by bot id=8308846710
2026-01-03 21:44:53,266 [INFO] aiogram.event: Update id=99610544 is handled. Duration 156 ms by bot id=8308846710
2026-01-03 21:44:55,752 [INFO] aiogram.event: Update id=99610545 is handled. Duration 157 ms by bot id=8308846710
2026-01-03 21:45:01,480 [INFO] aiogram.event: Update id=99610546 is handled. Duration 171 ms by bot id=8308846710
2026-01-03 21:45:03,283 [INFO] aiogram.event: Update id=99610547 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:45:04,489 [INFO] aiogram.event: Update id=99610548 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:45:05,814 [INFO] aiogram.event: Update id=99610549 is handled. Duration 172 ms by bot id=8308846710
2026-01-03 21:45:07,036 [INFO] aiogram.event: Update id=99610550 is handled. Duration 297 ms by bot id=8308846710
2026-01-03 21:45:08,190 [INFO] aiogram.event: Update id=99610551 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 21:45:13,855 [INFO] aiogram.event: Update id=99610552 is handled. Duration 437 ms by bot id=8308846710
2026-01-03 21:45:18,254 [INFO] aiogram.event: Update id=99610553 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:45:24,443 [INFO] aiogram.event: Update id=99610554 is handled. Duration 110 ms by bot id=8308846710
2026-01-03 21:47:02,749 [INFO] aiogram.event: Update id=99610555 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 21:47:13,349 [INFO] aiogram.event: Update id=99610556 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 21:47:21,934 [INFO] aiogram.event: Update id=99610557 is handled. Duration 141 ms by bot id=8308846710
2026-01-03 21:47:23,690 [INFO] aiogram.event: Update id=99610558 is handled. Duration 109 ms by bot id=8308846710
2026-01-03 21:47:26,782 [INFO] aiogram.event: Update id=99610559 is handled. Duration 422 ms by bot id=8308846710
2026-01-03 21:47:29,547 [INFO] aiogram.event: Update id=99610560 is handled. Duration 514 ms by bot id=8308846710
2026-01-03 21:47:31,720 [INFO] aiogram.event: Update id=99610561 is handled. Duration 108 ms by bot id=8308846710
2026-01-03 21:47:33,241 [INFO] aiogram.event: Update id=99610562 is handled. Duration 187 ms by bot id=8308846710
2026-01-03 21:50:26,389 [INFO] aiogram.event: Update id=99610563 is handled. Duration 139 ms by bot id=8308846710
2026-01-03 21:50:27,856 [INFO] aiogram.event: Update id=99610564 is handled. Duration 266 ms by bot id=8308846710
2026-01-03 21:50:29,881 [INFO] aiogram.event: Update id=99610565 is handled. Duration 172 ms by bot id=8308846710
2026-01-03 21:50:34,042 [INFO] aiogram.event: Update id=99610566 is handled. Duration 139 ms by bot id=8308846710
2026-01-03 21:50:52,827 [INFO] aiogram.event: Update id=99610567 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 21:51:15,071 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 21:51:15,072 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 21:51:15,073 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 21:51:15,081 [INFO] __main__: Shutdown complete
2026-01-03 23:06:30,052 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 23:06:30,053 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 23:06:30,053 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 23:06:30,053 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 23:06:30,135 [INFO] __main__: api started
2026-01-03 23:06:30,260 [INFO] db: DB initialized (create_all done)
2026-01-03 23:06:30,261 [INFO] db: DB initialized (create_all done)
2026-01-03 23:06:30,453 [INFO] app.bot: bot started
2026-01-03 23:06:30,453 [INFO] aiogram.dispatcher: Start polling
2026-01-03 23:06:30,454 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 32009.5s
2026-01-03 23:06:30,601 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:06:31,199 [INFO] aiogram.event: Update id=99610568 is handled. Duration 546 ms by bot id=8308846710
2026-01-03 23:08:11,265 [INFO] aiogram.event: Update id=99610569 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 23:08:13,199 [INFO] aiogram.event: Update id=99610570 is handled. Duration 110 ms by bot id=8308846710
2026-01-03 23:08:13,784 [INFO] aiogram.event: Update id=99610571 is handled. Duration 93 ms by bot id=8308846710
2026-01-03 23:08:15,730 [INFO] aiogram.event: Update id=99610572 is handled. Duration 171 ms by bot id=8308846710
2026-01-03 23:08:23,468 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-03 23:08:23,584 [INFO] aiogram.event: Update id=99610573 is handled. Duration 500 ms by bot id=8308846710
2026-01-03 23:08:55,582 [INFO] aiogram.event: Update id=99610574 is handled. Duration 62 ms by bot id=8308846710
2026-01-03 23:08:56,938 [INFO] aiogram.event: Update id=99610575 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 23:09:01,337 [INFO] aiogram.event: Update id=99610576 is handled. Duration 296 ms by bot id=8308846710
2026-01-03 23:09:08,464 [INFO] aiogram.event: Update id=99610577 is handled. Duration 77 ms by bot id=8308846710
2026-01-03 23:09:45,414 [INFO] aiogram.event: Update id=99610578 is handled. Duration 171 ms by bot id=8308846710
2026-01-03 23:09:50,634 [INFO] aiogram.event: Update id=99610579 is handled. Duration 281 ms by bot id=8308846710
2026-01-03 23:13:17,848 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 23:13:17,848 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:13:17,849 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 23:13:17,857 [INFO] __main__: Shutdown complete
2026-01-03 23:13:21,451 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 23:13:21,451 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 23:13:21,451 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 23:13:21,452 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 23:13:21,513 [INFO] __main__: api started
2026-01-03 23:13:21,622 [INFO] db: DB initialized (create_all done)
2026-01-03 23:13:21,809 [INFO] app.bot: bot started
2026-01-03 23:13:21,809 [INFO] aiogram.dispatcher: Start polling
2026-01-03 23:13:21,810 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 31598.2s
2026-01-03 23:13:21,813 [INFO] db: DB initialized (create_all done)
2026-01-03 23:13:21,964 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:13:34,744 [INFO] aiogram.event: Update id=99610580 is handled. Duration 312 ms by bot id=8308846710
2026-01-03 23:13:42,385 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-03 23:13:42,489 [INFO] aiogram.event: Update id=99610581 is handled. Duration 312 ms by bot id=8308846710
2026-01-03 23:14:35,084 [INFO] aiogram.event: Update id=99610582 is handled. Duration 311 ms by bot id=8308846710
2026-01-03 23:15:25,874 [INFO] aiogram.event: Update id=99610583 is handled. Duration 282 ms by bot id=8308846710
2026-01-03 23:15:33,103 [INFO] aiogram.event: Update id=99610584 is handled. Duration 296 ms by bot id=8308846710
2026-01-03 23:15:44,823 [INFO] aiogram.event: Update id=99610585 is handled. Duration 218 ms by bot id=8308846710
2026-01-03 23:15:56,490 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 23:15:56,491 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:15:56,491 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 23:15:56,499 [INFO] __main__: Shutdown complete
2026-01-03 23:16:14,510 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 23:16:14,511 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 23:16:14,511 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 23:16:14,511 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 23:16:14,575 [INFO] __main__: api started
2026-01-03 23:16:14,684 [INFO] db: DB initialized (create_all done)
2026-01-03 23:16:14,871 [INFO] app.bot: bot started
2026-01-03 23:16:14,872 [INFO] aiogram.dispatcher: Start polling
2026-01-03 23:16:14,873 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 31425.1s
2026-01-03 23:16:14,875 [INFO] db: DB initialized (create_all done)
2026-01-03 23:16:15,025 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:16:18,516 [INFO] aiogram.event: Update id=99610586 is handled. Duration 187 ms by bot id=8308846710
2026-01-03 23:16:21,102 [INFO] aiogram.event: Update id=99610587 is handled. Duration 171 ms by bot id=8308846710
2026-01-03 23:16:25,219 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-03 23:16:25,327 [INFO] aiogram.event: Update id=99610588 is handled. Duration 327 ms by bot id=8308846710
2026-01-03 23:16:35,836 [INFO] aiogram.event: Update id=99610589 is handled. Duration 264 ms by bot id=8308846710
2026-01-03 23:16:42,128 [INFO] aiogram.event: Update id=99610590 is handled. Duration 391 ms by bot id=8308846710
2026-01-03 23:16:51,315 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 23:16:51,316 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 23:16:51,316 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-03 23:16:51,316 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-03 23:16:51,318 [INFO] __main__: Shutdown complete
2026-01-03 23:16:51,319 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:17:00,547 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-03 23:17:00,547 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-03 23:17:00,547 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-03 23:17:00,548 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-03 23:17:00,611 [INFO] __main__: api started
2026-01-03 23:17:00,725 [INFO] db: DB initialized (create_all done)
2026-01-03 23:17:00,912 [INFO] app.bot: bot started
2026-01-03 23:17:00,912 [INFO] aiogram.dispatcher: Start polling
2026-01-03 23:17:00,913 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 31379.1s
2026-01-03 23:17:00,917 [INFO] db: DB initialized (create_all done)
2026-01-03 23:17:01,066 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:17:03,796 [INFO] aiogram.event: Update id=99610591 is handled. Duration 187 ms by bot id=8308846710
2026-01-03 23:17:05,014 [INFO] aiogram.event: Update id=99610592 is handled. Duration 202 ms by bot id=8308846710
2026-01-03 23:17:09,873 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-03 23:17:09,979 [INFO] aiogram.event: Update id=99610593 is handled. Duration 327 ms by bot id=8308846710
2026-01-03 23:17:23,180 [INFO] aiogram.event: Update id=99610594 is handled. Duration 359 ms by bot id=8308846710
2026-01-03 23:17:27,192 [INFO] aiogram.event: Update id=99610595 is handled. Duration 78 ms by bot id=8308846710
2026-01-03 23:17:29,375 [INFO] aiogram.event: Update id=99610596 is handled. Duration 125 ms by bot id=8308846710
2026-01-03 23:17:48,180 [INFO] aiogram.event: Update id=99610597 is handled. Duration 375 ms by bot id=8308846710
2026-01-03 23:18:00,757 [INFO] aiogram.dispatcher: Polling stopped
2026-01-03 23:18:00,757 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-03 23:18:00,758 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-03 23:18:00,766 [INFO] __main__: Shutdown complete
2026-01-04 01:27:45,916 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:27:45,916 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:27:45,916 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:27:45,917 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:27:45,983 [INFO] __main__: api started
2026-01-04 01:27:46,093 [INFO] db: DB initialized (create_all done)
2026-01-04 01:27:46,093 [INFO] db: DB initialized (create_all done)
2026-01-04 01:27:46,279 [INFO] app.bot: bot started
2026-01-04 01:27:46,280 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:27:46,281 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 23533.7s
2026-01-04 01:27:46,431 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:28:03,704 [INFO] aiogram.event: Update id=99610598 is not handled. Duration 0 ms by bot id=8308846710
2026-01-04 01:28:13,506 [INFO] aiogram.event: Update id=99610599 is handled. Duration 187 ms by bot id=8308846710
2026-01-04 01:28:15,062 [INFO] aiogram.event: Update id=99610600 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:28:16,466 [INFO] aiogram.event: Update id=99610601 is handled. Duration 155 ms by bot id=8308846710
2026-01-04 01:28:18,547 [INFO] aiogram.event: Update id=99610602 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:28:22,496 [INFO] aiogram.event: Update id=99610603 is handled. Duration 297 ms by bot id=8308846710
2026-01-04 01:28:29,925 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-04 01:28:30,040 [INFO] aiogram.event: Update id=99610604 is handled. Duration 843 ms by bot id=8308846710
2026-01-04 01:28:37,824 [INFO] aiogram.event: Update id=99610605 is handled. Duration 343 ms by bot id=8308846710
2026-01-04 01:28:42,220 [INFO] aiogram.event: Update id=99610606 is handled. Duration 280 ms by bot id=8308846710
2026-01-04 01:28:47,008 [INFO] aiogram.event: Update id=99610607 is handled. Duration 297 ms by bot id=8308846710
2026-01-04 01:28:50,456 [INFO] aiogram.event: Update id=99610608 is handled. Duration 360 ms by bot id=8308846710
2026-01-04 01:28:54,401 [INFO] aiogram.event: Update id=99610609 is handled. Duration 360 ms by bot id=8308846710
2026-01-04 01:29:03,983 [INFO] aiogram.event: Update id=99610610 is handled. Duration 77 ms by bot id=8308846710
2026-01-04 01:29:06,697 [INFO] aiogram.event: Update id=99610611 is handled. Duration 140 ms by bot id=8308846710
2026-01-04 01:29:10,595 [INFO] aiogram.event: Update id=99610612 is handled. Duration 296 ms by bot id=8308846710
2026-01-04 01:29:11,843 [INFO] aiogram.event: Update id=99610613 is handled. Duration 77 ms by bot id=8308846710
2026-01-04 01:29:17,186 [INFO] aiogram.event: Update id=99610614 is not handled. Duration 0 ms by bot id=8308846710
2026-01-04 01:29:19,130 [INFO] aiogram.event: Update id=99610615 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:29:22,237 [INFO] aiogram.event: Update id=99610616 is handled. Duration 296 ms by bot id=8308846710
2026-01-04 01:29:24,246 [INFO] aiogram.event: Update id=99610617 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 01:29:28,125 [INFO] aiogram.event: Update id=99610618 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:29:29,520 [INFO] aiogram.event: Update id=99610619 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:29:30,576 [INFO] aiogram.event: Update id=99610620 is handled. Duration 140 ms by bot id=8308846710
2026-01-04 01:29:32,077 [INFO] aiogram.event: Update id=99610621 is handled. Duration 62 ms by bot id=8308846710
2026-01-04 01:29:52,273 [INFO] aiogram.event: Update id=99610622 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:30:15,487 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:30:15,487 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:30:15,488 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 01:30:15,488 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 01:30:15,490 [INFO] __main__: Shutdown complete
2026-01-04 01:30:15,490 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:32:02,926 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:32:02,926 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:32:02,926 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:32:02,926 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:32:02,995 [INFO] __main__: api started
2026-01-04 01:32:03,118 [INFO] db: DB initialized (create_all done)
2026-01-04 01:32:03,120 [INFO] db: DB initialized (create_all done)
2026-01-04 01:32:03,311 [INFO] app.bot: bot started
2026-01-04 01:32:03,311 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:32:03,312 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 23276.7s
2026-01-04 01:32:03,456 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:33:14,485 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:33:14,485 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:33:14,486 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 01:33:14,486 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 01:33:14,488 [INFO] __main__: Shutdown complete
2026-01-04 01:33:14,489 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:35:44,696 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:35:44,697 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:35:44,697 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:35:44,697 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:35:44,764 [INFO] __main__: api started
2026-01-04 01:35:44,875 [INFO] db: DB initialized (create_all done)
2026-01-04 01:35:44,878 [INFO] db: DB initialized (create_all done)
2026-01-04 01:35:45,066 [INFO] app.bot: bot started
2026-01-04 01:35:45,066 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:35:45,068 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 23054.9s
2026-01-04 01:35:45,228 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:35:49,629 [INFO] aiogram.event: Update id=99610623 is handled. Duration 250 ms by bot id=8308846710
2026-01-04 01:35:53,490 [INFO] aiogram.event: Update id=99610624 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:35:56,253 [INFO] aiogram.event: Update id=99610625 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 01:35:57,802 [INFO] aiogram.event: Update id=99610626 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 01:35:58,843 [INFO] aiogram.event: Update id=99610627 is handled. Duration 108 ms by bot id=8308846710
2026-01-04 01:36:02,610 [INFO] aiogram.event: Update id=99610628 is handled. Duration 141 ms by bot id=8308846710
2026-01-04 01:36:04,748 [INFO] aiogram.event: Update id=99610629 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:36:23,174 [INFO] aiogram.event: Update id=99610630 is handled. Duration 281 ms by bot id=8308846710
2026-01-04 01:36:27,170 [INFO] aiogram.event: Update id=99610631 is handled. Duration 62 ms by bot id=8308846710
2026-01-04 01:36:36,983 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-04 01:36:37,094 [INFO] aiogram.event: Update id=99610632 is handled. Duration 452 ms by bot id=8308846710
2026-01-04 01:36:45,040 [INFO] aiogram.event: Update id=99610633 is handled. Duration 389 ms by bot id=8308846710
2026-01-04 01:36:50,199 [INFO] aiogram.event: Update id=99610634 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 01:36:52,331 [INFO] aiogram.event: Update id=99610635 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:36:57,881 [INFO] aiogram.event: Update id=99610636 is handled. Duration 327 ms by bot id=8308846710
2026-01-04 01:37:33,915 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:37:33,916 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:37:33,916 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:37:33,924 [INFO] __main__: Shutdown complete
2026-01-04 01:37:37,845 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:37:37,845 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:37:37,846 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:37:37,846 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:37:37,910 [INFO] __main__: api started
2026-01-04 01:37:38,019 [INFO] db: DB initialized (create_all done)
2026-01-04 01:37:38,021 [INFO] db: DB initialized (create_all done)
2026-01-04 01:37:38,211 [INFO] app.bot: bot started
2026-01-04 01:37:38,212 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:37:38,213 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 22941.8s
2026-01-04 01:37:38,356 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:38:53,834 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:38:53,834 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:38:53,834 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 01:38:53,835 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 01:38:53,837 [INFO] __main__: Shutdown complete
2026-01-04 01:38:53,837 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:38:57,618 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:38:57,618 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:38:57,618 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:38:57,618 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:38:57,684 [INFO] __main__: api started
2026-01-04 01:38:57,772 [INFO] db: DB initialized (create_all done)
2026-01-04 01:38:57,870 [INFO] db: DB initialized (create_all done)
2026-01-04 01:38:58,055 [INFO] app.bot: bot started
2026-01-04 01:38:58,055 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:38:58,056 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 22861.9s
2026-01-04 01:38:58,204 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:39:03,672 [INFO] aiogram.event: Update id=99610637 is handled. Duration 187 ms by bot id=8308846710
2026-01-04 01:39:13,030 [INFO] aiogram.event: Update id=99610638 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:39:14,533 [INFO] aiogram.event: Update id=99610639 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:39:18,737 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-04 01:39:18,853 [INFO] aiogram.event: Update id=99610640 is handled. Duration 406 ms by bot id=8308846710
2026-01-04 01:39:27,129 [INFO] aiogram.event: Update id=99610641 is handled. Duration 297 ms by bot id=8308846710
2026-01-04 01:40:02,907 [INFO] aiogram.event: Update id=99610642 is handled. Duration 313 ms by bot id=8308846710
2026-01-04 01:40:07,731 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:40:07,732 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:40:07,732 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:40:07,740 [INFO] __main__: Shutdown complete
2026-01-04 01:40:30,338 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:40:30,338 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:40:30,338 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:40:30,339 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:40:30,402 [INFO] __main__: api started
2026-01-04 01:40:30,509 [INFO] db: DB initialized (create_all done)
2026-01-04 01:40:30,512 [INFO] db: DB initialized (create_all done)
2026-01-04 01:40:30,699 [INFO] app.bot: bot started
2026-01-04 01:40:30,699 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:40:30,700 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 22769.3s
2026-01-04 01:40:30,851 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:40:35,206 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:40:35,206 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:40:35,207 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 01:40:35,207 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 01:40:35,209 [INFO] __main__: Shutdown complete
2026-01-04 01:51:52,369 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 01:51:52,369 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 01:51:52,369 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 01:51:52,369 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 01:51:52,436 [INFO] __main__: api started
2026-01-04 01:51:52,545 [INFO] db: DB initialized (create_all done)
2026-01-04 01:51:52,547 [INFO] db: DB initialized (create_all done)
2026-01-04 01:51:52,734 [INFO] app.bot: bot started
2026-01-04 01:51:52,734 [INFO] aiogram.dispatcher: Start polling
2026-01-04 01:51:52,735 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-04T08:00:00+02:00 (Europe/Kyiv), sleep 22087.3s
2026-01-04 01:51:52,875 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:51:52,935 [INFO] aiogram.event: Update id=99610643 is not handled. Duration 16 ms by bot id=8308846710
2026-01-04 01:51:53,103 [INFO] aiogram.event: Update id=99610644 is handled. Duration 187 ms by bot id=8308846710
2026-01-04 01:51:56,149 [INFO] aiogram.event: Update id=99610645 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:51:58,954 [INFO] aiogram.event: Update id=99610646 is handled. Duration 140 ms by bot id=8308846710
2026-01-04 01:52:15,345 [INFO] services.nsfw: NSFW detector loaded (NudeDetector)
2026-01-04 01:52:15,453 [INFO] aiogram.event: Update id=99610647 is handled. Duration 390 ms by bot id=8308846710
2026-01-04 01:52:17,042 [INFO] aiogram.event: Update id=99610648 is handled. Duration 139 ms by bot id=8308846710
2026-01-04 01:52:25,579 [INFO] aiogram.event: Update id=99610649 is not handled. Duration 0 ms by bot id=8308846710
2026-01-04 01:52:28,705 [INFO] aiogram.event: Update id=99610650 is handled. Duration 156 ms by bot id=8308846710
2026-01-04 01:52:29,698 [INFO] aiogram.event: Update id=99610651 is handled. Duration 187 ms by bot id=8308846710
2026-01-04 01:52:32,297 [INFO] aiogram.event: Update id=99610652 is handled. Duration 281 ms by bot id=8308846710
2026-01-04 01:52:33,542 [INFO] aiogram.event: Update id=99610653 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:52:35,079 [INFO] aiogram.event: Update id=99610654 is handled. Duration 110 ms by bot id=8308846710
2026-01-04 01:52:44,552 [INFO] aiogram.event: Update id=99610655 is handled. Duration 343 ms by bot id=8308846710
2026-01-04 01:52:51,440 [INFO] aiogram.event: Update id=99610656 is handled. Duration 344 ms by bot id=8308846710
2026-01-04 01:52:57,039 [INFO] aiogram.event: Update id=99610657 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:52:59,408 [INFO] aiogram.event: Update id=99610658 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:53:00,218 [INFO] aiogram.event: Update id=99610659 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:53:01,493 [INFO] aiogram.event: Update id=99610660 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:53:03,278 [INFO] aiogram.event: Update id=99610661 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 01:53:08,394 [INFO] aiogram.event: Update id=99610662 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:53:09,650 [INFO] aiogram.event: Update id=99610663 is handled. Duration 297 ms by bot id=8308846710
2026-01-04 01:53:11,184 [INFO] aiogram.event: Update id=99610664 is handled. Duration 109 ms by bot id=8308846710
2026-01-04 01:53:16,760 [INFO] aiogram.event: Update id=99610665 is handled. Duration 172 ms by bot id=8308846710
2026-01-04 01:53:21,757 [INFO] aiogram.event: Update id=99610666 is handled. Duration 250 ms by bot id=8308846710
2026-01-04 01:53:24,128 [INFO] aiogram.event: Update id=99610667 is handled. Duration 203 ms by bot id=8308846710
2026-01-04 01:53:27,872 [INFO] aiogram.event: Update id=99610668 is handled. Duration 750 ms by bot id=8308846710
2026-01-04 01:53:31,777 [INFO] aiogram.event: Update id=99610669 is handled. Duration 531 ms by bot id=8308846710
2026-01-04 01:53:33,445 [INFO] aiogram.event: Update id=99610670 is handled. Duration 77 ms by bot id=8308846710
2026-01-04 01:53:35,671 [INFO] aiogram.event: Update id=99610671 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:53:41,993 [INFO] aiogram.event: Update id=99610672 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 01:53:44,020 [INFO] aiogram.event: Update id=99610673 is handled. Duration 62 ms by bot id=8308846710
2026-01-04 01:53:53,741 [INFO] aiogram.event: Update id=99610674 is handled. Duration 360 ms by bot id=8308846710
2026-01-04 01:54:00,458 [INFO] aiogram.event: Update id=99610675 is handled. Duration 62 ms by bot id=8308846710
2026-01-04 01:54:02,495 [INFO] aiogram.event: Update id=99610676 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 01:54:06,270 [INFO] aiogram.event: Update id=99610677 is handled. Duration 639 ms by bot id=8308846710
2026-01-04 01:54:09,126 [INFO] aiogram.event: Update id=99610678 is handled. Duration 672 ms by bot id=8308846710
2026-01-04 01:54:18,718 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 01:54:18,719 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 01:54:18,719 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 01:54:18,728 [INFO] __main__: Shutdown complete
2026-01-04 11:53:40,674 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 11:53:40,675 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 11:53:40,675 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 11:53:40,675 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 11:53:40,760 [INFO] __main__: api started
2026-01-04 11:53:40,941 [INFO] db: DB initialized (create_all done)
2026-01-04 11:53:41,149 [INFO] app.bot: bot started
2026-01-04 11:53:41,149 [INFO] aiogram.dispatcher: Start polling
2026-01-04 11:53:41,152 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 72378.8s
2026-01-04 11:53:41,314 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 11:53:45,659 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 11:53:45,659 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 11:53:45,659 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 11:53:45,789 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 11:53:45,789 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 11:53:45,789 [INFO] __main__: Shutdown complete
2026-01-04 12:02:15,578 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:02:15,578 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:02:15,578 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:02:15,579 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:02:15,646 [INFO] __main__: api started
2026-01-04 12:02:15,758 [INFO] db: DB initialized (create_all done)
2026-01-04 12:02:15,760 [INFO] db: DB initialized (create_all done)
2026-01-04 12:02:15,950 [INFO] app.bot: bot started
2026-01-04 12:02:15,950 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:02:15,951 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 71864.0s
2026-01-04 12:02:16,100 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:02:49,316 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:02:49,316 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:02:49,317 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:02:49,317 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:02:49,319 [INFO] __main__: Shutdown complete
2026-01-04 12:02:49,319 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:05:07,221 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:05:07,221 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:05:07,222 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:05:07,222 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:05:07,289 [INFO] __main__: api started
2026-01-04 12:05:07,400 [INFO] db: DB initialized (create_all done)
2026-01-04 12:05:07,402 [INFO] db: DB initialized (create_all done)
2026-01-04 12:05:07,588 [INFO] app.bot: bot started
2026-01-04 12:05:07,589 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:05:07,590 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 71692.4s
2026-01-04 12:05:07,736 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:08:24,888 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:08:24,889 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:08:24,889 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:08:24,898 [INFO] __main__: Shutdown complete
2026-01-04 12:08:28,652 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:08:28,652 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:08:28,652 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:08:28,652 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:08:28,724 [INFO] __main__: api started
2026-01-04 12:08:28,837 [INFO] db: DB initialized (create_all done)
2026-01-04 12:08:28,839 [INFO] db: DB initialized (create_all done)
2026-01-04 12:08:29,028 [INFO] app.bot: bot started
2026-01-04 12:08:29,028 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:08:29,029 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 71491.0s
2026-01-04 12:08:29,177 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:08:35,570 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:08:35,570 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:08:35,570 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:08:35,572 [INFO] __main__: Shutdown complete
2026-01-04 12:08:40,820 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:08:40,820 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:08:40,821 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:08:40,821 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:08:40,888 [INFO] __main__: api started
2026-01-04 12:08:40,999 [INFO] db: DB initialized (create_all done)
2026-01-04 12:08:41,001 [INFO] db: DB initialized (create_all done)
2026-01-04 12:08:41,188 [INFO] app.bot: bot started
2026-01-04 12:08:41,188 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:08:41,189 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 71478.8s
2026-01-04 12:08:41,333 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:12:08,634 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:12:08,634 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:12:08,635 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:12:08,635 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:12:08,637 [INFO] __main__: Shutdown complete
2026-01-04 12:12:08,638 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:13:54,854 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:13:54,855 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:13:54,855 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:13:54,855 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:13:54,926 [INFO] __main__: api started
2026-01-04 12:13:55,039 [INFO] db: DB initialized (create_all done)
2026-01-04 12:13:55,226 [INFO] app.bot: bot started
2026-01-04 12:13:55,227 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:13:55,228 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 71164.8s
2026-01-04 12:13:55,231 [INFO] db: DB initialized (create_all done)
2026-01-04 12:13:55,419 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:14:26,258 [INFO] aiogram.event: Update id=99610679 is handled. Duration 297 ms by bot id=8308846710
2026-01-04 12:14:28,035 [INFO] aiogram.event: Update id=99610680 is handled. Duration 77 ms by bot id=8308846710
2026-01-04 12:14:30,744 [INFO] aiogram.event: Update id=99610681 is handled. Duration 109 ms by bot id=8308846710
2026-01-04 12:14:33,139 [INFO] aiogram.event: Update id=99610682 is handled. Duration 140 ms by bot id=8308846710
2026-01-04 12:17:01,202 [INFO] aiogram.event: Update id=99610683 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 12:17:09,361 [INFO] aiogram.event: Update id=99610684 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 12:17:17,799 [INFO] aiogram.event: Update id=99610685 is handled. Duration 140 ms by bot id=8308846710
2026-01-04 12:20:11,275 [INFO] aiogram.event: Update id=99610686 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 12:20:12,621 [INFO] aiogram.event: Update id=99610687 is handled. Duration 157 ms by bot id=8308846710
2026-01-04 12:20:16,870 [INFO] aiogram.event: Update id=99610688 is handled. Duration 78 ms by bot id=8308846710
2026-01-04 12:20:19,777 [INFO] aiogram.event: Update id=99610689 is handled. Duration 125 ms by bot id=8308846710
2026-01-04 12:20:23,850 [INFO] aiogram.event: Update id=99610690 is handled. Duration 93 ms by bot id=8308846710
2026-01-04 12:20:26,146 [INFO] aiogram.event: Update id=99610691 is handled. Duration 140 ms by bot id=8308846710
2026-01-04 12:20:40,298 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:20:40,298 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:20:40,299 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:20:40,307 [INFO] __main__: Shutdown complete
2026-01-04 12:23:14,791 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:23:14,791 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:23:14,791 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:23:14,791 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:23:14,858 [INFO] __main__: api started
2026-01-04 12:23:14,971 [INFO] db: DB initialized (create_all done)
2026-01-04 12:23:14,974 [INFO] db: DB initialized (create_all done)
2026-01-04 12:23:15,161 [INFO] app.bot: bot started
2026-01-04 12:23:15,161 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:23:15,162 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 70604.8s
2026-01-04 12:23:15,330 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:23:18,187 [INFO] aiogram.event: Update id=99610692 is handled. Duration 233 ms by bot id=8308846710
2026-01-04 12:23:25,762 [INFO] aiogram.event: Update id=99610693 is handled. Duration 94 ms by bot id=8308846710
2026-01-04 12:23:30,110 [INFO] aiogram.event: Update id=99610694 is handled. Duration 141 ms by bot id=8308846710
2026-01-04 12:23:39,947 [INFO] aiogram.event: Update id=99610695 is handled. Duration 94 ms by bot id=8308846710
2026-01-04 12:25:16,566 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:25:16,566 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:25:16,567 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:25:16,567 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:25:16,569 [INFO] __main__: Shutdown complete
2026-01-04 12:25:16,569 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:26:51,224 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:26:51,224 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:26:51,225 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:26:51,225 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:26:51,291 [INFO] __main__: api started
2026-01-04 12:26:51,401 [INFO] db: DB initialized (create_all done)
2026-01-04 12:26:51,403 [INFO] db: DB initialized (create_all done)
2026-01-04 12:26:51,589 [INFO] app.bot: bot started
2026-01-04 12:26:51,589 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:26:51,591 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 70388.4s
2026-01-04 12:26:51,763 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:29:36,233 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:29:36,234 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:29:36,234 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:29:36,234 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:29:36,236 [INFO] __main__: Shutdown complete
2026-01-04 12:29:36,236 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:36:39,475 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:36:39,476 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:36:39,476 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:36:39,476 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:36:39,541 [INFO] __main__: api started
2026-01-04 12:36:39,653 [INFO] db: DB initialized (create_all done)
2026-01-04 12:36:39,842 [INFO] app.bot: bot started
2026-01-04 12:36:39,843 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:36:39,844 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 69800.2s
2026-01-04 12:36:39,848 [INFO] db: DB initialized (create_all done)
2026-01-04 12:36:39,995 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:37:00,212 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:37:00,212 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:37:00,213 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:37:00,213 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:37:00,215 [INFO] __main__: Shutdown complete
2026-01-04 12:37:00,215 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:38:21,859 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:38:21,859 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:38:21,860 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:38:21,860 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:38:21,928 [INFO] __main__: api started
2026-01-04 12:38:22,041 [INFO] db: DB initialized (create_all done)
2026-01-04 12:38:22,227 [INFO] app.bot: bot started
2026-01-04 12:38:22,227 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:38:22,228 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 69697.8s
2026-01-04 12:38:22,231 [INFO] db: DB initialized (create_all done)
2026-01-04 12:38:22,379 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:39:23,912 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:39:23,913 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:39:23,913 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:39:23,913 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:39:23,916 [INFO] __main__: Shutdown complete
2026-01-04 12:39:23,916 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:40:59,908 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:40:59,909 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:40:59,909 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:40:59,909 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:40:59,975 [INFO] __main__: api started
2026-01-04 12:41:00,085 [INFO] db: DB initialized (create_all done)
2026-01-04 12:41:00,271 [INFO] app.bot: bot started
2026-01-04 12:41:00,272 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:41:00,273 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 69539.7s
2026-01-04 12:41:00,276 [INFO] db: DB initialized (create_all done)
2026-01-04 12:41:00,419 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:41:16,221 [INFO] aiogram.event: Update id=99610696 is handled. Duration 264 ms by bot id=8308846710
2026-01-04 12:41:27,074 [INFO] aiogram.event: Update id=99610697 is handled. Duration 797 ms by bot id=8308846710
2026-01-04 12:42:00,956 [INFO] aiogram.event: Update id=99610698 is handled. Duration 312 ms by bot id=8308846710
2026-01-04 12:42:02,436 [INFO] aiogram.event: Update id=99610699 is handled. Duration 625 ms by bot id=8308846710
2026-01-04 12:43:19,189 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:43:19,190 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:43:19,190 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:43:19,191 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:43:19,193 [INFO] __main__: Shutdown complete
2026-01-04 12:43:19,194 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:45:12,964 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 12:45:12,964 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 12:45:12,964 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 12:45:12,964 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 12:45:13,032 [INFO] __main__: api started
2026-01-04 12:45:13,143 [INFO] db: DB initialized (create_all done)
2026-01-04 12:45:13,331 [INFO] app.bot: bot started
2026-01-04 12:45:13,331 [INFO] aiogram.dispatcher: Start polling
2026-01-04 12:45:13,332 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 69286.7s
2026-01-04 12:45:13,336 [INFO] db: DB initialized (create_all done)
2026-01-04 12:45:13,477 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 12:45:13,739 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 12:45:13,739 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 12:45:13,740 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 12:45:13,740 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 12:45:13,742 [INFO] __main__: Shutdown complete
2026-01-04 12:45:13,742 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:00:09,774 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:00:09,774 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:00:09,774 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:00:09,775 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:00:09,842 [INFO] __main__: api started
2026-01-04 13:00:09,953 [INFO] db: DB initialized (create_all done)
2026-01-04 13:00:09,955 [INFO] db: DB initialized (create_all done)
2026-01-04 13:00:10,142 [INFO] app.bot: bot started
2026-01-04 13:00:10,143 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:00:10,144 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 68389.9s
2026-01-04 13:00:10,290 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:01:09,416 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:01:09,417 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:01:09,417 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:01:09,419 [INFO] __main__: Shutdown complete
2026-01-04 13:02:11,851 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:02:11,852 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:02:11,852 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:02:11,852 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:02:11,917 [INFO] __main__: api started
2026-01-04 13:02:12,028 [INFO] db: DB initialized (create_all done)
2026-01-04 13:02:12,029 [INFO] db: DB initialized (create_all done)
2026-01-04 13:02:12,216 [INFO] app.bot: bot started
2026-01-04 13:02:12,216 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:02:12,217 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 68267.8s
2026-01-04 13:02:12,364 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:02:56,330 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:02:56,331 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:02:56,331 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 13:02:56,331 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 13:02:56,333 [INFO] __main__: Shutdown complete
2026-01-04 13:02:56,334 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:08:46,186 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:08:46,186 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:08:46,186 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:08:46,187 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:08:46,254 [INFO] __main__: api started
2026-01-04 13:08:46,365 [INFO] db: DB initialized (create_all done)
2026-01-04 13:08:46,368 [INFO] db: DB initialized (create_all done)
2026-01-04 13:08:46,555 [INFO] app.bot: bot started
2026-01-04 13:08:46,555 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:08:46,556 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 67873.4s
2026-01-04 13:08:46,718 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:12:19,243 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:12:19,243 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:12:19,244 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:12:19,245 [INFO] __main__: Shutdown complete
2026-01-04 13:12:22,833 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:12:22,834 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:12:22,834 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:12:22,834 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:12:22,903 [INFO] __main__: api started
2026-01-04 13:12:23,015 [INFO] db: DB initialized (create_all done)
2026-01-04 13:12:23,017 [INFO] db: DB initialized (create_all done)
2026-01-04 13:12:23,204 [INFO] app.bot: bot started
2026-01-04 13:12:23,204 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:12:23,205 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 67656.8s
2026-01-04 13:12:23,373 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:17:16,310 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:17:16,311 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:17:16,311 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 13:17:16,311 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 13:17:16,313 [INFO] __main__: Shutdown complete
2026-01-04 13:17:16,314 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:17:20,018 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:17:20,018 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:17:20,019 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:17:20,019 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:17:20,086 [INFO] __main__: api started
2026-01-04 13:17:20,196 [INFO] db: DB initialized (create_all done)
2026-01-04 13:17:20,199 [INFO] db: DB initialized (create_all done)
2026-01-04 13:17:20,387 [INFO] app.bot: bot started
2026-01-04 13:17:20,387 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:17:20,388 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 67359.6s
2026-01-04 13:17:20,550 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:20:02,869 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:20:02,870 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:20:02,870 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:20:02,878 [INFO] __main__: Shutdown complete
2026-01-04 13:20:06,514 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:20:06,514 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:20:06,514 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:20:06,515 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:20:06,584 [INFO] __main__: api started
2026-01-04 13:20:06,697 [INFO] db: DB initialized (create_all done)
2026-01-04 13:20:06,885 [INFO] app.bot: bot started
2026-01-04 13:20:06,886 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:20:06,887 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 67193.1s
2026-01-04 13:20:06,889 [INFO] db: DB initialized (create_all done)
2026-01-04 13:20:07,046 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:20:42,089 [ERROR] app.api.admin: Failed to notify user tg_id=8322046970
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 35, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2026-01-04 13:20:45,972 [ERROR] app.api.admin: Failed to notify user tg_id=8322046970
Traceback (most recent call last):
  File "C:\Python_Projects\dating_bot\app\api\admin.py", line 35, in notify_user
    await bot.send_message(tg_id, text)
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 2925, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\JK\anaconda3\envs\dating_bot\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2026-01-04 13:21:22,565 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:21:22,566 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:21:22,566 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:21:22,568 [INFO] __main__: Shutdown complete
2026-01-04 13:21:56,448 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:21:56,448 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:21:56,448 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:21:56,449 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:21:56,515 [INFO] __main__: api started
2026-01-04 13:21:56,624 [INFO] db: DB initialized (create_all done)
2026-01-04 13:21:56,812 [INFO] app.bot: bot started
2026-01-04 13:21:56,812 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:21:56,813 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 67083.2s
2026-01-04 13:21:56,816 [INFO] db: DB initialized (create_all done)
2026-01-04 13:21:56,951 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:22:33,856 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:22:33,856 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:22:33,857 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 13:22:33,857 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 13:22:33,859 [INFO] __main__: Shutdown complete
2026-01-04 13:22:33,859 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:25:12,343 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:25:12,343 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:25:12,344 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:25:12,344 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:25:12,416 [INFO] __main__: api started
2026-01-04 13:25:12,528 [INFO] db: DB initialized (create_all done)
2026-01-04 13:25:12,530 [INFO] db: DB initialized (create_all done)
2026-01-04 13:25:12,717 [INFO] app.bot: bot started
2026-01-04 13:25:12,717 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:25:12,718 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 66887.3s
2026-01-04 13:25:12,873 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:32:54,324 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:32:54,324 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:32:54,325 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:32:54,327 [INFO] __main__: Shutdown complete
2026-01-04 13:33:12,323 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:33:12,323 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:33:12,324 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:33:12,324 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:33:12,391 [INFO] __main__: api started
2026-01-04 13:33:12,502 [INFO] db: DB initialized (create_all done)
2026-01-04 13:33:12,504 [INFO] db: DB initialized (create_all done)
2026-01-04 13:33:12,689 [INFO] app.bot: bot started
2026-01-04 13:33:12,690 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:33:12,691 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 66407.3s
2026-01-04 13:33:12,852 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:39:40,256 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:39:40,257 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:39:40,257 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:39:40,265 [INFO] __main__: Shutdown complete
2026-01-04 13:39:44,712 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:39:44,712 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:39:44,712 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:39:44,713 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:39:44,778 [INFO] __main__: api started
2026-01-04 13:39:44,887 [INFO] db: DB initialized (create_all done)
2026-01-04 13:39:45,075 [INFO] app.bot: bot started
2026-01-04 13:39:45,076 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:39:45,077 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 66014.9s
2026-01-04 13:39:45,080 [INFO] db: DB initialized (create_all done)
2026-01-04 13:39:45,225 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:41:46,141 [INFO] aiogram.event: Update id=99610700 is handled. Duration 187 ms by bot id=8308846710
2026-01-04 13:41:47,632 [INFO] aiogram.event: Update id=99610701 is handled. Duration 312 ms by bot id=8308846710
2026-01-04 13:42:24,631 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:42:24,632 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:42:24,632 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:42:24,634 [INFO] __main__: Shutdown complete
2026-01-04 13:42:28,220 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:42:28,220 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:42:28,221 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:42:28,221 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:42:28,289 [INFO] __main__: api started
2026-01-04 13:42:28,398 [INFO] db: DB initialized (create_all done)
2026-01-04 13:42:28,584 [INFO] app.bot: bot started
2026-01-04 13:42:28,584 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:42:28,585 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65851.4s
2026-01-04 13:42:28,588 [INFO] db: DB initialized (create_all done)
2026-01-04 13:42:28,723 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:47:00,118 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:47:00,119 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:47:00,119 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 13:47:00,120 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 13:47:00,121 [INFO] __main__: Shutdown complete
2026-01-04 13:47:00,122 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:47:03,716 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:47:03,717 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:47:03,717 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:47:03,717 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:47:03,788 [INFO] __main__: api started
2026-01-04 13:47:03,900 [INFO] db: DB initialized (create_all done)
2026-01-04 13:47:04,088 [INFO] app.bot: bot started
2026-01-04 13:47:04,088 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:47:04,089 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65575.9s
2026-01-04 13:47:04,091 [INFO] db: DB initialized (create_all done)
2026-01-04 13:47:04,256 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:47:19,800 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:47:19,800 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:47:19,801 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:47:19,808 [INFO] __main__: Shutdown complete
2026-01-04 13:47:24,031 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:47:24,032 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:47:24,032 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:47:24,032 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:47:24,111 [INFO] __main__: api started
2026-01-04 13:47:24,220 [INFO] db: DB initialized (create_all done)
2026-01-04 13:47:24,405 [INFO] app.bot: bot started
2026-01-04 13:47:24,406 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:47:24,407 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65555.6s
2026-01-04 13:47:24,409 [INFO] db: DB initialized (create_all done)
2026-01-04 13:47:24,545 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:49:12,169 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:49:12,169 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:49:12,170 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:49:12,172 [INFO] __main__: Shutdown complete
2026-01-04 13:49:15,827 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:49:15,828 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:49:15,828 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:49:15,828 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:49:15,898 [INFO] __main__: api started
2026-01-04 13:49:16,010 [INFO] db: DB initialized (create_all done)
2026-01-04 13:49:16,012 [INFO] db: DB initialized (create_all done)
2026-01-04 13:49:16,199 [INFO] app.bot: bot started
2026-01-04 13:49:16,200 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:49:16,201 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65443.8s
2026-01-04 13:49:16,344 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:51:28,984 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:51:28,985 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:51:28,985 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:51:28,992 [INFO] __main__: Shutdown complete
2026-01-04 13:51:32,747 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:51:32,747 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:51:32,748 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:51:32,748 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:51:32,816 [INFO] __main__: api started
2026-01-04 13:51:32,926 [INFO] db: DB initialized (create_all done)
2026-01-04 13:51:33,111 [INFO] app.bot: bot started
2026-01-04 13:51:33,112 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:51:33,113 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65306.9s
2026-01-04 13:51:33,115 [INFO] db: DB initialized (create_all done)
2026-01-04 13:51:33,270 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:51:59,740 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:51:59,740 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:51:59,741 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 13:51:59,741 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 13:51:59,743 [INFO] __main__: Shutdown complete
2026-01-04 13:51:59,744 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:52:28,037 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:52:28,038 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:52:28,038 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:52:28,038 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:52:28,106 [INFO] __main__: api started
2026-01-04 13:52:28,215 [INFO] db: DB initialized (create_all done)
2026-01-04 13:52:28,216 [INFO] db: DB initialized (create_all done)
2026-01-04 13:52:28,401 [INFO] app.bot: bot started
2026-01-04 13:52:28,401 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:52:28,402 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65251.6s
2026-01-04 13:52:28,544 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:54:27,380 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:54:27,381 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:54:27,382 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:54:27,390 [INFO] __main__: Shutdown complete
2026-01-04 13:54:31,697 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:54:31,697 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:54:31,698 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:54:31,698 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:54:31,765 [INFO] __main__: api started
2026-01-04 13:54:31,875 [INFO] db: DB initialized (create_all done)
2026-01-04 13:54:31,878 [INFO] db: DB initialized (create_all done)
2026-01-04 13:54:32,065 [INFO] app.bot: bot started
2026-01-04 13:54:32,065 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:54:32,066 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 65127.9s
2026-01-04 13:54:32,217 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:56:45,218 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 13:56:45,219 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 13:56:45,219 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 13:56:45,227 [INFO] __main__: Shutdown complete
2026-01-04 13:56:48,759 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 13:56:48,759 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 13:56:48,760 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 13:56:48,760 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 13:56:48,827 [INFO] __main__: api started
2026-01-04 13:56:48,937 [INFO] db: DB initialized (create_all done)
2026-01-04 13:56:49,123 [INFO] app.bot: bot started
2026-01-04 13:56:49,124 [INFO] aiogram.dispatcher: Start polling
2026-01-04 13:56:49,125 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64990.9s
2026-01-04 13:56:49,127 [INFO] db: DB initialized (create_all done)
2026-01-04 13:56:49,263 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:01:05,791 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:01:05,791 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:01:05,792 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 14:01:05,792 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 14:01:05,794 [INFO] __main__: Shutdown complete
2026-01-04 14:01:05,795 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:01:09,490 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:01:09,491 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:01:09,491 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:01:09,491 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:01:09,560 [INFO] __main__: api started
2026-01-04 14:01:09,671 [INFO] db: DB initialized (create_all done)
2026-01-04 14:01:09,673 [INFO] db: DB initialized (create_all done)
2026-01-04 14:01:09,864 [INFO] app.bot: bot started
2026-01-04 14:01:09,864 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:01:09,865 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64730.1s
2026-01-04 14:01:10,018 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:03:25,778 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:03:25,779 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:03:25,779 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:03:25,787 [INFO] __main__: Shutdown complete
2026-01-04 14:03:29,260 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:03:29,260 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:03:29,260 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:03:29,260 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:03:29,328 [INFO] __main__: api started
2026-01-04 14:03:29,436 [INFO] db: DB initialized (create_all done)
2026-01-04 14:03:29,438 [INFO] db: DB initialized (create_all done)
2026-01-04 14:03:29,623 [INFO] app.bot: bot started
2026-01-04 14:03:29,623 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:03:29,624 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64590.4s
2026-01-04 14:03:29,784 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:03:46,633 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:03:46,634 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:03:46,634 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 14:03:46,635 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 14:03:46,637 [INFO] __main__: Shutdown complete
2026-01-04 14:03:46,637 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:03:50,259 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:03:50,259 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:03:50,259 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:03:50,259 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:03:50,327 [INFO] __main__: api started
2026-01-04 14:03:50,438 [INFO] db: DB initialized (create_all done)
2026-01-04 14:03:50,440 [INFO] db: DB initialized (create_all done)
2026-01-04 14:03:50,628 [INFO] app.bot: bot started
2026-01-04 14:03:50,628 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:03:50,629 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64569.4s
2026-01-04 14:03:50,779 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:08:04,976 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:08:04,976 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:08:04,977 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 14:08:04,977 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 14:08:04,979 [INFO] __main__: Shutdown complete
2026-01-04 14:08:04,979 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:08:09,125 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:08:09,125 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:08:09,126 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:08:09,126 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:08:09,196 [INFO] __main__: api started
2026-01-04 14:08:09,307 [INFO] db: DB initialized (create_all done)
2026-01-04 14:08:09,494 [INFO] app.bot: bot started
2026-01-04 14:08:09,495 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:08:09,496 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64310.5s
2026-01-04 14:08:09,499 [INFO] db: DB initialized (create_all done)
2026-01-04 14:08:09,639 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:09:15,369 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:09:15,370 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:09:15,370 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:09:15,378 [INFO] __main__: Shutdown complete
2026-01-04 14:10:54,060 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:10:54,061 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:10:54,061 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:10:54,061 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:10:54,130 [INFO] __main__: api started
2026-01-04 14:10:54,239 [INFO] db: DB initialized (create_all done)
2026-01-04 14:10:54,241 [INFO] db: DB initialized (create_all done)
2026-01-04 14:10:54,428 [INFO] app.bot: bot started
2026-01-04 14:10:54,428 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:10:54,429 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64145.6s
2026-01-04 14:10:54,596 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:11:47,252 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:11:47,253 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:11:47,253 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 14:11:47,253 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 14:11:47,255 [INFO] __main__: Shutdown complete
2026-01-04 14:11:47,256 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:11:51,624 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:11:51,624 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:11:51,625 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:11:51,625 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:11:51,692 [INFO] __main__: api started
2026-01-04 14:11:51,810 [INFO] db: DB initialized (create_all done)
2026-01-04 14:11:51,813 [INFO] db: DB initialized (create_all done)
2026-01-04 14:11:52,000 [INFO] app.bot: bot started
2026-01-04 14:11:52,000 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:11:52,002 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 64088.0s
2026-01-04 14:11:52,166 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:13:12,898 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:13:12,899 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:13:12,900 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:13:12,901 [INFO] __main__: Shutdown complete
2026-01-04 14:36:28,291 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:36:28,292 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:36:28,292 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:36:28,292 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:36:28,360 [INFO] __main__: api started
2026-01-04 14:36:28,469 [INFO] db: DB initialized (create_all done)
2026-01-04 14:36:28,655 [INFO] app.bot: bot started
2026-01-04 14:36:28,656 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:36:28,657 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 62611.3s
2026-01-04 14:36:28,660 [INFO] db: DB initialized (create_all done)
2026-01-04 14:36:28,794 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:40:33,231 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:40:33,232 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:40:33,232 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 14:40:33,232 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 14:40:33,235 [INFO] __main__: Shutdown complete
2026-01-04 14:40:33,235 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:40:36,889 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:40:36,890 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:40:36,890 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:40:36,890 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:40:36,959 [INFO] __main__: api started
2026-01-04 14:40:37,068 [INFO] db: DB initialized (create_all done)
2026-01-04 14:40:37,070 [INFO] db: DB initialized (create_all done)
2026-01-04 14:40:37,257 [INFO] app.bot: bot started
2026-01-04 14:40:37,258 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:40:37,259 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 62362.7s
2026-01-04 14:40:37,405 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:42:56,870 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:42:56,871 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:42:56,872 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:42:56,873 [INFO] __main__: Shutdown complete
2026-01-04 14:43:00,670 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:43:00,670 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:43:00,670 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:43:00,671 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:43:00,743 [INFO] __main__: api started
2026-01-04 14:43:00,856 [INFO] db: DB initialized (create_all done)
2026-01-04 14:43:00,858 [INFO] db: DB initialized (create_all done)
2026-01-04 14:43:01,048 [INFO] app.bot: bot started
2026-01-04 14:43:01,048 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:43:01,049 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 62219.0s
2026-01-04 14:43:01,193 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:49:45,097 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 14:49:45,098 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 14:49:45,099 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 14:49:45,101 [INFO] __main__: Shutdown complete
2026-01-04 14:49:50,796 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 14:49:50,796 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 14:49:50,797 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 14:49:50,797 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 14:49:50,877 [INFO] __main__: api started
2026-01-04 14:49:50,989 [INFO] db: DB initialized (create_all done)
2026-01-04 14:49:51,176 [INFO] app.bot: bot started
2026-01-04 14:49:51,177 [INFO] aiogram.dispatcher: Start polling
2026-01-04 14:49:51,178 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 61808.8s
2026-01-04 14:49:51,179 [INFO] db: DB initialized (create_all done)
2026-01-04 14:49:51,327 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 16:04:04,564 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2026-01-04 16:04:04,565 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 16:04:05,572 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2026-01-04 16:04:05,576 [WARNING] aiogram.dispatcher: Sleep for 1.306117 seconds and try again... (tryings = 1, bot id = 8308846710)
2026-01-04 16:04:06,897 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2026-01-04 16:04:06,897 [WARNING] aiogram.dispatcher: Sleep for 1.795223 seconds and try again... (tryings = 2, bot id = 8308846710)
2026-01-04 16:04:08,703 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2026-01-04 16:04:08,703 [WARNING] aiogram.dispatcher: Sleep for 2.436048 seconds and try again... (tryings = 3, bot id = 8308846710)
2026-01-04 16:04:21,310 [INFO] aiogram.dispatcher: Connection established (tryings = 4, bot id = 8308846710)
2026-01-04 16:05:01,164 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 16:05:01,165 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 16:05:01,166 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 16:05:01,168 [INFO] __main__: Shutdown complete
2026-01-04 16:05:07,516 [INFO] __main__: Repo root: C:\Python_Projects\dating_bot
2026-01-04 16:05:07,516 [INFO] __main__: .env path: C:\Python_Projects\dating_bot\.env
2026-01-04 16:05:07,516 [INFO] __main__: DB url: postgresql+asyncpg://appuser:strongpass@localhost:5432/dating_bot
2026-01-04 16:05:07,517 [INFO] __main__: API listening: http://127.0.0.1:8000
2026-01-04 16:05:07,585 [INFO] __main__: api started
2026-01-04 16:05:07,697 [INFO] db: DB initialized (create_all done)
2026-01-04 16:05:07,884 [INFO] app.bot: bot started
2026-01-04 16:05:07,884 [INFO] aiogram.dispatcher: Start polling
2026-01-04 16:05:07,885 [INFO] services.daily_reset: Daily reset scheduled at 2026-01-05T08:00:00+02:00 (Europe/Kyiv), sleep 57292.1s
2026-01-04 16:05:07,887 [INFO] db: DB initialized (create_all done)
2026-01-04 16:05:08,020 [INFO] aiogram.dispatcher: Run polling for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
2026-01-04 16:07:36,894 [INFO] aiogram.dispatcher: Polling stopped
2026-01-04 16:07:36,894 [INFO] __main__: Shutdown requested, cancelling services...
2026-01-04 16:07:36,895 [ERROR] aiogram.dispatcher: Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2026-01-04 16:07:36,895 [WARNING] aiogram.dispatcher: Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8308846710)
2026-01-04 16:07:36,897 [INFO] __main__: Shutdown complete
2026-01-04 16:07:36,898 [INFO] aiogram.dispatcher: Polling stopped for bot @senderdatingtest_bot id=8308846710 - 'UA    !'
